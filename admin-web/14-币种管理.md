# 币种管理

> 返回 [后台管理前端目录](./README.md)

---

## 页面概述

- **页面路径**: `/admin/currencies`
- **权限要求**: Admin 角色
- **主要功能**: 币种配置管理、功能开关控制、币种上架/下架

---

## 数据模型

### 币种

```typescript
interface Currency {
  id: string;                    // 币种ID
  symbol: string;                // 币种符号: USDT, ETH, BNB, TRX
  name: string;                  // 币种全称
  icon: string;                  // 币种图标
  status: '上架' | '下架';        // 币种状态

  // Web2 功能开关
  web2DepositEnabled: boolean;   // Web2 充值
  web2WithdrawEnabled: boolean;  // Web2 提现
  web2TransferEnabled: boolean;  // Web2 划转

  // Web3 功能开关
  web3DepositEnabled: boolean;   // Web3 充值
  web3WithdrawEnabled: boolean;  // Web3 提现
  web3SwapEnabled: boolean;      // Web3 Swap

  balance: number;               // 平台余额
  createdAt: string;             // 创建时间
}
```

---

## 页面布局

### 币种管理主页面结构

```
┌──────────────────────────────────────────────────────────────────────────┐
│  Header                                                                   │
├──────────┬───────────────────────────────────────────────────────────────┤
│          │  Breadcrumb: 首页 / 币种管理                                   │
│  Sidebar ├───────────────────────────────────────────────────────────────┤
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 统计卡片                                                  │ │
│          │  │ [币种总数: 8]  [已上架: 6]  [已下架: 2]                   │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 操作栏                                                    │ │
│          │  │ [状态▼] [搜索______]                        [添加币种]   │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ │图标│符号 │名称         │状态│Web2功能    │Web3功能│操作│ │
│          │  │ ├────┼─────┼─────────────┼────┼────────────┼────────┼────┤ │
│          │  │ │🟡  │USDT │Tether USD   │上架│充✓ 提✓ 转✓│充✓ 提✓│编辑│ │
│          │  │ │💎  │ETH  │Ethereum     │上架│充✓ 提✓ 转✓│充✓ 提✓│编辑│ │
│          │  │ │🔴  │TRX  │Tron         │上架│充✓ 提✗ 转✓│充✓ 提✓│编辑│ │
│          │  │ │🟣  │MATIC│Polygon      │下架│-  -  -    │-  -   │编辑│ │
│          │  │ ...                                                       │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
└──────────┴───────────────────────────────────────────────────────────────┘
```

---

## 功能模块

### 1. 统计概览

**功能描述**: 显示币种相关的统计数据

**用户角色**: Admin

**UI 组件**:
- **StatisticCard**: 统计卡片

**统计项**:

| 统计项 | 说明 | 样式 |
|--------|------|------|
| 币种总数 | 系统中的币种总数 | 蓝色 |
| 已上架 | 状态为上架的币种数 | 绿色 |
| 已下架 | 状态为下架的币种数 | 灰色 |

---

### 2. 币种列表筛选

**功能描述**: 筛选和搜索币种

**用户角色**: Admin

**筛选条件**:

| 字段 | 组件类型 | 选项 |
|------|----------|------|
| 状态 | Select | 全部、已上架、已下架 |
| 搜索 | Input | 币种符号、名称 |

---

### 3. 币种列表展示

**功能描述**: 以表格形式展示币种列表

**用户角色**: Admin

**表格列定义**:

| 列名 | 字段 | 宽度 | 说明 |
|------|------|------|------|
| 图标 | icon | 50px | 币种图标 |
| 符号 | symbol | 80px | 币种符号 |
| 名称 | name | 150px | 币种全称 |
| 状态 | status | 80px | 上架/下架标签 |
| Web2 功能 | web2Features | 150px | 充值/提现/划转开关状态 |
| Web3 功能 | web3Features | 120px | 充值/提现/Swap开关状态 |
| 平台余额 | balance | 120px | 当前平台余额 |
| 操作 | - | 100px | 编辑按钮 |

**状态标签**:

| 状态 | 颜色 | 说明 |
|------|------|------|
| 上架 | 绿色 | 币种可用 |
| 下架 | 灰色 | 币种已停用 |

**功能开关显示**:
- ✓ 绿色勾选：功能已启用
- ✗ 红色叉：功能已禁用
- - 灰色：币种下架时不显示

---

### 4. 添加币种

**功能描述**: 添加新的币种配置

**用户角色**: Admin

**触发方式**: 点击「添加币种」按钮

**添加币种对话框**:
```
┌────────────────────────────────────────────────────────────────┐
│  添加币种                                                  [×]  │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  基本信息                                                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 币种符号 *                                               │  │
│  │ [________] (如: USDT, ETH)                               │  │
│  │                                                          │  │
│  │ 币种名称 *                                               │  │
│  │ [________________________]                               │  │
│  │                                                          │  │
│  │ 币种图标                                                 │  │
│  │ [上传图标]  📤                                           │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  Web2 功能配置                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ [✓] 充值功能                                             │  │
│  │ [✓] 提现功能                                             │  │
│  │ [✓] 划转功能                                             │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  Web3 功能配置                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ [✓] 充值功能                                             │  │
│  │ [✓] 提现功能                                             │  │
│  │ [ ] Swap 功能                                            │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  状态                                                          │
│  [○ 上架]  [○ 下架]                                           │
│                                                                │
│         [取消]    [添加]                                       │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

**验证规则**:

| 字段 | 验证规则 | 错误提示 |
|------|----------|----------|
| 币种符号 | 必填，2-10字符，大写字母 | "请输入有效的币种符号" |
| 币种名称 | 必填，2-50字符 | "请输入币种名称" |

---

### 5. 编辑币种

**功能描述**: 编辑现有币种的配置

**用户角色**: Admin

**触发方式**: 点击币种行的「编辑」按钮

**编辑币种对话框**:
```
┌────────────────────────────────────────────────────────────────┐
│  编辑币种 - USDT                                           [×]  │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  基本信息                                                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 币种符号: USDT (不可修改)                                │  │
│  │                                                          │  │
│  │ 币种名称 *                                               │  │
│  │ [Tether USD________________]                             │  │
│  │                                                          │  │
│  │ 币种图标                                                 │  │
│  │ 🟡 [更换图标]                                            │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  Web2 功能配置                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ [✓] 充值功能    启用后用户可在Web2钱包充值此币种         │  │
│  │ [✓] 提现功能    启用后用户可从Web2钱包提现此币种         │  │
│  │ [✓] 划转功能    启用后用户可进行Web2钱包内部划转         │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  Web3 功能配置                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ [✓] 充值功能    启用后用户可在Web3钱包充值此币种         │  │
│  │ [✓] 提现功能    启用后用户可从Web3钱包提现此币种         │  │
│  │ [✓] Swap 功能   启用后用户可使用此币种进行Swap兑换       │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  状态                                                          │
│  [● 上架]  [○ 下架]                                           │
│                                                                │
│  ⚠️ 下架币种后，所有相关功能将被禁用                          │
│                                                                │
│         [取消]    [保存]                                       │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

### 6. 功能开关说明

**功能描述**: 控制各币种在 Web2 和 Web3 环境下的可用功能

**用户角色**: Admin

#### Web2 功能开关

| 功能 | 说明 |
|------|------|
| 充值 | 用户可向 Web2 托管钱包充值此币种 |
| 提现 | 用户可从 Web2 托管钱包提现此币种 |
| 划转 | 用户可在平台内进行此币种的内部转账 |

#### Web3 功能开关

| 功能 | 说明 |
|------|------|
| 充值 | 用户可向 Web3 自托管钱包充值此币种 |
| 提现 | 用户可从 Web3 自托管钱包提现此币种 |
| Swap | 用户可使用此币种进行 DEX 兑换 |

**注意事项**:
- 下架币种时，所有功能开关自动禁用
- 上架币种后，需要手动启用各项功能
- 功能开关变更立即生效

---

### 7. 上架/下架操作

**功能描述**: 切换币种的上架/下架状态

**用户角色**: Admin

**下架确认对话框**:
```
┌────────────────────────────────────────┐
│  下架币种                          [×]  │
├────────────────────────────────────────┤
│                                        │
│  确定要下架 USDT 吗？                  │
│                                        │
│  下架后：                              │
│  • 所有 Web2/Web3 功能将被禁用        │
│  • 用户无法使用此币种进行任何操作      │
│  • 现有余额不受影响                    │
│                                        │
│  ⚠️ 平台当前余额: 1,000,000 USDT      │
│                                        │
│         [取消]    [确认下架]           │
│                                        │
└────────────────────────────────────────┘
```

---

## UI 组件列表

| 组件名称 | 类型 | 功能说明 |
|----------|------|----------|
| CurrencyStats | Card | 统计概览卡片 |
| CurrencyFilter | Form | 筛选表单 |
| CurrencyTable | Table | 币种列表表格 |
| AddCurrencyModal | Modal | 添加币种对话框 |
| EditCurrencyModal | Modal | 编辑币种对话框 |
| StatusConfirmModal | Modal | 状态变更确认对话框 |
| StatusTag | Tag | 状态标签 |
| FeatureSwitch | Switch | 功能开关组件 |
| IconUploader | Upload | 图标上传组件 |

---

## 状态与交互

### 页面状态

| 状态 | 描述 | UI 表现 |
|------|------|---------|
| Loading | 列表加载中 | 显示表格骨架屏 |
| Empty | 无币种数据 | 显示空状态提示 |
| Error | 加载失败 | 显示错误提示和重试按钮 |

### 用户操作响应

| 操作 | 成功响应 | 失败响应 |
|------|----------|----------|
| 添加币种 | Toast "币种添加成功"，刷新列表 | Alert 显示错误原因 |
| 编辑币种 | Toast "配置已保存"，刷新列表 | Alert 显示错误原因 |
| 上架/下架 | Toast "状态已更新"，刷新列表 | Alert 显示错误原因 |
| 功能开关 | Toast "功能已 [启用/禁用]" | Alert 显示错误原因 |

---

## 权限控制

| 功能 | Admin | Finance |
|------|-------|---------|
| 查看币种列表 | ✓ | ✓（只读） |
| 添加币种 | ✓ | - |
| 编辑币种 | ✓ | - |
| 上架/下架 | ✓ | - |
| 删除币种 | ✓ | - |

---

## 支持的币种示例

| 符号 | 名称 | 图标 | 支持网络 |
|------|------|------|----------|
| USDT | Tether USD | 🟡 | ETH, BSC, TRX, Polygon |
| USDC | USD Coin | 🔵 | ETH, BSC, Polygon |
| ETH | Ethereum | 💎 | ETH |
| BNB | BNB | 🟠 | BSC |
| TRX | Tron | 🔴 | TRX |
| MATIC | Polygon | 🟣 | Polygon |

---

## 安全注意事项

1. **下架保护**: 下架币种前检查是否有未完成的交易
2. **余额提示**: 下架时显示当前平台余额警告
3. **操作审计**: 所有币种配置变更记录审计日志
4. **功能联动**: 下架币种时自动禁用所有相关功能

---

> 返回 [后台管理前端目录](./README.md)
