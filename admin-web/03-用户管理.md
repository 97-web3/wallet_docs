# 用户管理

> 返回 [后台管理前端目录](./README.md)

---

## 页面概述

- **页面路径**: `/admin/users`
- **权限要求**: Admin 角色
- **主要功能**: Web2 用户列表查询、用户状态管理（冻结/解冻/离职）、白名单管理、安全设置、密码管理

**说明**: 本页面管理 Web2 用户（手机/邮箱登录）。Web3 用户（钱包登录）请前往 [Web3 用户管理](./10-Web3用户管理.md)。

---

## 页面布局

### 用户列表页面结构

```
┌──────────────────────────────────────────────────────────────────────────┐
│  Header                                                                   │
├──────────┬───────────────────────────────────────────────────────────────┤
│          │  Breadcrumb: 首页 / 用户管理                                   │
│  Sidebar ├───────────────────────────────────────────────────────────────┤
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 统计卡片                                                  │ │
│          │  │ [总用户: 1,256] [Web2用户: 856 (68%)] [Web3用户: 400 (32%)]│ │
│          │  │ [白名单用户: 45] 提示: 启用白名单的用户提现申请将免审核   │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 筛选区域                                                  │ │
│          │  │ [UID/手机/邮箱____] [身份▼] [状态▼] [白名单▼] [2FA▼]     │ │
│          │  │ [生物识别▼] [🔍搜索] [重置]                               │ │
│          │  │ [已选筛选标签...]                          [清空筛选]     │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 操作栏                                   [批量冻结] [导出] │ │
│          │  ├──────────────────────────────────────────────────────────┤ │
│          │  │ □ │ UID  │手机号    │邮箱      │身份│状态│2FA│生物│白名单│操作│
│          │  ├───┼──────┼──────────┼──────────┼────┼────┼───┼────┼──────┼────┤
│          │  │ □ │10001 │138****   │u***@a.com│员工│正常│ ✓ │ ✓  │ ✓    │... │
│          │  │ □ │10002 │139****   │t***@b.com│普通│冻结│ ✓ │ ✗  │ ✗    │... │
│          │  │ □ │10003 │137****   │m***@c.com│员工│离职│ ✗ │ ✗  │ ✗    │... │
│          │  │ ...                                                       │ │
│          │  ├──────────────────────────────────────────────────────────┤ │
│          │  │                    < 1 2 3 4 5 ... 10 >                   │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
└──────────┴───────────────────────────────────────────────────────────────┘
```

### 用户详情抽屉结构

```
┌────────────────────────────────────────┐
│  用户详情                         [×]  │
├────────────────────────────────────────┤
│                                        │
│  基本信息                              │
│  ┌──────────────────────────────────┐  │
│  │ UID:        10001                │  │
│  │ 手机号:     138****1234          │  │
│  │ 邮箱:       user***@domain.com   │  │
│  │ 身份:       员工                  │  │
│  │ 状态:       正常 ●               │  │
│  │ 注册时间:   2025-01-01 10:00     │  │
│  └──────────────────────────────────┘  │
│                                        │
│  钱包信息                              │
│  ┌──────────────────────────────────┐  │
│  │ Web2 钱包余额:                   │  │
│  │   USDT: 1,000.00                 │  │
│  │   TRX:  5,000.00                 │  │
│  │                                  │  │
│  │ 关联 Web3 地址:                  │  │
│  │   T9yD14N...Ww (TRX)   [已绑定]  │  │
│  └──────────────────────────────────┘  │
│                                        │
│  操作记录                              │
│  ┌──────────────────────────────────┐  │
│  │ 2025-12-01 冻结账户 by admin001  │  │
│  │ 2025-11-15 修改身份 by admin002  │  │
│  │ ...                              │  │
│  └──────────────────────────────────┘  │
│                                        │
│  ┌──────────────────────────────────┐  │
│  │ [冻结账户] [设为离职] [加入黑名单]│  │
│  └──────────────────────────────────┘  │
│                                        │
└────────────────────────────────────────┘
```

---

## 功能模块

### 1. 用户搜索与筛选

**功能描述**: 支持多条件搜索和筛选用户

**用户角色**: Admin

**UI 组件**:

- **SearchInput**: 搜索输入框（支持 UID/手机号/邮箱）
- **Select**: 身份筛选下拉框
- **Select**: 状态筛选下拉框
- **Button**: 搜索和重置按钮

**筛选条件**:

| 字段     | 组件类型 | 选项                   |
| -------- | -------- | ---------------------- |
| 关键词   | Input    | UID、手机号、邮箱      |
| 身份     | Select   | 全部、员工、普通用户   |
| 状态     | Select   | 全部、正常、冻结、离职 |
| 白名单   | Select   | 全部、已启用、未启用   |
| 2FA 认证 | Select   | 全部、已启用、未启用   |
| 生物识别 | Select   | 全部、已启用、未启用   |

**筛选标签功能**:

- 已选筛选条件以标签形式显示在筛选区域下方
- 点击标签上的 × 可移除单个筛选条件
- 点击「清空筛选」一键重置所有筛选

**用户交互流程**:

1. 输入搜索关键词或选择筛选条件
2. 点击「搜索」按钮
3. 列表刷新显示筛选结果
4. 点击「重置」清空所有筛选条件

---

### 2. 用户列表展示

**功能描述**: 以表格形式展示用户列表

**用户角色**: Admin

**UI 组件**:

- **Table**: 数据表格
- **Checkbox**: 行选择框
- **Pagination**: 分页组件
- **Tag**: 状态标签

**表格列定义**:

| 列名     | 字段             | 宽度  | 说明                           |
| -------- | ---------------- | ----- | ------------------------------ |
| 选择     | -                | 50px  | 复选框                         |
| UID      | uid              | 100px | 用户唯一标识                   |
| 手机号   | phone            | 130px | 脱敏显示（138\*\*\*\*1234）    |
| 邮箱     | email            | 180px | 脱敏显示（u\*\*\*@domain.com） |
| 身份     | identity         | 80px  | 员工/普通用户                  |
| 状态     | status           | 80px  | 状态标签                       |
| 2FA      | twoFactorEnabled | 60px  | ✓/✗ 徽章                       |
| 生物识别 | biometricEnabled | 70px  | ✓/✗ 徽章                       |
| 白名单   | whitelistEnabled | 70px  | ✓/✗ 徽章                       |
| 注册时间 | created_at       | 160px | 时间格式                       |
| 操作     | -                | 150px | 操作按钮                       |

**状态标签样式**:

| 状态       | 标签颜色 | 文字 |
| ---------- | -------- | ---- |
| active     | 绿色     | 正常 |
| frozen     | 蓝色     | 冻结 |
| terminated | 灰色     | 离职 |

**操作按钮**:

| 按钮     | 条件显示   | 功能                                     |
| -------- | ---------- | ---------------------------------------- |
| 查看详情 | 始终显示   | 打开用户详情抽屉                         |
| 冻结     | 状态为正常 | 冻结用户                                 |
| 解冻     | 状态为冻结 | 解冻用户                                 |
| 更多 ▼   | 始终显示   | 下拉菜单：设为离职、白名单设置、重置密码 |

---

### 3. 用户详情抽屉

**功能描述**: 展示用户完整信息和操作入口

**用户角色**: Admin

**UI 组件**:

- **Drawer**: 抽屉容器
- **Descriptions**: 描述列表
- **Timeline**: 操作记录时间线
- **Button**: 操作按钮组

**信息展示区域**:

#### 3.1 基本信息

| 字段     | 说明             |
| -------- | ---------------- |
| UID      | 用户唯一标识     |
| 手机号   | 脱敏显示         |
| 邮箱     | 脱敏显示         |
| 身份     | 员工/非员工      |
| 角色标签 | 可自定义标签     |
| 状态     | 当前账户状态     |
| 注册时间 | 账户创建时间     |
| 最后登录 | 最近一次登录时间 |

#### 3.2 钱包信息

| 字段           | 说明                 |
| -------------- | -------------------- |
| Web2 钱包余额  | 各币种余额明细       |
| 关联 Web3 地址 | 绑定的 Web3 钱包地址 |
| 绑定状态       | 已绑定/未绑定        |

#### 3.3 操作记录

- 时间线形式展示历史操作
- 显示操作时间、操作类型、操作人

---

### 4. 用户状态管理

**功能描述**: 对用户执行冻结、解冻、离职等状态变更操作

**用户角色**: Admin

#### 4.1 冻结用户

**触发方式**: 点击「冻结」按钮

**确认对话框**:

```
┌────────────────────────────────────────┐
│  冻结用户                         [×]  │
├────────────────────────────────────────┤
│                                        │
│  确定要冻结用户 10001 吗？             │
│                                        │
│  冻结后：                              │
│  • 用户将被强制登出                    │
│  • 无法进行任何交易操作                │
│  • Web2 钱包资金将被锁定              │
│                                        │
│  冻结原因 *                            │
│  [________________________]            │
│                                        │
│         [取消]    [确认冻结]           │
│                                        │
└────────────────────────────────────────┘
```

**交互流程**:

1. 点击「冻结」按钮
2. 弹出确认对话框
3. 输入冻结原因（必填）
4. 点击「确认冻结」
5. 显示 Loading 状态
6. 操作成功后刷新列表，显示成功提示

#### 4.2 解冻用户

**触发方式**: 点击「解冻」按钮

**确认对话框**:

```
┌────────────────────────────────────────┐
│  解冻用户                         [×]  │
├────────────────────────────────────────┤
│                                        │
│  确定要解冻用户 10001 吗？             │
│                                        │
│  解冻后：                              │
│  • 用户可以正常登录和交易              │
│  • Web2 钱包资金将恢复可用            │
│                                        │
│  解冻原因                              │
│  [________________________]            │
│                                        │
│         [取消]    [确认解冻]           │
│                                        │
└────────────────────────────────────────┘
```

#### 4.3 设为离职

**触发方式**: 点击「更多」→「设为离职」

**确认对话框**:

```
┌────────────────────────────────────────┐
│  离职处理                         [×]  │
├────────────────────────────────────────┤
│                                        │
│  确定要将用户 10001 设为离职状态吗？   │
│                                        │
│  离职处理后：                          │
│  • 用户身份将变更为「非员工」          │
│  • 用户将无法接收薪资发放              │
│  • 账户状态保持不变                    │
│                                        │
│  离职日期 *                            │
│  [2025-12-10        📅]               │
│                                        │
│  备注                                  │
│  [________________________]            │
│                                        │
│         [取消]    [确认处理]           │
│                                        │
└────────────────────────────────────────┘
```

---

### 5. 批量操作

**功能描述**: 对多个用户执行批量操作

**用户角色**: Admin

**UI 组件**:

- **Checkbox**: 全选/单选
- **Button**: 批量操作按钮
- **Dropdown**: 操作下拉菜单

**支持的批量操作**:
| 操作 | 说明 |
|------|------|
| 批量冻结 | 冻结选中的用户 |
| 批量解冻 | 解冻选中的用户 |
| 导出选中 | 导出选中用户数据 |

**交互说明**:

- 选中用户后显示已选数量
- 批量操作需要二次确认
- 操作结果显示成功/失败统计

---

### 6. 白名单管理

**功能描述**: 管理用户提现白名单，启用白名单后用户提现可免审核

**用户角色**: Admin

**触发方式**: 点击用户行的「更多」→「白名单设置」

**白名单设置对话框**:

```
┌────────────────────────────────────────┐
│  白名单设置                        [×]  │
├────────────────────────────────────────┤
│                                        │
│  用户: 10001 (138****1234)             │
│                                        │
│  白名单开关                            │
│  [  启用  ●━━━━━━━○  禁用  ]           │
│                                        │
│  ── 启用白名单后的设置 ──              │
│                                        │
│  提现阈值 (USDT) *                     │
│  [________________] USDT               │
│  (单笔提现不超过此金额可免审核，0=无限制)│
│                                        │
│  白名单钱包地址                        │
│  [0x________________________]         │
│  (可选，绑定特定提现地址)               │
│                                        │
│  ⚠️ 启用白名单后：                     │
│  • 用户提现申请将免审核                │
│  • 单笔金额不得超过设定阈值            │
│                                        │
│         [取消]    [保存]               │
│                                        │
└────────────────────────────────────────┘
```

**白名单数据字段**:

| 字段               | 类型    | 说明                           |
| ------------------ | ------- | ------------------------------ |
| whitelistEnabled   | boolean | 白名单开关                     |
| whitelistThreshold | number  | 白名单阈值(USDT)，0 表示无限制 |
| whitelistWallet    | string  | 白名单钱包地址（可选）         |

---

### 7. 安全设置显示

**功能描述**: 显示用户的安全设置状态（只读）

**用户角色**: Admin

**UI 组件**:

- **Badge**: 状态徽章
- **Tooltip**: 提示说明

**显示内容**:

| 设置项   | 显示方式        | 说明                   |
| -------- | --------------- | ---------------------- |
| 2FA 认证 | ✓ 绿色 / ✗ 灰色 | 用户是否启用双因素认证 |
| 生物识别 | ✓ 绿色 / ✗ 灰色 | 用户是否启用生物识别   |

**重要说明**:

- 用户需在 App 端自行设置 2FA 和生物识别
- 后台仅显示状态，不可修改

---

### 8. 密码管理

**功能描述**: 为用户重置登录密码或交易密码

**用户角色**: Admin

**触发方式**: 点击用户行的「更多」→「重置密码」

**密码重置对话框**:

```
┌────────────────────────────────────────┐
│  重置密码                          [×]  │
├────────────────────────────────────────┤
│                                        │
│  用户: 10001 (138****1234)             │
│                                        │
│  重置类型 *                            │
│  [○ 登录密码]  [○ 交易密码]           │
│                                        │
│  新密码 *                              │
│  [________________________]            │
│  至少8位，包含字母和数字               │
│                                        │
│  确认密码 *                            │
│  [________________________]            │
│                                        │
│  ⚠️ 安全提示：                         │
│  密码重置后，将通过邮箱和手机短信通知用户│
│                                        │
│         [取消]    [确认重置]           │
│                                        │
└────────────────────────────────────────┘
```

**密码验证规则**:

| 规则     | 说明             |
| -------- | ---------------- |
| 最小长度 | 至少 8 位字符    |
| 字符要求 | 包含字母和数字   |
| 确认匹配 | 两次输入必须一致 |

---

## UI 组件列表

| 组件名称           | 类型     | 功能说明                     |
| ------------------ | -------- | ---------------------------- |
| UserStats          | Card     | 用户统计卡片                 |
| UserSearchBar      | Form     | 用户搜索表单                 |
| FilterTags         | Tag      | 筛选条件标签                 |
| UserTable          | Table    | 用户列表表格                 |
| UserDetailDrawer   | Drawer   | 用户详情抽屉                 |
| StatusTag          | Tag      | 用户状态标签                 |
| IdentityTag        | Tag      | 身份标签（员工/普通用户）    |
| SecurityBadge      | Badge    | 安全设置徽章（2FA/生物识别） |
| FreezeModal        | Modal    | 冻结确认对话框               |
| UnfreezeModal      | Modal    | 解冻确认对话框               |
| TerminationModal   | Modal    | 离职处理对话框               |
| WhitelistModal     | Modal    | 白名单设置对话框             |
| PasswordResetModal | Modal    | 密码重置对话框               |
| OperationTimeline  | Timeline | 操作记录时间线               |

---

## 状态与交互

### 页面状态

| 状态     | 描述       | UI 表现                    |
| -------- | ---------- | -------------------------- |
| Loading  | 列表加载中 | 显示表格骨架屏             |
| Empty    | 无搜索结果 | 显示空状态图和提示         |
| Error    | 加载失败   | 显示错误提示和重试按钮     |
| Selected | 已选择用户 | 显示选中数量和批量操作按钮 |

### 用户操作响应

| 操作       | 成功响应                       | 失败响应           |
| ---------- | ------------------------------ | ------------------ |
| 冻结用户   | Toast "用户已冻结"，刷新列表   | Alert 显示错误原因 |
| 解冻用户   | Toast "用户已解冻"，刷新列表   | Alert 显示错误原因 |
| 设为离职   | Toast "离职处理完成"，刷新列表 | Alert 显示错误原因 |
| 加入黑名单 | Toast "已加入黑名单"，刷新列表 | Alert 显示错误原因 |

---

## 数据脱敏规则

| 字段     | 脱敏规则         | 示例               |
| -------- | ---------------- | ------------------ |
| 手机号   | 保留前 3 后 4 位 | 138\*\*\*\*1234    |
| 邮箱     | 保留首字母和域名 | u\*\*\*@domain.com |
| 钱包地址 | 保留前 6 后 4 位 | T9yD14...Ww        |

---

## 权限控制

| 功能          | Admin | Finance |
| ------------- | ----- | ------- |
| 查看用户列表  | ✓     | -       |
| 查看用户详情  | ✓     | -       |
| 冻结/解冻用户 | ✓     | -       |
| 离职处理      | ✓     | -       |
| 黑名单管理    | ✓     | -       |
| 导出用户数据  | ✓     | -       |

---

> 返回 [后台管理前端目录](./README.md)
