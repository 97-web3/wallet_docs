# 黑名单地址管理

> 返回 [后台管理前端目录](./README.md)

---

## 页面概述

- **页面路径**: `/admin/blacklist`
- **权限要求**: Admin 角色
- **主要功能**: 黑名单地址管理、风险等级分类、监测状态管理、批量导入

---

## 数据模型

### 黑名单地址

```typescript
interface BlacklistAddress {
  id: string;                    // 记录ID
  address: string;               // 钱包地址
  network: string;               // 网络: Ethereum, BSC, Tron, Polygon
  riskLevel: '高风险' | '中风险' | '低风险';  // 风险等级
  reason: string;                // 标记原因
  source: string;                // 来源
  isMonitoring: boolean;         // 是否监测中
  addedAt: string;               // 添加时间
  addedBy: string;               // 添加人
  matchCount: number;            // 匹配次数
  lastMatchTime?: string;        // 最后匹配时间
}
```

**来源类型**:
- 手动添加
- 用户举报
- 第三方数据源
- 系统自动检测
- 关联分析
- 用户管理标记（来自 [Web3 用户管理](./09-Web3用户管理.md) 的黑名单标记操作）

---

## 页面布局

### 黑名单管理主页面结构

```
┌──────────────────────────────────────────────────────────────────────────┐
│  Header                                                                   │
├──────────┬───────────────────────────────────────────────────────────────┤
│          │  Breadcrumb: 首页 / 黑名单地址管理                             │
│  Sidebar ├───────────────────────────────────────────────────────────────┤
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 统计卡片                                                  │ │
│          │  │ [地址总数: 256]  [高风险: 45]  [监测中: 180]  [命中: 892] │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ 操作栏                                                    │ │
│          │  │ [风险等级▼] [网络▼] [监测状态▼] [搜索______]             │ │
│          │  │                              [添加地址] [批量导入] [导出] │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
│          │  ┌──────────────────────────────────────────────────────────┐ │
│          │  │ │地址        │网络│风险 │原因      │来源  │监测│命中│操作│ │
│          │  │ ├────────────┼────┼─────┼──────────┼──────┼────┼────┼────┤ │
│          │  │ │0x1234...   │ETH │高   │钓鱼攻击  │第三方│是  │56  │... │ │
│          │  │ │0xabcd...   │BSC │中   │可疑交易  │举报  │是  │12  │... │ │
│          │  │ │T9yD14...   │TRX │低   │关联风险  │分析  │否  │3   │... │ │
│          │  │ ...                                                       │ │
│          │  ├──────────────────────────────────────────────────────────┤ │
│          │  │                    < 1 2 3 4 5 ... 10 >                   │ │
│          │  └──────────────────────────────────────────────────────────┘ │
│          │                                                                │
└──────────┴───────────────────────────────────────────────────────────────┘
```

---

## 功能模块

### 1. 统计概览

**功能描述**: 显示黑名单地址相关的统计数据

**用户角色**: Admin

**UI 组件**:
- **StatisticCard**: 统计卡片

**统计项**:

| 统计项 | 说明 | 样式 |
|--------|------|------|
| 地址总数 | 黑名单地址总数 | 蓝色 |
| 高风险地址 | 高风险等级地址数量 | 红色 |
| 监测中地址 | 正在监测的地址数量 | 绿色 |
| 命中次数 | 历史命中次数总计 | 橙色 |

---

### 2. 地址筛选

**功能描述**: 多条件筛选黑名单地址

**用户角色**: Admin

**筛选条件**:

| 字段 | 组件类型 | 选项 |
|------|----------|------|
| 风险等级 | Select | 全部、高风险、中风险、低风险 |
| 网络 | Select | 全部、Ethereum、BSC、Tron、Polygon |
| 监测状态 | Select | 全部、监测中、已停止 |
| 搜索关键词 | Input | 地址、原因、来源 |

---

### 3. 地址列表展示

**功能描述**: 以表格形式展示黑名单地址列表

**用户角色**: Admin

**表格列定义**:

| 列名 | 字段 | 宽度 | 说明 |
|------|------|------|------|
| 地址 | address | 180px | 缩略显示，可复制 |
| 网络 | network | 100px | 网络类型标签 |
| 风险等级 | riskLevel | 80px | 风险等级标签 |
| 原因 | reason | 150px | 标记原因 |
| 来源 | source | 100px | 数据来源 |
| 监测状态 | isMonitoring | 80px | 监测中/已停止 |
| 匹配次数 | matchCount | 80px | 命中计数 |
| 添加时间 | addedAt | 160px | 创建时间 |
| 操作 | - | 150px | 操作按钮 |

**风险等级标签**:

| 等级 | 颜色 | 说明 |
|------|------|------|
| 高风险 | 红色 | 确认的恶意地址 |
| 中风险 | 橙色 | 可疑地址 |
| 低风险 | 黄色 | 关联风险地址 |

**网络标签**:

| 网络 | 颜色 |
|------|------|
| Ethereum | 蓝紫色 |
| BSC | 黄色 |
| Tron | 红色 |
| Polygon | 紫色 |

**操作按钮**:
- 详情：查看地址详细信息
- 删除：从黑名单移除
- 监测开关：切换监测状态

---

### 4. 添加黑名单地址

**功能描述**: 手动添加单个黑名单地址

**用户角色**: Admin

**触发方式**: 点击「添加地址」按钮

**添加地址对话框**:
```
┌────────────────────────────────────────┐
│  添加黑名单地址                    [×]  │
├────────────────────────────────────────┤
│                                        │
│  钱包地址 *                            │
│  [________________________]            │
│                                        │
│  选择网络 *                            │
│  [Ethereum        ▼]                  │
│                                        │
│  风险等级 *                            │
│  [○ 高风险]  [○ 中风险]  [○ 低风险]   │
│                                        │
│  标记原因 *                            │
│  [________________________]            │
│  [________________________]            │
│                                        │
│  来源                                  │
│  [○ 手动添加                         ]│
│  [○ 用户举报                         ]│
│  [○ 第三方数据源                     ]│
│  [○ 系统自动检测                     ]│
│  [○ 关联分析                         ]│
│                                        │
│  [✓] 立即开启监测                     │
│                                        │
│         [取消]    [添加]               │
│                                        │
└────────────────────────────────────────┘
```

**验证规则**:

| 字段 | 验证规则 | 错误提示 |
|------|----------|----------|
| 钱包地址 | 必填，有效的地址格式 | "请输入有效的钱包地址" |
| 网络 | 必选 | "请选择网络" |
| 风险等级 | 必选 | "请选择风险等级" |
| 标记原因 | 必填，至少10字 | "请输入标记原因" |

---

### 5. 批量导入

**功能描述**: 批量导入黑名单地址

**用户角色**: Admin

**触发方式**: 点击「批量导入」按钮

**批量导入对话框**:
```
┌────────────────────────────────────────────────────────────────┐
│  批量导入黑名单地址                                        [×]  │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  导入方式                                                      │
│  [○ 文本输入]  [○ 文件上传]                                   │
│                                                                │
│  ── 文本输入 ──                                                │
│                                                                │
│  地址列表（每行一个地址）*                                     │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 0x1234567890abcdef1234567890abcdef12345678              │  │
│  │ 0xabcdefabcdefabcdefabcdefabcdefabcdefabcd              │  │
│  │ T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb                      │  │
│  │ ...                                                      │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  统一设置                                                      │
│                                                                │
│  选择网络 *                                                    │
│  [Ethereum        ▼]                                          │
│                                                                │
│  风险等级 *                                                    │
│  [中风险          ▼]                                          │
│                                                                │
│  标记原因 *                                                    │
│  [批量导入风险地址]                                            │
│                                                                │
│  [✓] 立即开启监测                                              │
│                                                                │
│  解析结果: 已识别 15 个有效地址                                │
│                                                                │
│         [取消]    [导入]                                       │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

**导入说明**:
- 每行一个地址
- 自动去重和格式验证
- 批量导入的地址使用统一的网络、风险等级和原因设置

---

### 6. 地址详情

**功能描述**: 查看黑名单地址的详细信息

**用户角色**: Admin

**触发方式**: 点击地址行的「详情」按钮

**详情抽屉**:
```
┌────────────────────────────────────────────────────────────────┐
│  地址详情                                                  [×]  │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  基本信息                                                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 地址:       0x1234567890abcdef1234...   [复制]           │  │
│  │ 网络:       Ethereum                                     │  │
│  │ 风险等级:   高风险 🔴                                    │  │
│  │ 标记原因:   钓鱼攻击相关地址，已被多个安全机构标记       │  │
│  │ 来源:       第三方数据源                                 │  │
│  │ 添加时间:   2025-12-01 10:30:00                          │  │
│  │ 添加人:     admin@company.com                            │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  监测信息                                                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 监测状态:   监测中 ✓                                     │  │
│  │ 匹配次数:   56 次                                        │  │
│  │ 最后匹配:   2025-12-10 14:30:00                          │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  匹配记录                                                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ │时间              │类型    │关联交易         │用户     │ │  │
│  │ ├───────────────────┼────────┼─────────────────┼─────────┤ │  │
│  │ │2025-12-10 14:30  │提现    │TX00123          │10001    │ │  │
│  │ │2025-12-09 11:20  │充值    │TX00098          │10002    │ │  │
│  │ │2025-12-08 09:15  │提现    │TX00087          │10001    │ │  │
│  │ │...                                                     │ │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                │
│  [编辑]  [删除]  [切换监测]                                    │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

---

### 7. 监测管理

**功能描述**: 切换地址的监测状态

**用户角色**: Admin

**监测功能说明**:
- **监测中**: 系统实时检查与此地址相关的交易，命中时记录并可能阻止交易
- **已停止**: 不再实时监测，但仍保留在黑名单中

**切换监测对话框**:
```
┌────────────────────────────────────────┐
│  切换监测状态                      [×]  │
├────────────────────────────────────────┤
│                                        │
│  确定要 [停止/开启] 监测此地址吗？     │
│                                        │
│  地址:   0x1234...5678                 │
│  网络:   Ethereum                      │
│                                        │
│  [停止监测后]:                         │
│  • 不再实时检查相关交易                │
│  • 地址仍保留在黑名单中                │
│  • 可随时重新开启监测                  │
│                                        │
│         [取消]    [确认]               │
│                                        │
└────────────────────────────────────────┘
```

---

### 8. 删除地址

**功能描述**: 从黑名单中移除地址

**用户角色**: Admin

**触发方式**: 点击地址行的「删除」按钮

**删除确认对话框**:
```
┌────────────────────────────────────────┐
│  删除黑名单地址                    [×]  │
├────────────────────────────────────────┤
│                                        │
│  确定要从黑名单中删除此地址吗？        │
│                                        │
│  地址:     0x1234...5678               │
│  网络:     Ethereum                    │
│  风险等级: 高风险                      │
│  匹配次数: 56                          │
│                                        │
│  ⚠️ 删除后该地址将不再被监测和拦截    │
│                                        │
│  删除原因                              │
│  [________________________]            │
│                                        │
│         [取消]    [确认删除]           │
│                                        │
└────────────────────────────────────────┘
```

---

## UI 组件列表

| 组件名称 | 类型 | 功能说明 |
|----------|------|----------|
| BlacklistStats | Card | 统计概览卡片 |
| BlacklistFilter | Form | 筛选表单 |
| BlacklistTable | Table | 黑名单列表表格 |
| AddAddressModal | Modal | 添加地址对话框 |
| BatchImportModal | Modal | 批量导入对话框 |
| AddressDetailDrawer | Drawer | 地址详情抽屉 |
| DeleteConfirmModal | Modal | 删除确认对话框 |
| MonitorToggleModal | Modal | 监测状态切换对话框 |
| RiskLevelTag | Tag | 风险等级标签 |
| NetworkTag | Tag | 网络标签 |
| CopyButton | Button | 地址复制按钮 |
| MatchHistoryTable | Table | 匹配记录表格 |

---

## 状态与交互

### 页面状态

| 状态 | 描述 | UI 表现 |
|------|------|---------|
| Loading | 列表加载中 | 显示表格骨架屏 |
| Empty | 无数据 | 显示空状态提示 |
| Error | 加载失败 | 显示错误提示和重试按钮 |

### 用户操作响应

| 操作 | 成功响应 | 失败响应 |
|------|----------|----------|
| 添加地址 | Toast "地址已添加"，刷新列表 | Alert 显示错误原因 |
| 批量导入 | Toast "成功导入 X 条"，刷新列表 | Alert 显示导入错误 |
| 删除地址 | Toast "地址已删除"，刷新列表 | Alert 显示错误原因 |
| 切换监测 | Toast "监测状态已更新"，刷新列表 | Alert 显示错误原因 |
| 复制地址 | Toast "已复制到剪贴板" | Toast "复制失败" |

---

## 权限控制

| 功能 | Admin | Finance |
|------|-------|---------|
| 查看黑名单列表 | ✓ | ✓（只读） |
| 添加地址 | ✓ | - |
| 批量导入 | ✓ | - |
| 编辑地址 | ✓ | - |
| 删除地址 | ✓ | - |
| 切换监测状态 | ✓ | - |
| 查看详情 | ✓ | ✓ |
| 导出列表 | ✓ | ✓ |

---

## 数据导出

### 导出格式

支持 Excel (.xlsx) 和 CSV (.csv) 格式

### 导出字段

| 字段 | 说明 |
|------|------|
| 地址 | 完整钱包地址 |
| 网络 | 区块链网络 |
| 风险等级 | 高/中/低 |
| 标记原因 | 添加原因说明 |
| 来源 | 数据来源 |
| 监测状态 | 监测中/已停止 |
| 匹配次数 | 历史命中次数 |
| 添加时间 | 加入黑名单时间 |
| 添加人 | 操作人 |

---

> 返回 [后台管理前端目录](./README.md)
