# 告警中心（Alert Center）

> 返回 [后台管理前端目录](./README.md)

---

## 页面概述

- **页面路径**：`/admin/alerts`
- **权限建议**：`admin/finance/ops`（处理），`auditor`（只读）
- **目标**：把“告警触发 → 通知 → 认领(Ack) → 处理 → 恢复/关闭 → 复盘”做成后台可执行闭环，避免告警分散在各模块里无人跟进。

> 说明：告警规则配置入口在 `wallet_docs/admin-web/settings/07-04-告警设置.md`；Vault 余额/同步的告警治理建议见 `wallet_docs/admin-web/vault/10-告警与通知.md`。

---

## 告警范围（建议统一接入）

### 1) 资金与链上

- Vault 余额阈值（low/critical）
- Vault 同步延迟/失败（blocks_behind/last_sync_at）
- 手续费币不足（gas_info）

### 2) 业务与运营

- 出金审批 SLA 超时（见 `wallet_docs/admin-web/04-提现审批.md`）
- 薪资批次执行异常/暂停/失败率飙升（见 `wallet_docs/admin-web/transfer/04-异常处理与重试.md`）
- 对账差异出现/未处理（见 `wallet_docs/admin-web/05-账本与交易.md` 与 `wallet_docs/admin-web/08-报表与导出.md`）

### 3) 依赖与系统健康

- RPC/故障转移事件（见 `wallet_docs/admin-web/14-系统状态监控.md`）
- Swap Provider/价格源异常（见 `wallet_docs/admin-web/swap/06-告警与审计.md`）

---

## 核心交互（必须）

### 列表（默认视图）

- 筛选：严重级别、状态（open/acknowledged/resolved/closed）、类型、范围（chain/currency/vault）、责任人、时间范围
- 展示字段：`severity`、`type`、`scope`、`trigger_value/threshold`、`triggered_at/last_seen_at`、`status`、`owner/ack_by`
- 行内动作：Ack、指派、静默、查看详情

### 详情抽屉

- 告警原因摘要 + 原始指标（trigger/threshold/gap）
- 关联链接：Vault/批次/出金/对账差异/系统状态监控（按 type 映射）
- 操作记录：Ack/指派/备注/静默/恢复历史（写入审计）

---

## 状态机（建议）

- `open`：新触发且未 Ack
- `acknowledged`：已认领处理（必须备注）
- `resolved`：条件恢复（可自动或人工确认）
- `closed`：归档关闭（可选；可与 resolved 合并）

---

## 降噪与治理（建议）

- Dedup：按 `type + chain_id + currency`（余额类）或 `type + chain_id`（同步类）
- Cooldown：同一 dedup key 在 `cooldown_seconds` 内不重复外部通知，仅更新 `last_seen_at`
- 静默（Mute）：支持按范围（全局/链/币种）与 `mute_until`；静默仍记录事件但不外发

---

## 与审计的关系（必须）

告警中心的以下动作必须产生审计事件（含 reason 与 diff）：

- Ack/指派/静默/解除静默
- 规则变更（由“告警设置”触发）
- 任何“通过告警入口触发的高风险操作”跳转后仍需走 Step-up Auth（见 `wallet_docs/admin-web/99-通用组件库.md`）

---

> 返回 [后台管理前端目录](./README.md)

