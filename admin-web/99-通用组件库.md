# 通用组件库（Admin Web UI Kit）

> 返回 [后台管理前端目录](./README.md)

---

## 目标

为 `wallet_docs/admin-web/*` 中所有页面提供一致的 UI/UX 与交互规范，降低实现分歧与产品漂移风险，确保在“薪资发放 + 资金治理 + 风控合规”的企业后台场景中可用、可审计、可扩展。

---

## 全局规范（跨页面强制）

### 1) 页面骨架

- **PageHeader**：标题 + 面包屑 + 右侧主操作（Primary Action）+ 辅操作（Secondary）+ “最后刷新时间/数据新鲜度”
- **FilterBar**：筛选条件区（支持高级筛选折叠），右侧显示命中数
- **TableToolbar**：导出、列设置、批量操作入口（仅当有选择项时出现）
- **DataTable**：表格 + 分页 + 空状态/错误态/加载态
- **DetailDrawer/DetailModal**：行详情统一用抽屉（首选）或弹窗（短信息）

### 2) 数据新鲜度（Data Freshness）

所有展示“余额/状态/告警/队列”的页面必须显示：

- `last_updated_at`（UI 渲染时间）
- `source_timestamp`（数据源时间，例如 `last_sync_at`）
- `staleness`（fresh / stale / unknown）

当 `staleness = stale` 时：

- 金额与关键指标弱化显示（灰色/斜体/提示图标）
- 禁止执行依赖该数据的高风险操作（例如：基于余额做“免审批判断”），并提示“数据陈旧，请先同步/查看系统状态监控”

### 3) 敏感信息展示（PII / Financial）

- 默认脱敏：手机号/邮箱/地址按规范脱敏展示（见 `wallet_docs/admin-web/98-地址校验规范.md`）
- “查看完整信息”需要权限，并记录审计日志（包含 who/when/why）
- 导出同样受权限控制；导出记录需绑定操作者与 IP（见 `wallet_docs/admin-web/08-报表与导出.md`）

### 4) 高风险操作（Step-up Auth & 双人控制）

对以下操作（示例）统一使用 **StepUpAuthModal**（2FA/二次确认）：

- Vault 余额调整的审批（见 `wallet_docs/admin-web/vault/06-余额调整与审批.md`）
- 紧急模式/审批开关变更（见 `wallet_docs/admin-web/04-提现审批.md`）
- RPC 手动故障转移（见 `wallet_docs/admin-web/14-系统状态监控.md`）
- 黑名单批量导入/删除（见 `wallet_docs/admin-web/12-黑名单地址管理.md`）

对“职责分离（SoD）”强制规则：

- 提议者（Maker）不得自批（Checker）
- UI 必须在操作入口处给出明确提示，并在执行时强校验错误码展示

---

## 组件清单（建议标准）

### A. 导航与布局

- **AppLayout**：Header + Sidebar + Content
- **Breadcrumb**：支持返回上级与快捷跳转
- **SectionCard**：页面内分区容器（标题 + 说明 + 操作区）

### B. 数据展示

- **StatCard / KPIGrid**：关键指标卡片组（支持点击即筛选）
- **StatusTag**：统一状态标签（业务状态/同步状态/审批状态）
- **SeverityTag**：warning/critical（告警分级）
- **CurrencyAmount**：`amount + symbol`（统一小数位与千分位）
- **USDValue**：折算金额（统一“折算”术语）
- **ChainBadge**：network + chain_id
- **AddressDisplay**：脱敏 + 复制 + 校验提示（EVM EIP-55 / Tron Base58Check）
- **TxHashLink**：tx hash + 复制 + 浏览器跳转
- **DiffViewer**：配置变更 before/after（用于审计与配置治理）

### C. 表格与筛选

- **FilterBar**：基础筛选 + “高级筛选”折叠
- **FilterChips**：已选筛选条件标签（可逐个移除）
- **DataTable**：统一列设置、排序、分页、加载/空/错状态
- **RowActions**：行内操作统一收纳为 `更多`（除主动作外）
- **BulkActions**：跨页选择（用于黑名单/批量审批/批次处理）

**表格规范（强制）**：

- 首列：主键/可复制标识（如 `batch_id`/`request_id`）
- 末列：操作列固定右侧（sticky），避免横向滚动丢失操作
- 金额列：右对齐；时间列：固定格式 `YYYY-MM-DD HH:mm:ss`（本地化渲染）

### D. 交互与反馈

- **Skeleton**：加载态骨架屏（避免页面闪烁）
- **EmptyState**：空状态（提供“重置筛选/创建”入口）
- **ErrorState**：错误态（提供“重试/查看状态监控”入口）
- **Toast**：成功/失败提示（失败必须可展开错误码与 trace_id）
- **Banner**：系统级提示（维护模式/紧急模式/数据陈旧）

### E. 审计与合规

- **AuditEventDrawer**：展示 who/when/what/where/target + diff + reason + trace_id
- **ReasonInput**：敏感变更必须填写原因（并写入审计）
- **ExportCenterLink**：所有导出操作统一进入“导出记录”下载（见 `wallet_docs/admin-web/08-报表与导出.md`）

---

## 统一字段与文案约定

- “折算”仅用于价值展示/限额/统计/对账（见 `wallet_docs/admin-web/06-Swap配置.md` 与 `wallet_docs/admin-web/swap/03-费率与折算.md`）
- “出金”覆盖：提现/转账（对外转出）；“内部转账”指 Web2 账本内转（见 `wallet_docs/admin-web/17-内部转账记录.md`）
- 所有错误提示必须包含：用户可理解的描述 + `error_code` +（如有）`trace_id`

---

## 路由与权限呈现（UI 行为）

- 无权限的入口：隐藏（默认）或禁用并提示“需要权限：xxx”（可配置）
- 禁用原因必须可见（Tooltip/InlineHelp）
- 对审批/执行类操作，必须在 UI 上展示“操作者角色/权限要求/是否需要 2FA”

---

> 返回 [后台管理前端目录](./README.md)

