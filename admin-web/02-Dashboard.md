# Dashboard

> 返回 [后台管理前端目录](./README.md)

---

## 页面概述

- **页面路径**: `/admin/dashboard`
- **权限要求**: Admin 或 Finance 角色
- **主要功能**: 展示平台核心数据统计、Vault 余额、告警通知、快捷操作入口

---

## 页面布局

### 整体结构

```
┌──────────────────────────────────────────────────────────────────────────┐
│  Header                                                                   │
├──────────┬───────────────────────────────────────────────────────────────┤
│          │  Breadcrumb: 首页 / Dashboard                                  │
│  Sidebar ├───────────────────────────────────────────────────────────────┤
│          │                                                                │
│          │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌──────────┐ │
│          │  │ 总充值统计   │ │ 总提现统计   │ │ Web2托管余额 │ │ 活跃用户  │ │
│          │  │ ¥1,000,000  │ │ ¥800,000    │ │ ¥500,000    │ │ 1,200    │ │
│          │  │ ↑ 12.5%     │ │ ↓ 5.2%      │ │             │ │ ↑ 8.3%   │ │
│          │  └─────────────┘ └─────────────┘ └─────────────┘ └──────────┘ │
│          │                                                                │
│          │  ┌────────────────────────────────┐ ┌─────────────────────────┐│
│          │  │ Vault 余额                      │ │ 待处理事项             ││
│          │  │                                │ │                        ││
│          │  │ TRX: ████████░░ 80,000 USDT   │ │ • 15 笔提现待审批      ││
│          │  │ ETH: ██████░░░░ 60,000 USDT   │ │ • 2 批薪资待处理       ││
│          │  │ BSC: ████░░░░░░ 40,000 USDT   │ │ • 3 条告警未处理       ││
│          │  │                                │ │                        ││
│          │  │ [查看详情]                     │ │ [查看全部]             ││
│          │  └────────────────────────────────┘ └─────────────────────────┘│
│          │                                                                │
│          │  ┌────────────────────────────────┐ ┌─────────────────────────┐│
│          │  │ 告警通知                        │ │ 链状态                  ││
│          │  │                                │ │                        ││
│          │  │ 🔴 TRX USDT 余额不足           │ │ TRX  ● 正常  Block: 123││
│          │  │    当前: 8,000 / 阈值: 10,000  │ │ ETH  ● 正常  Block: 456││
│          │  │    2 小时前                    │ │ BSC  ● 正常  Block: 789││
│          │  │                                │ │                        ││
│          │  │ 🟡 ETH 热钱包余额偏低           │ │                        ││
│          │  │    当前: 12,000 / 阈值: 20,000 │ │                        ││
│          │  │                                │ │                        ││
│          │  └────────────────────────────────┘ └─────────────────────────┘│
│          │                                                                │
└──────────┴───────────────────────────────────────────────────────────────┘
```

---

## 功能模块

### 1. 统计卡片区域

**功能描述**: 展示核心业务数据的汇总统计，支持时间范围切换

**用户角色**: Admin / Finance

#### 1.1 总充值统计卡片

**UI 组件**:

- **StatisticCard**: 统计卡片组件
- **金额显示**: 大字号显示总金额（USDT 等值）
- **趋势指示**: 与上一周期对比的变化百分比
- **交易笔数**: 次要信息显示

**数据字段**:
| 字段 | 说明 |
|------|------|
| amount_usdt | 总充值金额（USDT 等值）|
| count | 充值笔数 |
| change_percent | 环比变化百分比 |

**交互说明**:

- 鼠标悬停显示详细数据 tooltip
- 点击卡片跳转到交易历史页面（筛选充值类型）

#### 1.2 总提现统计卡片

**UI 组件**: 同上

**数据字段**:
| 字段 | 说明 |
|------|------|
| amount_usdt | 总提现金额（USDT 等值）|
| count | 提现笔数 |
| change_percent | 环比变化百分比 |

**交互说明**:

- 点击卡片跳转到提现审批页面

#### 1.3 Web2 托管余额卡片

**UI 组件**:

- **StatisticCard**: 统计卡片组件
- **资产明细**: 折叠显示各币种余额

**数据字段**:
| 字段 | 说明 |
|------|------|
| total_usdt | 总托管余额（USDT 等值）|
| by_asset | 各币种余额明细数组 |

**交互说明**:

- 点击展开查看各币种明细
- 点击卡片跳转到账本页面

#### 1.4 活跃用户卡片

**UI 组件**: StatisticCard

**数据字段**:
| 字段 | 说明 |
|------|------|
| count | 活跃用户数 |
| change_percent | 环比变化百分比 |

**交互说明**:

- 点击卡片跳转到用户管理页面

---

### 2. 时间范围选择器

**功能描述**: 切换统计数据的时间范围

**UI 组件**:

- **SegmentedControl**: 分段选择器

**选项**:
| 选项 | 值 | 说明 |
|------|-----|------|
| 24 小时 | 24h | 最近 24 小时 |
| 7 天 | 7d | 最近 7 天 |
| 30 天 | 30d | 最近 30 天 |
| 全部 | all | 全部时间 |
| 自定义 | custom | 自定义日期范围 |

**交互说明**:

- 切换后自动刷新所有统计卡片数据
- 自定义选项弹出日期范围选择器
- 数据加载时显示 Loading 状态

---

### 3. Vault 余额面板

**功能描述**: 展示企业 Vault（热钱包）各链的余额状态

**用户角色**: Admin / Finance

**UI 组件**:

- **Card**: 卡片容器
- **ProgressBar**: 余额进度条（相对于阈值）
- **ChainIcon**: 链图标

**布局结构**:

```
┌────────────────────────────────────────────┐
│  Vault 余额                    [刷新] [详情] │
├────────────────────────────────────────────┤
│                                            │
│  🔷 TRX                                    │
│  ━━━━━━━━━━━━━━━━━━━━░░░░░ 80%            │
│  80,000 / 100,000 USDT                    │
│                                            │
│  💎 ETH                                    │
│  ━━━━━━━━━━━━━━░░░░░░░░░░░ 60%            │
│  60,000 / 100,000 USDT                    │
│                                            │
│  🟡 BSC                                    │
│  ━━━━━━━━░░░░░░░░░░░░░░░░░ 40%            │
│  40,000 / 100,000 USDT        ⚠️ 偏低      │
│                                            │
└────────────────────────────────────────────┘
```

**进度条颜色规则**:
| 余额比例 | 颜色 | 说明 |
|----------|------|------|
| > 50% | 绿色 | 健康 |
| 20% - 50% | 黄色 | 偏低 |
| < 20% | 红色 | 告警 |

**交互说明**:

- 点击「刷新」按钮重新获取余额
- 点击「详情」跳转到 Vault 管理页面
- 点击单个链查看该链的详细余额

---

### 4. 待处理事项面板

**功能描述**: 汇总展示需要处理的工作项

**用户角色**: Admin / Finance（根据权限显示不同项目）

**UI 组件**:

- **Card**: 卡片容器
- **List**: 列表组件
- **Badge**: 数量徽章

**事项列表**:
| 事项 | 跳转目标 | 显示角色 |
|------|----------|----------|
| X 笔提现待审批 | `/admin/withdrawals?status=pending` | Admin, Finance |
| X 批薪资待处理 | `/admin/payroll?status=pending` | Admin, Finance |
| X 条告警未处理 | 告警详情弹窗 | Admin, Finance |
| X 个用户待审核 | `/admin/users?status=pending` | Admin |

**交互说明**:

- 点击事项跳转到对应页面
- 无待处理事项时显示空状态

---

### 5. 告警通知面板

**功能描述**: 展示当前活跃的系统告警

**用户角色**: Admin / Finance

**UI 组件**:

- **Card**: 卡片容器
- **AlertItem**: 告警项组件
- **AlertLevelIcon**: 告警级别图标

**告警级别**:
| 级别 | 图标 | 颜色 | 说明 |
|------|------|------|------|
| CRITICAL | 🔴 | 红色 | 紧急告警，需立即处理 |
| WARNING | 🟡 | 黄色 | 警告，需关注 |
| INFO | 🔵 | 蓝色 | 信息提示 |

**告警项结构**:

```
┌─────────────────────────────────────────────┐
│ 🔴 TRX USDT 余额不足                [处理]   │
│    当前: 8,000 USDT / 阈值: 10,000 USDT     │
│    2 小时前                                 │
└─────────────────────────────────────────────┘
```

**交互说明**:

- 点击「处理」按钮弹出处理对话框
- 支持标记为已处理
- 最多显示 5 条，更多点击「查看全部」

---

### 6. 链状态面板

**功能描述**: 展示各区块链网络的连接状态

**用户角色**: Admin / Finance

**UI 组件**:

- **Card**: 卡片容器
- **StatusIndicator**: 状态指示器
- **ChainStatusRow**: 链状态行

**状态指示**:
| 状态 | 指示器 | 说明 |
|------|--------|------|
| 正常 | ● 绿色 | 节点连接正常 |
| 延迟 | ● 黄色 | 节点同步延迟 |
| 异常 | ● 红色 | 节点连接失败 |

**显示信息**:
| 字段 | 说明 |
|------|------|
| 链名称 | TRX / ETH / BSC |
| 状态 | 正常 / 延迟 / 异常 |
| 最新区块 | 当前同步的区块高度 |
| 延迟 | 与最新区块的差距（如有） |

**交互说明**:

- 鼠标悬停显示详细状态信息
- 异常状态点击可查看错误详情

---

## UI 组件列表

| 组件名称          | 类型             | 功能说明         |
| ----------------- | ---------------- | ---------------- |
| StatisticCard     | Card             | 统计数据展示卡片 |
| TimeRangeSelector | SegmentedControl | 时间范围选择器   |
| VaultBalancePanel | Card             | Vault 余额面板   |
| TodoPanel         | Card             | 待处理事项面板   |
| AlertPanel        | Card             | 告警通知面板     |
| ChainStatusPanel  | Card             | 链状态面板       |
| ProgressBar       | Progress         | 余额进度条       |
| StatusIndicator   | Badge            | 状态指示器       |
| TrendIndicator    | Custom           | 趋势指示器（↑↓） |

---

## 状态与交互

### 页面状态

| 状态       | 描述         | UI 表现                    |
| ---------- | ------------ | -------------------------- |
| Loading    | 页面初始加载 | 显示骨架屏                 |
| Loaded     | 数据加载完成 | 显示完整内容               |
| Error      | 数据加载失败 | 显示错误提示，提供重试按钮 |
| Refreshing | 刷新数据中   | 卡片显示 Loading 遮罩      |

### 数据刷新机制

| 数据类型   | 刷新策略                    |
| ---------- | --------------------------- |
| 统计数据   | 缓存 1 分钟，手动可强制刷新 |
| Vault 余额 | 实时查询，10 秒自动刷新     |
| 告警通知   | WebSocket 推送，实时更新    |
| 链状态     | 15 秒自动刷新               |

### 自动刷新配置

- 页面可见时启动自动刷新
- 页面隐藏时暂停自动刷新
- 支持手动刷新按钮

---

## 数据可视化

### 趋势指示器

```
↑ 12.5%  (绿色，正增长)
↓ 5.2%   (红色，负增长)
—        (灰色，无变化)
```

### 进度条颜色

```css
/* 健康 */
.progress-healthy {
  background: #52c41a;
}

/* 警告 */
.progress-warning {
  background: #faad14;
}

/* 危险 */
.progress-danger {
  background: #ff4d4f;
}
```

---

## 快捷操作

Dashboard 页面提供以下快捷入口：

| 操作       | 入口位置     | 跳转目标                            |
| ---------- | ------------ | ----------------------------------- |
| 审批提现   | 待处理事项   | `/admin/withdrawals?status=pending` |
| 处理薪资   | 待处理事项   | `/admin/payroll?status=pending`     |
| 查看用户   | 活跃用户卡片 | `/admin/users`                      |
| 管理 Vault | Vault 面板   | `/admin/ledger/vault`               |
| 处理告警   | 告警面板     | 告警详情弹窗                        |

---

> 返回 [后台管理前端目录](./README.md)
