# 系统配置

> 返回 [Admin Web 文档](./README.md) · 上至 [系统设置索引](./07-系统设置.md)

---

## 范围

本文档涵盖影响平台级运行时行为的配置，包括：

- 全局设置（名称、时区、维护标志）
- 安全态势默认值（会话超时、锁定策略、密码有效期）
- 令牌与链基础设施映射（Token/Chain 配置）
- 全局提现白名单（平台受信任地址）
- 导出保留策略（管理员生成的导出）

---

## 权责边界：币种管理 vs 令牌/链配置

- 币种管理：`wallet_docs/admin-web/13-币种管理.md`
  - 业务启用：Web2/Web3 充值/提现/转账/兑换功能开关
  - 上线/下线、显示名称、图标
- 令牌/链配置（本节）
  - 基础设施映射：合约地址、精度、支持的链
  - RPC 端点、确认数、浏览器 URL、健康/故障转移策略

关键规则：基础设施更改不应隐式启用业务功能；业务上线不应静默更改链上基础设施配置。

---

## 令牌与链配置 (UI)

- **入口**: `/admin/settings` → Token & Chain Config (令牌与链配置)
- **访问**: 管理员（推荐）；由于风险，应将写入操作限制给更窄的角色。

### 令牌配置

| 列 | 字段 | 备注 |
|---|---|---|
| 令牌 | `symbol` | 例如，`USDT` |
| 名称 | `name` | 显示名称 |
| 链 | `chains[]` | 启用的链 |
| 合约 | `contract` | 每个链的合约地址 |
| 精度 | `decimals` | 每个链的精度 |
| 状态 | `enabled` | 启用 / 禁用 |

### 链配置

| 列 | 字段 | 备注 |
|---|---|---|
| 链名称 | `name` | 例如，`TRX`、`ETH`、`BSC` |
| 链 ID | `chain_id` | 针对 EVM 链 |
| RPC URL | `rpc_url` | 主用 |
| 备用 RPC | `backup_rpc` | 次要 |
| 浏览器 | `explorer` | 基础 URL |
| 确认数 | `confirmations` | 风险参数 |
| 状态 | `status` | 启用 / 禁用 |

推荐的验证：

- 对于托管的端点，RPC URL 必须是 TLS (`https`)。
- 根据链类型验证合约地址格式。
- 确认数针对每条链有安全的默认值。

---

## 全局提现白名单

**目的**: 维护平台受信任的接收方地址（例如，公司金库钱包、合作伙伴）。发往这些目的地的提现可以遵循宽松的审批策略，同时仍可审计。

**字段**（推荐的最小值）：

| 字段 | 类型 | 备注 |
|---|---|---|
| 地址 | string | 按链规范化 |
| 网络/链 | enum | 必须与支持的链匹配 |
| 标签/备注 | string | 人类可读的标识符 |
| 备注 | string | 可选 |
| 状态 | enum | 启用 / 禁用 |
| 创建者/时间 | string / datetime | 审计 |

**规则**:

- 匹配优先级：全局白名单优先，然后是用户关联的白名单（如果有）。
- 白名单的使用情况必须在审批 UI 和审计日志中可见。
- 支持导入/导出；每次导入都必须产生一条审计记录。

---

## 导出保留策略

适用于报告中心和所有列表页面的导出。

| 设置 | 默认值 | 备注 |
|---|---:|---|
| 导出文件保留期（天） | 7 | 自动删除过期的导出文件 |
| 单次导出最大行数 | 100,000 | 保护系统稳定性 |
| 并发导出任务数 | - | 速率限制 / 队列 |
| 队列长度 | - | 反压 |

推荐的安全要求：

- 导出文件必须受访问控制（与 UI 数据相同的授权）。
- 下载记录必须与用户身份和 IP 关联。

---

## API 映射（当前）

参见 `wallet_docs/admin-api/srds/07-系统设置.md`:

- `GET /api/v1/admin/settings/config`
- `PUT /api/v1/admin/settings/config`（需要 `reason`）

---

> 返回 [Admin Web 文档](./README.md)