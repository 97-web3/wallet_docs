# 审计日志

> 返回 [Admin Web Docs](./README.md) · 上一级 [系统设置索引](./07-系统设置.md)

---

## 页面概览

- **入口**: `/admin/settings` → 审计日志
- **目标**: 为安全、调查和合规性 (SOC 2 / ISO 27001) 提供完整、防篡改的管理员操作记录。

---

## 审计事件要求 (企业基线)

每个审计事件应包含：

- 谁 (Who): 管理员身份 (`admin_id`, `username`, `name`)
- 何时 (When): UTC 时间戳 (存储) + 本地化渲染 (UI)
- 什么 (What): 规范化操作代码 (例如 `config.update`, `admin.disable`)
- 何地 (Where): `ip`, `user_agent`, 可选地理位置
- 目标 (Target): `target_type`, `target_id`, 可选的人类可读名称
- 变更 (Change): 配置和权限变更的 before/after 对比
- 上下文 (Context): 敏感操作的 `reason`；多步骤流程的相关联 ID

---

## UI / UX 规范 (摘自旧文档)

### 审计日志列表

**筛选器**:

| 字段 | 组件 | 备注 |
|---|---|---|
| 日期范围 | RangePicker | 操作时间 |
| 操作人 | Select | 管理员用户 |
| 操作类型 | Select | 用户/审批/配置/等 |
| 目标 | Input | 目标 ID 搜索 |

**表格列**:

| 列名 | 字段 | 备注 |
|---|---|---|
| 时间 | `created_at` | 操作时间戳 |
| 操作人 | `operator` | 用户身份 |
| 操作 | `action` | 规范化代码 |
| 描述 | `description` | 人类可读描述 |
| 目标类型 | `target_type` | 例如 `user`, `withdraw`, `config`, `admin` |
| 目标 ID | `target_id` | 标识符 |
| IP | `ip` | 客户端 IP |
| 详情 | - | 抽屉/模态框 |

### 保留策略

| 设置 | 默认值 | 备注 |
|---|---:|---|
| 在线保留期 | 1 年 | UI 中可搜索 |
| 归档保留期 | 3 年 | 可根据请求恢复 |
| 归档周期 | 每月 | 自动化归档 |
| 导出格式 | Excel/CSV | 受控导出 |

---

## API 映射 (当前)

参见 `wallet_docs/admin-api/srds/07-系统设置.md`:

- `GET /api/v1/admin/settings/audit-logs`

---

> 返回 [Admin Web Docs](./README.md)