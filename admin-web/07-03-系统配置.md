# System Configuration (系统配置)

> Back to [Admin Web Docs](./README.md) · Up to [System Settings Index](./07-系统设置.md)

---

## Scope

This document covers configuration that impacts platform-wide runtime behavior, including:

- Global settings (name, timezone, maintenance flags)
- Security posture defaults (session timeout, lockout policy, password expiry)
- Token & chain infrastructure mapping (Token/Chain Config)
- Global withdrawal allowlist (platform trusted addresses)
- Export retention policy (admin-generated exports)

---

## Ownership Boundary: Currency Management vs Token/Chain Config

- Currency Management: `wallet_docs/admin-web/13-币种管理.md`
  - Business enablement: Web2/Web3 deposit/withdraw/transfer/Swap feature toggles
  - Listing/unlisting, display name, icons
- Token/Chain Config (this section)
  - Infrastructure mapping: contract address, decimals, supported chains
  - RPC endpoints, confirmations, explorer URL, health/failover strategy

Key rule: infrastructure changes must not implicitly enable business features; business listing must not silently change on-chain infra config.

---

## Token & Chain Config (UI)

- **Entry**: `/admin/settings` → Token & Chain Config (Token 与链配置)
- **Access**: Admin (recommended); restrict write operations to a narrower role due to risk.

### Token Config

| Column | Field | Notes |
|---|---|---|
| Token | `symbol` | E.g., `USDT` |
| Name | `name` | Display name |
| Chains | `chains[]` | Enabled chains |
| Contract | `contract` | Per-chain contract address |
| Decimals | `decimals` | Per-chain decimals |
| Status | `enabled` | Enabled / Disabled |

### Chain Config

| Column | Field | Notes |
|---|---|---|
| Chain Name | `name` | E.g., `TRX`, `ETH`, `BSC` |
| Chain ID | `chain_id` | For EVM chains |
| RPC URL | `rpc_url` | Primary |
| Backup RPC | `backup_rpc` | Secondary |
| Explorer | `explorer` | Base URL |
| Confirmations | `confirmations` | Risk parameter |
| Status | `status` | Enabled / Disabled |

Recommended validations:

- RPC URL must be TLS (`https`) for hosted endpoints.
- Contract address format validated per chain type.
- Confirmation counts have safe defaults per chain.

---

## Global Withdrawal Allowlist (全局提现白名单)

**Purpose**: Maintain platform-trusted recipient addresses (e.g., corporate treasury wallets, partners). Withdrawals to these destinations may follow a relaxed approval strategy, while still being auditable.

**Fields** (recommended minimum):

| Field | Type | Notes |
|---|---|---|
| Address | string | Normalized per chain |
| Network/Chain | enum | Must match supported chains |
| Label/Tag | string | Human-friendly identifier |
| Notes | string | Optional |
| Status | enum | Enabled / Disabled |
| Created By/At | string / datetime | Audit |

**Rules**:

- Matching priority: global allowlist first, then user-associated allowlist (if any).
- Allowlist usage must be visible in approval UI and in audit logs.
- Import/export supported; every import must produce an audit entry.

---

## Export Retention Policy (导出与保留策略)

Applies to Reports Center and all list-page exports.

| Setting | Default | Notes |
|---|---:|---|
| Export file retention (days) | 7 | Delete expired exports automatically |
| Max rows per export | 100,000 | Protects system stability |
| Concurrent export jobs | - | Rate limiting / queue |
| Queue length | - | Backpressure |

Recommended security requirements:

- Export files must be access-controlled (same authorization as UI data).
- Downloads must be logged and linked to user identity and IP.

---

## API Mapping (Current)

See `wallet_docs/admin-api/srds/07-系统设置.md`:

- `GET /api/v1/admin/settings/config`
- `PUT /api/v1/admin/settings/config` (requires a `reason`)

---

> Back to [Admin Web Docs](./README.md)
