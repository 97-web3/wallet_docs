# 系统状态监控（Network Status）

> 返回 [后台管理前端目录](./README.md)

---

## 页面概述

- 页面路径: `/admin/status`
- 权限要求: Admin 或 Finance（只读）
- 主要功能: 区块链网络/RPC 节点健康、区块高度延迟、失败率与延迟、自动/手动故障转移、第三方 API 健康、告警联动

---

## 页面布局

```
┌──────────────────────────────────────────────────────────────────────────┐
│ Header                                                                    │
├──────────┬───────────────────────────────────────────────────────────────┤
│          │  系统状态监控                                                  │
│ Sidebar  ├───────────────────────────────────────────────────────────────┤
│          │                                                               │
│          │  ┌─────────────────────────────────────────────────────────┐  │
│          │  │ 概览卡片                                                 │  │
│          │  │ [活跃网络: 4] [告警: 1] [最近切换: 0] [API 健康: 正常]  │  │
│          │  └─────────────────────────────────────────────────────────┘  │
│          │                                                               │
│          │  ┌─────────────────────────────────────────────────────────┐  │
│          │  │ 网络健康（每链一张卡片）                                 │  │
│          │  │  ETH | 高度: 21345678 | 延迟: 120ms | 错误率: 0.2%       │  │
│          │  │  主 RPC: https://mainnet…     备用: https://backup…      │  │
│          │  │  同步落后: 0（与参考源对比）   状态: 🟢 正常             │  │
│          │  │  [测试连接] [查看日志] [手动切换到备用]                  │  │
│          │  └─────────────────────────────────────────────────────────┘  │
│          │                                                               │
│          │  ┌─────────────────────────────────────────────────────────┐  │
│          │  │ 第三方 API 健康（DEX/汇率/风控）                          │  │
│          │  │  1inch: 🟢 正常   Uniswap: 🟢 正常   Pancake: 🔴 异常     │  │
│          │  │  [重新检测] [查看历史]                                    │  │
│          │  └─────────────────────────────────────────────────────────┘  │
│          │                                                               │
│          │  ┌─────────────────────────────────────────────────────────┐  │
│          │  │ 最近切换记录                                              │  │
│          │  │  时间 | 链 | 从 | 到 | 原因 | 操作人                      │  │
│          │  └─────────────────────────────────────────────────────────┘  │
│          │                                                               │
└──────────┴───────────────────────────────────────────────────────────────┘
```

---

## 功能模块

### 1. 网络健康监控

- 指标: 当前高度、与参考源高度差、延迟、错误率、过去 5 分钟成功率
- 动作: 测试连接、查看最近错误、手动切换到备用 RPC
- 策略: 自动切换阈值（错误率/延迟/高度落后）来源于系统设置

### 2. 故障转移

- 自动故障转移: 连续 N 次失败或高度落后超过阈值自动切换
- 手动故障转移: 需要 Admin 确认并填写原因，记录审计日志
- 冷热恢复: 主节点恢复后可手动/自动回切（可配置）

### 3. 第三方 API 健康

- 聚合器/DEX/汇率/风控等第三方 API 的连通性与响应时间
- 与 [Swap 配置](./06-Swap配置.md) 的“第三方 API 状态”一致显示

### 4. 告警联动

- 依赖 [系统设置 → 告警设置](./07-04-告警设置.md) 的告警规则
- 触发项: 高度落后、错误率、延迟超阈值、故障转移发生

---

## 权限控制

| 功能 | Admin | Finance |
|------|-------|---------|
| 查看网络状态 | ✓ | ✓ |
| 手动故障转移 | ✓ | - |
| 查看切换记录 | ✓ | ✓ |

---

## 审计与记录

- 记录故障转移的发起方式（自动/手动）、操作者、原因、前后节点、时间
- 保留 1 年在线查询，超期归档

---

> 返回 [后台管理前端目录](./README.md)
