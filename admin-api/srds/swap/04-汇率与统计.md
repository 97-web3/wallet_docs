# Swap 配置 - 汇率与统计

> 返回 [Swap 配置索引](../06-Swap配置.md)

---

## F-ADMIN-044: 获取汇率配置

**描述**: 获取汇率来源和更新配置。

**HTTP 方法**: `GET /api/v1/admin/swap/rates/config`

**响应 Schema**:
```json
{
  "success": true,
  "data": {
    "primary_source": "aggregated",
    "sources": [
      {
        "id": "coingecko",
        "name": "CoinGecko",
        "enabled": true,
        "priority": 1,
        "weight": 0.4,
        "api_status": "healthy",
        "rate_limit": "50/min",
        "last_update": "2025-12-10T09:59:00Z"
      },
      {
        "id": "coinmarketcap",
        "name": "CoinMarketCap",
        "enabled": true,
        "priority": 2,
        "weight": 0.4,
        "api_status": "healthy",
        "rate_limit": "30/min",
        "last_update": "2025-12-10T09:59:00Z"
      },
      {
        "id": "binance",
        "name": "Binance",
        "enabled": true,
        "priority": 3,
        "weight": 0.2,
        "api_status": "healthy",
        "rate_limit": "1200/min",
        "last_update": "2025-12-10T09:59:30Z"
      }
    ],
    "update_interval_seconds": 30,
    "deviation_threshold": "1.0%",
    "fallback_behavior": "use_cache"
  }
}
```

**权限要求**:
- 角色: Admin

---

## F-ADMIN-045: 获取 Swap 历史统计

**描述**: 获取 Swap 交易的历史统计数据。

**HTTP 方法**: `GET /api/v1/admin/swap/statistics`

**请求参数**:
```
?period=30d                  // 时间范围: 7d, 30d, 90d, 1y
&group_by=day                // 分组: hour, day, week, month
&network=                    // 网络筛选
```

**响应 Schema**:
```json
{
  "success": true,
  "data": {
    "period": "30d",
    "summary": {
      "total_swaps": 12580,
      "total_volume_usd": "8500000.00",
      "total_fee_usd": "21250.00",
      "avg_swap_amount_usd": "675.60",
      "success_rate": "99.2%",
      "unique_users": 856
    },
    "by_network": [
      {
        "network": "Ethereum",
        "swap_count": 5200,
        "volume_usd": "4500000.00",
        "fee_usd": "11250.00"
      },
      {
        "network": "BSC",
        "swap_count": 4800,
        "volume_usd": "2800000.00",
        "fee_usd": "7000.00"
      },
      {
        "network": "Tron",
        "swap_count": 2580,
        "volume_usd": "1200000.00",
        "fee_usd": "3000.00"
      }
    ],
    "by_pair": [
      {
        "pair": "ETH/USDT",
        "swap_count": 3500,
        "volume_usd": "3200000.00"
      },
      {
        "pair": "BNB/USDT",
        "swap_count": 2800,
        "volume_usd": "1800000.00"
      }
    ],
    "trend": [
      {
        "date": "2025-12-01",
        "swap_count": 450,
        "volume_usd": "285000.00",
        "avg_slippage": "0.48%"
      }
    ]
  }
}
```

**权限要求**:
- 角色: Admin, Finance

---

## DEX 提供商状态枚举

| 状态 | 代码 | 描述 |
|------|------|------|
| 健康 | healthy | 正常运行 |
| 降级 | degraded | 部分功能受限 |
| 不可用 | unavailable | 服务不可用 |
| 维护中 | maintenance | 计划维护 |

## 价格来源枚举

| 来源 | 代码 | 描述 |
|------|------|------|
| 聚合 | aggregated | 多来源聚合 |
| CoinGecko | coingecko | CoinGecko API |
| CoinMarketCap | coinmarketcap | CoinMarketCap API |
| Binance | binance | Binance 行情 |
| DEX | dex | 链上 DEX 价格 |

---

> 返回 [Swap 配置索引](../06-Swap配置.md)

