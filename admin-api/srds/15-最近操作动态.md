# 最近操作动态

> 返回 [Admin 服务目录](./README.md)
>
> 关联页面：`/admin/activities`（Admin Web 文档见 `wallet_docs/admin-web/15-最近操作动态.md`）

---

该页面是 Dashboard「最近活动」卡片的扩展版，提供更完整的历史记录与筛选/分页能力。

## F-ADMIN-138: 获取最近操作动态列表

**描述**: 获取系统最近操作动态列表（可分页、可筛选），用于“最近操作动态”页面与其他模块的操作追踪视图。

**HTTP 方法**: `GET /api/v1/admin/activities`

**请求参数**:
```
?page=1
&page_size=20
&type=                       // transfer, withdrawal, user, vault, settings, report, system
&status=                     // success, error, info
&keyword=                    // 标题/详情/用户ID/批次号/操作者/IP 等模糊搜索
&operator=                   // 操作人（admin_id/用户名/姓名）
&ip=
&date_from=
&date_to=
```

**响应 Schema**:
```json
{
  "success": true,
  "data": {
    "activities": [
      {
        "id": "act-20251214-0001",
        "type": "transfer",
        "status": "success",
        "title": "转账批次执行完成",
        "detail": "春节红包批次，成功发放 115 人",
        "biz_type": "transfer_batch",
        "biz_id": "batch-20251214-001",
        "operated_at": "2025-12-14T10:23:11Z",
        "operator": {
          "admin_id": "admin-10001",
          "name": "张三",
          "role": "finance"
        },
        "ip": "203.0.113.10",
        "user_agent": "Mozilla/5.0 (...)"
      }
    ]
  },
  "pagination": {
    "page": 1,
    "page_size": 20,
    "total": 128,
    "total_pages": 7
  }
}
```

**权限要求**:
- 角色: Admin, Finance（可按组织策略扩展）

---

## 与 Dashboard 最近活动的关系（对齐说明）

Dashboard 目前已有简化接口：

- `GET /api/v1/admin/dashboard/recent-activities`（`F-ADMIN-011`，见 `wallet_docs/admin-api/srds/02-Dashboard.md`）

建议实现层复用同一数据源：

- Dashboard 用 `limit` 拉取最近 N 条；
- 本接口提供筛选/分页能力，并在字段层与 Dashboard 对齐（至少保持 `id/type/description/operator/created_at` 的兼容映射）。

---

> 返回 [Admin 服务目录](./README.md)

