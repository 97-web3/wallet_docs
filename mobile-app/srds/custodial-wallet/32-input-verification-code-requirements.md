# 输入验证码登录 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-032 |
| 页面名称 | 输入验证码登录 |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
输入验证码登录页面是用户通过手机号和短信验证码进行身份验证的登录方式。页面提供手机号输入框、验证码输入框和发送验证码按钮，适用于快捷登录或密码登录的备选方案。

---

## 2. UI组件

### 2.1 布局概述
页面采用垂直表单布局，深色背景主题。顶部显示返回按钮和标题，中间是手机号和验证码输入区域，底部有登录按钮和切换登录方式链接。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头，返回上一页 | 顶部左侧 |
| 页面标题 | 标签 | "验证码登录" | 顶部中央 |
| 手机号输入框 | 文本输入 | 带国际区号，显示手机图标 | 表单区域上部 |
| 国际区号选择 | 下拉选择 | 显示"+86"等区号 | 手机号输入框内 |
| 验证码输入框 | 文本输入 | 4-6位数字验证码输入 | 手机号下方 |
| 发送验证码按钮 | 文字按钮 | "获取验证码"/"重新发送(60s)" | 验证码框右侧 |
| 登录按钮 | 主按钮 | 绿色圆角按钮，"登录" | 表单底部 |
| 密码登录链接 | 文字链接 | "使用密码登录" | 登录按钮下方 |

---

## 3. 功能需求

### FR-032-01: 输入手机号

| 字段 | 内容 |
|------|------|
| **ID** | FR-032-01 |
| **描述** | 用户可以输入接收验证码的手机号 |
| **验收标准** | 1. **假设** 用户点击手机号输入框，**当** 开始输入，**则** 弹出数字键盘<br>2. **假设** 用户输入手机号，**当** 格式正确，**则** 获取验证码按钮可点击 |
| **优先级** | 必须 |

### FR-032-02: 发送验证码

| 字段 | 内容 |
|------|------|
| **ID** | FR-032-02 |
| **描述** | 用户可以请求发送短信验证码 |
| **验收标准** | 1. **假设** 手机号有效，**当** 点击"获取验证码"，**则** 发送验证码到手机<br>2. **假设** 验证码发送成功，**当** 按钮状态变化，**则** 显示倒计时"重新发送(60s)"<br>3. **假设** 倒计时结束，**当** 计时为0，**则** 按钮恢复为"获取验证码" |
| **优先级** | 必须 |

### FR-032-03: 输入验证码

| 字段 | 内容 |
|------|------|
| **ID** | FR-032-03 |
| **描述** | 用户可以输入收到的短信验证码 |
| **验收标准** | 1. **假设** 用户收到验证码，**当** 输入验证码，**则** 显示输入的数字<br>2. **假设** 输入完整验证码，**当** 位数足够，**则** 登录按钮激活 |
| **优先级** | 必须 |

### FR-032-04: 验证码登录

| 字段 | 内容 |
|------|------|
| **ID** | FR-032-04 |
| **描述** | 用户点击登录按钮后，系统验证手机号和验证码 |
| **验收标准** | 1. **假设** 用户填写完成，**当** 点击登录，**则** 提交验证请求<br>2. **假设** 验证码正确，**当** 服务器确认，**则** 登录成功跳转主页<br>3. **假设** 验证码错误，**当** 服务器拒绝，**则** 显示错误提示 |
| **优先级** | 必须 |

### FR-032-05: 切换密码登录

| 字段 | 内容 |
|------|------|
| **ID** | FR-032-05 |
| **描述** | 用户可以切换到密码登录方式 |
| **验收标准** | 1. **假设** 用户想使用密码登录，**当** 点击"使用密码登录"，**则** 跳转密码登录页面 |
| **优先级** | 应该 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户进入验证码登录页面
2. 输入手机号
3. 点击获取验证码
4. 等待短信验证码
5. 输入收到的验证码
6. 点击登录
7. 验证成功进入主页

### 4.2 导航流程
- **来源页面**: 登录页面、密码登录页面
- **目标页面**:
  - 登录成功: 钱包主页
  - 密码登录: 密码登录页面
  - 返回: 上一页面

### 4.3 手势与交互
| 手势 | 行为 |
|------|------|
| 点击获取验证码 | 发送短信，启动倒计时 |
| 点击登录 | 提交验证 |
| 点击密码登录 | 切换登录方式 |

---

## 5. 数据需求

### 5.1 显示数据
| 数据字段 | 类型 | 来源 | 格式 |
|----------|------|------|------|
| 倒计时 | Number | 本地计时 | 秒数 |
| 国际区号 | String | 系统配置 | +86等 |

### 5.2 输入数据
| 输入字段 | 类型 | 验证规则 | 必填 |
|----------|------|----------|------|
| 手机号 | String | 有效手机号格式 | 是 |
| 验证码 | String | 4-6位数字 | 是 |

---

## 6. 验证规则

### 6.1 验证码规则
- 验证码长度：4-6位数字
- 有效期：5分钟
- 发送间隔：60秒

### 6.2 错误处理
| 错误场景 | 处理方式 |
|----------|----------|
| 验证码错误 | 显示"验证码错误" |
| 验证码过期 | 显示"验证码已过期" |
| 发送频繁 | 显示"操作过于频繁，请稍后再试" |

---

## 7. 技术考虑

### 7.1 验证码发送
- 调用短信服务API
- 处理发送失败情况
- 本地倒计时管理

### 7.2 安全要求
- 验证码加密传输
- 服务端验证码校验
- 防止暴力尝试

---

## 8. 验收标准汇总

- [ ] 手机号输入框正常工作
- [ ] 获取验证码按钮发送短信
- [ ] 发送后显示60秒倒计时
- [ ] 倒计时结束可重新发送
- [ ] 验证码输入框正常工作
- [ ] 登录按钮正确提交请求
- [ ] 验证成功跳转主页
- [ ] 验证失败显示错误
- [ ] 可切换到密码登录
