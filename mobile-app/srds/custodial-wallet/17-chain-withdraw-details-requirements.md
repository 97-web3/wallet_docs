# 链上提币详情页面 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-017 |
| 页面名称 | 链上提币详情页面 |
| 版本 | 1.1 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
用户输入提币地址和数量，查看费用明细和重要提示，完成链上提币操作。

---

## 2. UI组件

### 2.1 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头 | 左上角 |
| 页面标题 | 文本标签 | "转账" | 标题栏中央 |
| 提币地址标题 | 文本标签 | "提币地址" | 上部 |
| 地址输入框 | 文本输入框 | 占位符"请输入＞或粘贴提币地址"，带粘贴和扫码图标 | 地址标题下方 |
| 提币数量标题 | 文本标签 | "提币数量" | 地址输入框下方左侧 |
| 可用余额 | 文本标签 | "可用: 96,666.00 USDT" | 提币数量标题右侧 |
| 数量输入框 | 数字输入框 | 占位符"请输入＞"，右侧显示"USDT"和"全部"按钮 | 可用余额下方 |
| 最小提现标签 | 文本标签 | "最小提现: 10 USDT"灰色 | 数量输入框下方 |
| 费用明细 | 卡片区域 | "费用明细"标题 | 中部 |
| 提币数量行 | 信息行 | "提币数量: 1222.05 USDT" | 费用明细内 |
| 手续费行 | 信息行 | "手续费: 1 USDT" | 提币数量行下方 |
| 实际到账行 | 信息行 | "实际到账: 1221.05 USDT"黄绿色 | 手续费行下方 |
| 重要提示卡片 | 提示卡片 | 带警告图标，深色背景 | 费用明细下方 |
| 提示内容 | 文本标签 | 多行说明文字 | 提示卡片内 |
| 最小提币金额 | 文本标签 | "最小提币金额: 10 USDT"黄绿色 | 提示最后一行 |
| 下一步按钮 | 主按钮 | "下一步"，深色背景 | 底部 |

---

## 3. 功能需求

### FR-CW-017-01: 提币地址输入

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-01 |
| **描述** | 用户输入或选择提币地址 |
| **验收标准** | 1. **假设** 用户手动输入地址, **当** 输入, **则** 实时验证地址格式<br>2. **假设** 用户点击粘贴图标, **当** 触发, **则** 自动粘贴剪贴板内容<br>3. **假设** 用户点击扫码图标, **当** 触发, **则** 打开二维码扫描器<br>4. **假设** 用户点击地址输入框区域, **当** 触发, **则** 可选择打开收款方列表 |
| **优先级** | 必须 |

### FR-CW-017-02: 提币数量输入

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-02 |
| **描述** | 用户输入提币数量 |
| **验收标准** | 1. **假设** 用户输入数量, **当** 输入, **则** 实时验证是否超过可用余额<br>2. **假设** 用户点击"全部", **当** 触发, **则** 自动填入（可用余额-手续费）<br>3. **假设** 输入数量低于最小提现额, **当** 验证, **则** 显示错误提示 |
| **优先级** | 必须 |

### FR-CW-017-03: 费用明细计算

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-03 |
| **描述** | 实时计算并显示费用明细 |
| **验收标准** | 1. **假设** 用户输入数量, **当** 数量改变, **则** 实时更新提币数量、手续费、实际到账<br>2. **假设** 链上转账, **当** 显示手续费, **则** 显示实际手续费金额（如"1 USDT"）<br>3. **假设** 实际到账, **当** 计算, **则** 实际到账 = 提币数量 - 手续费 |
| **优先级** | 必须 |

### FR-CW-017-04: 地址验证

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-04 |
| **描述** | 验证提币地址的有效性 |
| **验收标准** | 1. **假设** 输入的地址格式错误, **当** 验证, **则** 显示红色"地址错误"提示<br>2. **假设** 地址格式正确, **当** 验证通过, **则** 清除错误提示<br>3. **假设** 地址不支持当前网络, **当** 验证, **则** 显示"地址不支持该网络"提示 |
| **优先级** | 必须 |

### FR-CW-017-05: 表单验证

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-05 |
| **描述** | 验证表单输入的完整性和有效性 |
| **验收标准** | 1. **假设** 提币地址为空, **当** 点击下一步, **则** 提示"请输入提币地址"<br>2. **假设** 提币数量为空, **当** 点击下一步, **则** 提示"请输入提币数量"<br>3. **假设** 提币数量低于最小值, **当** 验证, **则** 提示"提币数量不能低于10 USDT"<br>4. **假设** 提币数量超过余额, **当** 验证, **则** 提示"余额不足" |
| **优先级** | 必须 |

### FR-CW-017-06: 重要提示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-06 |
| **描述** | 显示提币的重要说明和注意事项 |
| **验收标准** | 1. **假设** 显示重要提示, **当** 渲染, **则** 使用警告图标和深色卡片突出显示<br>2. **假设** 提示内容, **当** 显示, **则** 包含地址验证、审核时间、到账时间等关键信息 |
| **优先级** | 必须 |

### FR-CW-017-07: 提交提币

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-07 |
| **描述** | 用户提交提币申请 |
| **验收标准** | 1. **假设** 表单验证通过, **当** 点击"下一步", **则** 进入确认页面<br>2. **假设** 进入确认页面, **当** 加载, **则** 显示完整的提币信息供用户二次确认 |
| **优先级** | 必须 |

### FR-CW-017-08: 地址完整性确认（安全关键）

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-08 |
| **描述** | 在提交前**必须**显示完整地址供用户核对，防止地址错误导致资金丢失 |
| **验收标准** | 1. **假设** 用户输入地址后，**当** 点击"下一步"，**则** 弹出地址确认对话框显示**完整地址**（不截断）<br>2. **假设** 地址确认对话框显示，**当** 用户查看，**则** 高亮显示地址的前6位和后6位字符<br>3. **假设** 用户需要确认，**当** 要求验证，**则** 用户必须手动输入地址的后4位字符才能继续<br>4. **假设** 用户输入的后4位不匹配，**当** 验证失败，**则** 显示错误提示"地址确认不匹配，请重新核对" |
| **优先级** | **必须（安全关键）** |

> **安全说明**：链上提币一旦发送无法撤回。地址确认机制强制用户核对目标地址，防止因复制粘贴错误或恶意软件篡改地址导致的资金损失。

### FR-CW-017-09: 全部提现安全警告

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-09 |
| **描述** | 点击"全部"按钮时显示安全警告，防止用户意外清空账户 |
| **验收标准** | 1. **假设** 用户点击"全部"按钮，**当** 触发，**则** 显示确认对话框"您即将提取全部余额 XX USDT，是否确认？"<br>2. **假设** 确认对话框显示，**当** 用户选择，**则** 提供"确认全部提取"和"取消"两个选项<br>3. **假设** 用户确认，**当** 继续，**则** 自动填入（可用余额-手续费） |
| **优先级** | 应该 |

### FR-CW-017-10: 网络不兼容地址拦截

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-017-10 |
| **描述** | 当检测到地址与所选网络不兼容时，**必须**阻止用户继续操作 |
| **验收标准** | 1. **假设** 用户输入的地址格式与所选网络不兼容，**当** 验证，**则** 显示红色警告"此地址与所选网络不兼容，发送资金可能导致永久丢失"<br>2. **假设** 地址不兼容，**当** 用户尝试点击"下一步"，**则** 按钮禁用，不允许继续<br>3. **假设** 地址兼容性问题，**当** 显示警告，**则** 提供"查看支持的网络"链接帮助用户选择正确网络 |
| **优先级** | **必须（安全关键）** |

> **安全说明**：将ERC-20代币发送到Tron地址（或反之）将导致资金永久丢失。系统必须在用户提交前强制拦截此类错误。

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户从选择网络页面选择了某个网络
2. 进入链上提币详情页
3. 输入或选择提币地址（可手动输入、粘贴、扫码、从列表选择）
4. 输入提币数量（可手动输入或点击全部）
5. 查看费用明细和重要提示
6. 点击"下一步"进行验证和确认

### 4.2 导航流程
- 选择网络页面 → 链上提币详情页
- 链上提币详情页 → 选择收款方页面（可选）
- 链上提币详情页 → 确认提币页面

---

## 5. 数据需求

### 5.1 输入数据

| 字段名称 | 数据类型 | 必填 | 验证规则 |
|---------|---------|------|---------|
| 提币地址 | String | 是 | 符合区块链地址格式 |
| 提币数量 | Decimal | 是 | >= 最小提现额，<= 可用余额 |

### 5.2 显示数据

| 数据项 | 数据类型 | 说明 |
|--------|---------|------|
| 可用余额 | Decimal | 当前币种的可用余额 |
| 最小提现额 | Decimal | 该币种的最小提现金额 |
| 手续费 | Decimal | 当前网络的提币手续费 |

---

## 6. 验证规则

### 6.1 地址验证
- 格式：符合所选网络的地址格式
- 示例：以太坊地址（0x开头，42位）、波场地址（T开头，34位）

### 6.2 数量验证
- 必须大于等于最小提现额
- 不能超过可用余额
- 精度符合币种要求

---

## 7. 验收标准汇总

1. ✅ 提币地址输入验证正确
2. ✅ 地址错误提示明确
3. ✅ 粘贴和扫码功能正常
4. ✅ 提币数量输入验证正确
5. ✅ 全部按钮功能正常（自动扣除手续费）
6. ✅ 费用明细实时计算准确
7. ✅ 手续费正确显示
8. ✅ 实际到账计算准确
9. ✅ 重要提示清晰展示
10. ✅ 表单验证完整有效
11. ✅ 下一步按钮跳转正确
12. ✅ UI符合设计稿
13. ✅ **地址确认对话框显示完整地址（不截断）**
14. ✅ **用户必须输入地址后4位才能继续**
15. ✅ **点击"全部"按钮显示安全确认对话框**
16. ✅ **网络不兼容地址被禁止提交**
17. ✅ **不兼容地址显示红色永久丢失警告**

---

## 8. 无障碍访问要求

- [ ] 所有文本颜色对比度符合WCAG 2.1 AA标准（最低4.5:1）
- [ ] 按钮和可交互元素最小触摸目标为44x44pt
- [ ] 支持屏幕阅读器，所有UI元素有适当的无障碍标签
- [ ] 地址输入框有明确的aria-label描述
- [ ] 错误提示通过无障碍公告通知用户（aria-live="polite"）
- [ ] 金额输入使用带小数点的数字键盘（inputmode="decimal"）
- [ ] 费用明细区域支持屏幕阅读器逐项朗读
- [ ] 地址确认对话框获得焦点，支持键盘操作
- [ ] 支持键盘导航（适用于平板/桌面设备）
