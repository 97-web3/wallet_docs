# 币种详情页面 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-003 |
| 页面名称 | 币种详情页面 |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
展示单个加密货币的详细信息，包括总资产、今日盈亏、交易历史记录，并提供充值和提现操作入口。

---

## 2. UI组件

### 2.1 布局概述
深色主题界面，顶部显示币种图标和名称，中间为资产卡片和操作按钮，下方为按日期分组的交易记录列表。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头图标 | 左上角 |
| 币种图标 | 图片 | USDT币种Logo | 标题栏中央左侧 |
| 币种名称 | 文本标签 | "USDT"文字 | 标题栏中央 |
| 资产卡片 | 卡片容器 | 深色背景卡片 | 页面上部 |
| 总资产标题 | 文本标签 | "总资产估值"，带眼睛图标 | 卡片内顶部 |
| 总资产金额 | 数字显示 | "96,666.00"大号字体 | 卡片内 |
| 货币单位选择器 | 下拉选择器 | "USD ▼" | 金额右侧 |
| 今日盈亏标签 | 文本标签 | "今日盈亏" | 卡片内底部左侧 |
| 盈亏百分比 | 文本标签 | "+0.00%"绿色显示 | 卡片内底部右侧 |
| 充值按钮 | 圆角按钮 | 带充值图标，文字"充值" | 操作区左侧 |
| 提现按钮 | 圆角按钮 | 带提现图标，文字"提现" | 操作区右侧 |
| 日期分隔符 | 文本标签 | 如"2025/11/14" | 交易记录各组上方 |
| 交易记录项 | 列表卡片 | 显示交易类型、地址、金额、状态 | 日期分隔符下方 |

### 2.3 交易记录项组件

| 组件 | 类型 | 描述 |
|------|------|------|
| 币种图标 | 图片 | 圆形币种Logo |
| 交易类型 | 文本标签 | "充值"或"提现" |
| 地址信息 | 文本标签 | "来自/至 地址..." 灰色小字 |
| 交易金额 | 数字显示 | 如"+123,00 USDT"或"-123,00 USDT" |
| 交易状态 | 状态标签 | "已完成"绿色或"处理中"橙色 |

---

## 3. 功能需求

### FR-CW-003-01: 币种资产显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-01 |
| **描述** | 显示该币种的总资产估值和今日盈亏 |
| **验收标准** | 1. **假设** 用户从主页点击某币种, **当** 进入详情页, **则** 显示该币种的总资产估值<br>2. **假设** 币种价格波动, **当** 数据更新, **则** 总资产实时更新<br>3. **假设** 计算今日盈亏, **当** 有盈利, **则** 以绿色显示正百分比；**当** 有亏损, **则** 以红色显示负百分比 |
| **优先级** | 必须 |

### FR-CW-003-02: 货币单位切换

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-02 |
| **描述** | 用户可以切换显示的法币单位 |
| **验收标准** | 1. **假设** 用户点击货币单位下拉框, **当** 选择不同货币, **则** 资产估值按选择的货币换算显示<br>2. **假设** 用户在主页设置了货币单位, **当** 进入详情页, **则** 默认使用相同的货币单位 |
| **优先级** | 必须 |

### FR-CW-003-03: 隐私模式切换

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-03 |
| **描述** | 用户可以隐藏或显示资产金额 |
| **验收标准** | 1. **假设** 用户点击眼睛图标, **当** 当前为显示状态, **则** 切换到隐藏状态（显示"****"）<br>2. **假设** 用户点击眼睛图标, **当** 当前为隐藏状态, **则** 切换到显示状态（显示实际金额）<br>3. **假设** 用户设置了隐私模式, **当** 切换页面再回来, **则** 保持隐私模式状态 |
| **优先级** | 应该 |

### FR-CW-003-04: 充值入口

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-04 |
| **描述** | 提供该币种的充值功能入口 |
| **验收标准** | 1. **假设** 用户点击"充值"按钮, **当** 触发点击, **则** 跳转到该币种的充值页面（选择网络）<br>2. **假设** 进入充值流程, **当** 加载页面, **则** 自动带入当前币种信息 |
| **优先级** | 必须 |

### FR-CW-003-05: 提现入口

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-05 |
| **描述** | 提供该币种的提现功能入口 |
| **验收标准** | 1. **假设** 用户点击"提现"按钮, **当** 触发点击, **则** 跳转到该币种的提现页面（选择方式）<br>2. **假设** 进入提现流程, **当** 加载页面, **则** 自动带入当前币种信息和可用余额 |
| **优先级** | 必须 |

### FR-CW-003-06: 交易记录列表

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-06 |
| **描述** | 按日期分组显示该币种的交易历史记录 |
| **验收标准** | 1. **假设** 用户有交易记录, **当** 加载详情页, **则** 按日期倒序显示交易记录<br>2. **假设** 交易记录较多, **当** 滚动到底部, **则** 自动加载更多历史记录<br>3. **假设** 用户没有交易记录, **当** 加载列表, **则** 显示"暂无交易记录"提示<br>4. **假设** 用户点击某条交易记录, **当** 触发点击, **则** 跳转到交易详情页面 |
| **优先级** | 必须 |

### FR-CW-003-07: 交易状态显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-07 |
| **描述** | 清晰显示每笔交易的状态 |
| **验收标准** | 1. **假设** 交易已完成, **当** 显示状态, **则** 显示绿色"已完成"标签<br>2. **假设** 交易处理中, **当** 显示状态, **则** 显示橙色"处理中"标签<br>3. **假设** 交易失败, **当** 显示状态, **则** 显示红色"失败"标签 |
| **优先级** | 必须 |

### FR-CW-003-08: 交易金额显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-003-08 |
| **描述** | 区分显示充值和提现的金额 |
| **验收标准** | 1. **假设** 交易类型为充值, **当** 显示金额, **则** 以绿色显示正数（如"+123,00 USDT"）<br>2. **假设** 交易类型为提现, **当** 显示金额, **则** 以白色显示负数（如"-123,00 USDT"） |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户从主页点击某个币种进入详情页
2. 查看该币种的总资产和今日盈亏
3. 可选操作：
   - 切换货币单位
   - 切换隐私模式
   - 点击充值按钮进行充值
   - 点击提现按钮进行提现
   - 滚动查看交易记录
   - 点击交易记录项查看详情

### 4.2 导航流程
- 主页 → 币种详情页（点击资产列表项）
- 币种详情页 → 充值页面（点击充值按钮）
- 币种详情页 → 提现页面（点击提现按钮）
- 币种详情页 → 交易详情页（点击交易记录项）
- 币种详情页 → 主页（点击返回按钮）

### 4.3 手势与交互
- **点击**：按钮、交易记录项支持点击
- **滚动**：交易记录列表支持垂直滚动
- **下拉刷新**：页面支持下拉刷新数据
- **上拉加载**：交易记录支持上拉加载更多

---

## 5. 数据需求

### 5.1 显示数据

| 数据项 | 数据类型 | 来源 | 更新频率 |
|--------|---------|------|---------|
| 币种信息 | Object | 资产服务 | 静态 |
| 总资产估值 | Decimal | 资产服务 | 实时/定时刷新 |
| 今日盈亏 | Decimal | 资产服务 | 实时/定时刷新 |
| 货币单位 | String | 用户偏好 | 静态/用户更新 |
| 交易记录列表 | Array | 交易服务 | 实时/下拉刷新 |

### 5.2 交易记录数据结构

```json
{
  "transactionId": "1231231",
  "type": "deposit", // deposit, withdraw
  "coinId": "USDT",
  "amount": "123.00",
  "address": "0x1e39c3f480x1e39c3f480x1e39c3f480x1e3...kajs",
  "addressType": "from", // from, to
  "status": "completed", // completed, processing, failed
  "timestamp": "2025-11-14T12:30:00Z",
  "displayDate": "2025/11/14"
}
```

---

## 6. 验证规则

### 6.1 数据精度
- 资产金额：小数点后2位
- 盈亏百分比：小数点后2位
- 交易金额：根据币种精度显示

### 6.2 显示规则
- 金额使用千位分隔符
- 地址显示省略中间部分（显示前后各若干位）
- 日期按"YYYY/MM/DD"格式显示
- 相同日期的交易记录分组显示

### 6.3 状态颜色
- 充值金额：绿色（+）
- 提现金额：白色（-）
- 已完成状态：绿色
- 处理中状态：橙色
- 失败状态：红色

---

## 7. 技术考虑

### 7.1 性能优化
- 交易记录分页加载，每页20条
- 虚拟滚动优化长列表性能
- 图片资源缓存

### 7.2 数据刷新
- 进入页面自动刷新数据
- 支持下拉刷新
- 价格数据30秒自动更新

### 7.3 错误处理
- 网络异常时显示缓存数据
- API失败时显示友好提示
- 交易记录加载失败时可重试

---

## 8. 验收标准汇总

1. ✅ 总资产和今日盈亏正确显示和计算
2. ✅ 货币单位切换功能正常
3. ✅ 隐私模式切换功能正常
4. ✅ 充值和提现按钮跳转正确
5. ✅ 交易记录按日期分组显示
6. ✅ 交易状态和金额显示符合规范
7. ✅ 点击交易记录可进入详情页
8. ✅ 滚动加载更多交易记录功能正常
9. ✅ 下拉刷新功能正常
10. ✅ UI完全符合设计稿
