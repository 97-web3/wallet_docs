# 交易详情页面（充值） - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-005 |
| 页面名称 | 交易详情页面（充值） |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
展示单笔充值交易的完整详细信息，包括交易状态、金额、交易ID、时间、币种、方式、交易哈希等，并提供区块链浏览器查看和客服联系入口。

---

## 2. UI组件

### 2.1 布局概述
深色主题界面，顶部显示交易状态图标和金额，中间为交易详细信息列表，底部为区块链浏览器链接和客服联系入口。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 状态图标 | 图标 | 绿色徽章图标，带勾选标记 | 页面上部中央 |
| 状态文字 | 文本标签 | "已完成"，绿色显示 | 状态图标下方 |
| 币种图标 | 图片 | USDT币种Logo | 交易金额左侧 |
| 交易金额 | 数字显示 | "+123,00 USDT"，绿色大号字体 | 页面上部 |
| 信息卡片 | 卡片容器 | 深色背景卡片 | 中部区域 |
| 交易ID行 | 信息行 | 标签"交易ID"，值"1231231"，带复制图标 | 卡片内第1行 |
| 时间行 | 信息行 | 标签"时间"，值"2025/11/1 12:12:12" | 卡片内第2行 |
| 类型行 | 信息行 | 标签"类型"，值"充值" | 卡片内第3行 |
| 状态行 | 信息行 | 标签"状态"，值"已完成" | 卡片内第4行 |
| 币种行 | 信息行 | 标签"币种"，值"USDT" | 卡片内第5行 |
| 数量行 | 信息行 | 标签"数量"，值"123 USDT" | 卡片内第6行 |
| 方式行 | 信息行 | 标签"方式"，值"链上充值" | 卡片内第7行 |
| 哈希行 | 信息行 | 标签"交易哈希"，值"0x1e39c3f480x...x1e3"，带复制图标 | 卡片内第8行 |
| 浏览器链接 | 文本链接 | "在区块链浏览器中查看"，绿色字体，带外链图标 | 卡片下方 |
| 客服提示卡片 | 提示卡片 | 深色背景，带警告图标 | 底部区域 |
| 客服联系链接 | 文本链接 | "联系客服"，绿色字体 | 客服提示内 |

---

## 3. 功能需求

### FR-CW-005-01: 交易状态显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-005-01 |
| **描述** | 清晰显示交易的当前状态 |
| **验收标准** | 1. **假设** 交易已完成, **当** 显示状态, **则** 显示绿色徽章图标和绿色"已完成"文字<br>2. **假设** 交易处理中, **当** 显示状态, **则** 显示橙色图标和"处理中"文字<br>3. **假设** 交易失败, **当** 显示状态, **则** 显示红色图标和"失败"文字 |
| **优先级** | 必须 |

### FR-CW-005-02: 交易金额显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-005-02 |
| **描述** | 突出显示充值金额 |
| **验收标准** | 1. **假设** 交易为充值类型, **当** 显示金额, **则** 以绿色大号字体显示，带"+"符号和币种单位<br>2. **假设** 显示金额, **当** 渲染, **则** 使用千位分隔符提高可读性<br>3. **假设** 币种图标, **当** 加载, **则** 显示在金额左侧 |
| **优先级** | 必须 |

### FR-CW-005-03: 交易详细信息显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-005-03 |
| **描述** | 完整展示交易的所有关键信息 |
| **验收标准** | 1. **假设** 加载详情页, **当** 获取数据成功, **则** 显示交易ID、时间、类型、状态、币种、数量、方式、交易哈希等所有字段<br>2. **假设** 某些字段值较长, **当** 显示时, **则** 适当省略但保证可读性<br>3. **假设** 时间字段, **当** 显示, **则** 使用标准格式"YYYY/MM/DD HH:MM:SS" |
| **优先级** | 必须 |

### FR-CW-005-04: 复制功能

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-005-04 |
| **描述** | 用户可以复制交易ID和交易哈希 |
| **验收标准** | 1. **假设** 用户点击交易ID右侧的复制图标, **当** 触发点击, **则** 复制完整交易ID到剪贴板并显示"已复制"提示<br>2. **假设** 用户点击交易哈希右侧的复制图标, **当** 触发点击, **则** 复制完整交易哈希到剪贴板并显示"已复制"提示 |
| **优先级** | 必须 |

### FR-CW-005-05: 区块链浏览器查看

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-005-05 |
| **描述** | 提供在区块链浏览器中查看交易的入口 |
| **验收标准** | 1. **假设** 用户点击"在区块链浏览器中查看"链接, **当** 触发点击, **则** 在浏览器中打开对应的区块链浏览器页面<br>2. **假设** 打开浏览器, **当** 跳转, **则** 自动定位到该交易哈希对应的交易详情<br>3. **假设** 链接带外链图标, **当** 显示, **则** 使用绿色字体和箭头图标 |
| **优先级** | 应该 |

### FR-CW-005-06: 客服联系

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-005-06 |
| **描述** | 提供客服联系入口和说明 |
| **验收标准** | 1. **假设** 用户对交易有疑问, **当** 查看底部提示, **则** 看到"如有疑问，请联系客服。我们将在24小时内为您处理。"提示信息<br>2. **假设** 用户点击"联系客服"链接, **当** 触发点击, **则** 跳转到客服页面或打开客服对话<br>3. **假设** 显示客服提示, **当** 渲染, **则** 使用警告图标和深色背景卡片 |
| **优先级** | 应该 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户从交易记录列表或币种详情页点击某条充值记录
2. 进入交易详情页，查看完整交易信息
3. 可选操作：
   - 复制交易ID
   - 复制交易哈希
   - 在区块链浏览器中查看
   - 联系客服咨询

### 4.2 导航流程
- 交易记录列表/币种详情页 → 交易详情页
- 交易详情页 → 区块链浏览器（外部）
- 交易详情页 → 客服页面

### 4.3 手势与交互
- **点击**：复制图标、链接支持点击
- **滚动**：页面内容支持垂直滚动
- **长按**：交易ID和哈希支持长按复制（可选）

---

## 5. 数据需求

### 5.1 显示数据

| 数据项 | 数据类型 | 说明 |
|--------|---------|------|
| 交易ID | String | 系统内部交易ID |
| 时间 | DateTime | 交易时间戳 |
| 类型 | String | "充值" |
| 状态 | String | "已完成"/"处理中"/"失败" |
| 币种 | String | 如"USDT" |
| 数量 | Decimal | 充值数量 |
| 方式 | String | "链上充值" |
| 交易哈希 | String | 区块链交易哈希 |
| 区块链浏览器链接 | URL | 浏览器查看链接 |

### 5.2 交易详情数据结构

```json
{
  "transactionId": "1231231",
  "timestamp": "2025-11-01T12:12:12Z",
  "type": "deposit",
  "status": "completed",
  "coinId": "USDT",
  "coinName": "USDT",
  "coinIcon": "https://...",
  "amount": "123.00",
  "method": "链上充值",
  "txHash": "0x1e39c3f480x1e39c3f480x1e39c3f480x1e3",
  "explorerUrl": "https://etherscan.io/tx/0x..."
}
```

---

## 6. 验证规则

### 6.1 数据显示
- 金额使用千位分隔符
- 时间格式：YYYY/MM/DD HH:MM:SS
- 哈希显示：省略中间部分，显示0x+前若干位+...+后若干位

### 6.2 状态映射
- completed → 已完成（绿色）
- processing → 处理中（橙色）
- failed → 失败（红色）

---

## 7. 技术考虑

### 7.1 复制功能
- 使用Clipboard API实现复制
- 复制成功显示Toast提示
- iOS需要特殊处理权限

### 7.2 外部链接
- 根据不同区块链选择对应浏览器
- 支持Etherscan、BscScan、Tronscan等

### 7.3 数据加载
- 页面加载时获取完整交易详情
- 加载失败显示友好提示和重试按钮

---

## 8. 验收标准汇总

1. ✅ 交易状态正确显示，颜色符合规范
2. ✅ 交易金额突出显示，格式正确
3. ✅ 所有交易信息字段完整显示
4. ✅ 复制交易ID功能正常
5. ✅ 复制交易哈希功能正常
6. ✅ 区块链浏览器链接可正常打开
7. ✅ 客服联系入口可正常跳转
8. ✅ 时间格式正确
9. ✅ UI完全符合设计稿
10. ✅ 复制成功有明确提示
