# 输入错误状态 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-033 |
| 页面名称 | 输入错误状态 |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
输入错误状态页面显示登录表单验证失败或提交后返回错误时的状态。错误的输入框显示红色边框，下方显示具体的错误提示信息，引导用户修正输入。

---

## 2. UI组件

### 2.1 布局概述
页面延续登录页面布局，有错误的输入框边框变为红色，错误提示文字显示在输入框下方。登录按钮可能保持激活或变为禁用状态，取决于错误类型。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 手机号输入框 | 文本输入 | 可能显示红色边框（如手机号错误） | 表单区域 |
| 密码输入框 | 密码输入 | 可能显示红色边框（如密码错误） | 手机号下方 |
| 错误提示 | 标签 | 红色文字，显示具体错误信息 | 错误输入框下方 |
| 登录按钮 | 主按钮 | 根据情况激活或禁用 | 表单底部 |

---

## 3. 功能需求

### FR-033-01: 显示输入错误状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-033-01 |
| **描述** | 当输入验证失败时，系统应显示错误状态反馈 |
| **验收标准** | 1. **假设** 手机号格式错误，**当** 验证失败，**则** 手机号输入框边框变红<br>2. **假设** 密码不符合要求，**当** 验证失败，**则** 密码输入框边框变红 |
| **优先级** | 必须 |

### FR-033-02: 显示错误提示信息

| 字段 | 内容 |
|------|------|
| **ID** | FR-033-02 |
| **描述** | 系统应在错误输入框下方显示具体错误信息 |
| **验收标准** | 1. **假设** 手机号格式错误，**当** 显示错误，**则** 提示"请输入正确的手机号"<br>2. **假设** 密码长度不足，**当** 显示错误，**则** 提示"密码至少6位" |
| **优先级** | 必须 |

### FR-033-03: 登录失败错误显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-033-03 |
| **描述** | 登录提交失败时应显示服务器返回的错误信息 |
| **验收标准** | 1. **假设** 手机号或密码错误，**当** 服务器返回错误，**则** 显示"手机号或密码错误"<br>2. **假设** 账号被锁定，**当** 服务器返回，**则** 显示"账号已被锁定" |
| **优先级** | 必须 |

### FR-033-04: 清除错误状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-033-04 |
| **描述** | 用户修改输入时应清除错误状态 |
| **验收标准** | 1. **假设** 输入框显示错误状态，**当** 用户开始修改内容，**则** 红色边框消失<br>2. **假设** 错误提示显示，**当** 用户修改输入，**则** 错误提示消失 |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户提交登录或输入被验证
2. 系统检测到错误
3. 显示红色错误状态和提示
4. 用户修改输入内容
5. 错误状态清除
6. 用户重新提交

### 4.2 导航流程
- **来源状态**: 表单提交或实时验证
- **目标状态**:
  - 修改输入: 清除错误，恢复正常
  - 重新提交: 再次验证

### 4.3 手势与交互
| 手势 | 行为 |
|------|------|
| 点击错误输入框 | 开始修改，清除错误状态 |
| 输入内容 | 清除对应字段的错误状态 |

---

## 5. 数据需求

### 5.1 显示数据
| 数据字段 | 类型 | 来源 | 格式 |
|----------|------|------|------|
| 错误提示 | String | 验证结果/服务器响应 | 本地化文本 |
| 错误字段 | Array | 验证结果 | 字段名列表 |

### 5.2 输入数据
| 输入字段 | 类型 | 验证规则 | 必填 |
|----------|------|----------|------|
| 修改后的输入 | String | 各字段规则 | 是 |

---

## 6. 验证规则

### 6.1 错误样式
- 边框颜色：红色 (#FF3B30)
- 错误文字：红色，小字号
- 可选：抖动动画效果

### 6.2 错误类型
| 错误类型 | 错误信息 |
|----------|----------|
| 手机号格式 | 请输入正确的手机号 |
| 密码长度 | 密码至少6位 |
| 登录失败 | 手机号或密码错误 |
| 验证码错误 | 验证码错误，请重试 |
| 账号锁定 | 账号已被锁定，请联系客服 |

---

## 7. 技术考虑

### 7.1 验证时机
- 实时验证：输入时验证格式
- 提交验证：点击登录时验证
- 服务器验证：提交后的错误反馈

### 7.2 状态管理
- 追踪每个字段的错误状态
- 用户修改时清除对应错误
- 多个错误可同时显示

---

## 8. 验收标准汇总

- [ ] 错误输入框显示红色边框
- [ ] 错误提示文字显示在输入框下方
- [ ] 错误提示文字为红色
- [ ] 开始修改时错误状态清除
- [ ] 不同错误显示对应提示信息
- [ ] 服务器错误正确显示
- [ ] 可以多字段同时显示错误
