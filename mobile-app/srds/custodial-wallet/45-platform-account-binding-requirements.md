# 平台账户绑定页面 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-045 |
| 页面名称 | 平台账户绑定页面 |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
用户将平台账户 (Web2 钱包) 与 Web3 钱包地址进行绑定，实现 1:1 唯一对应关系，便于跨钱包操作和内部划转。

> 相关规格: [COMMON-002 验证方式规则](../common/verification-method-rules.md) | [COMMON-004 钱包切换逻辑](../common/wallet-switch-logic.md)

### 绑定规则
| 规则 | 说明 |
|------|------|
| 1:1 绑定 | 一个平台 UID 只能绑定一个钱包地址 |
| 双向唯一 | 一个钱包地址只能绑定一个平台 UID |
| 可解绑 | 支持解绑后重新绑定新地址 |

---

## 2. UI组件

### 2.1 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头 | 左上角 |
| 页面标题 | 文本标签 | "绑定平台账户" | 标题栏中央 |
| 绑定状态卡片 | 卡片 | 显示当前绑定状态 | 上部 |
| 平台 UID 标签 | 文本标签 | "平台 UID" | 卡片内 |
| UID 显示/输入 | 文本显示/输入框 | 显示已绑定 UID 或输入框 | 卡片内 |
| 钱包地址标签 | 文本标签 | "绑定地址" | 卡片下方 |
| 地址显示 | 文本标签 | 当前 Web3 钱包地址（省略格式） | 标签下方 |
| 扫码按钮 | 图标按钮 | 扫描二维码获取 UID | 输入框右侧 |
| 绑定说明卡片 | 提示卡片 | 绑定规则说明，带警告图标 | 中部 |
| 绑定/解绑按钮 | 主按钮 | "绑定" 或 "解除绑定" | 底部 |

---

## 3. 功能需求

### FR-CW-045-01: 绑定状态显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-045-01 |
| **描述** | 显示当前平台账户与钱包地址的绑定状态 |
| **验收标准** | 1. **假设** 用户已绑定, **当** 进入页面, **则** 显示已绑定的 UID 和地址<br>2. **假设** 用户未绑定, **当** 进入页面, **则** 显示 UID 输入框和当前钱包地址 |
| **优先级** | 必须 |

### FR-CW-045-02: 绑定平台账户

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-045-02 |
| **描述** | 用户输入平台 UID 完成绑定 |
| **验收标准** | 1. **假设** 用户输入 UID, **当** 点击绑定, **则** 验证 UID 是否存在且未被其他地址绑定<br>2. **假设** UID 验证通过, **当** 发起绑定, **则** 进入安全验证流程（参考 COMMON-002）<br>3. **假设** 安全验证通过, **当** 完成验证, **则** 完成绑定并显示成功提示<br>4. **假设** UID 已被其他地址绑定, **当** 验证, **则** 提示"该 UID 已绑定其他地址" |
| **优先级** | 必须 |

### FR-CW-045-03: 扫码绑定

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-045-03 |
| **描述** | 用户可通过扫描二维码获取平台 UID |
| **验收标准** | 1. **假设** 用户点击扫码按钮, **当** 触发, **则** 打开二维码扫描器<br>2. **假设** 扫描成功, **当** 识别到 UID, **则** 自动填入 UID 输入框 |
| **优先级** | 应该 |

### FR-CW-045-04: 解除绑定

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-045-04 |
| **描述** | 用户可以解除现有绑定关系 |
| **验收标准** | 1. **假设** 用户已绑定, **当** 点击"解除绑定", **则** 显示确认弹窗<br>2. **假设** 用户确认解绑, **当** 确认, **则** 进入安全验证流程<br>3. **假设** 安全验证通过, **当** 完成验证, **则** 解除绑定并恢复为未绑定状态 |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户从设置或个人中心进入绑定页面
2. 查看当前绑定状态
3. 若未绑定：输入或扫码获取 UID → 点击绑定 → 安全验证 → 完成
4. 若已绑定：可查看绑定信息或选择解绑

### 4.2 导航流程
- 设置页面 → 平台账户绑定页面
- 平台账户绑定页面 → 安全验证 → 返回绑定页面

---

## 5. 数据需求

### 5.1 输入数据

| 字段名称 | 数据类型 | 必填 | 验证规则 |
|---------|---------|------|---------|
| 平台 UID | String | 是 | 纯数字，6 位以上 |

### 5.2 显示数据

| 数据项 | 数据类型 | 说明 |
|--------|---------|------|
| 绑定状态 | Boolean | 是否已绑定 |
| 已绑定 UID | String | 当前绑定的平台 UID |
| 钱包地址 | String | 当前 Web3 钱包地址 |

---

## 6. 验证规则

### 6.1 UID 验证
- 格式：纯数字，6 位以上
- 必须是有效的平台用户
- 不能已被其他钱包地址绑定

### 6.2 绑定验证
- 当前钱包地址不能已绑定其他 UID
- 绑定/解绑需通过安全验证

---

## 7. 验收标准汇总

1. ✅ 正确显示当前绑定状态
2. ✅ UID 输入验证正常
3. ✅ 扫码功能正常
4. ✅ 绑定流程包含安全验证
5. ✅ 1:1 绑定规则正确执行
6. ✅ 解绑功能正常
7. ✅ 错误提示清晰明确
8. ✅ UI 符合设计稿

---

## 8. 相关文档

- [COMMON-002 验证方式规则](../common/verification-method-rules.md)
- [COMMON-004 钱包切换逻辑](../common/wallet-switch-logic.md)

---

*文档创建日期: 2025-12-08*
