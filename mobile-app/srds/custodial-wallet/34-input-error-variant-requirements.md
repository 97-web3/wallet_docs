# 输入错误状态(验证码) - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-034 |
| 页面名称 | 输入错误状态(验证码) |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
输入错误状态验证码变体页面显示短信验证码登录时验证失败的状态。验证码输入框显示红色边框，下方显示验证码相关的错误提示信息。

---

## 2. UI组件

### 2.1 布局概述
页面延续验证码登录页面布局，验证码输入框边框变为红色，错误提示文字显示在验证码输入框下方。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 手机号输入框 | 文本输入 | 显示已输入的手机号 | 表单区域 |
| 验证码输入框 | 文本输入 | 红色边框（错误状态） | 手机号下方 |
| 错误提示 | 标签 | 红色文字，如"验证码错误" | 验证码框下方 |
| 发送验证码按钮 | 文字按钮 | 可能显示"重新发送" | 验证码框右侧 |
| 登录按钮 | 主按钮 | 可能为禁用状态 | 表单底部 |

---

## 3. 功能需求

### FR-034-01: 显示验证码错误状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-034-01 |
| **描述** | 验证码验证失败时，系统应显示错误状态 |
| **验收标准** | 1. **假设** 用户输入错误验证码，**当** 验证失败，**则** 验证码输入框边框变红<br>2. **假设** 验证码已过期，**当** 提交验证，**则** 显示过期错误状态 |
| **优先级** | 必须 |

### FR-034-02: 显示验证码错误提示

| 字段 | 内容 |
|------|------|
| **ID** | FR-034-02 |
| **描述** | 系统应显示具体的验证码错误信息 |
| **验收标准** | 1. **假设** 验证码错误，**当** 显示错误，**则** 提示"验证码错误，请重试"<br>2. **假设** 验证码过期，**当** 显示错误，**则** 提示"验证码已过期，请重新获取" |
| **优先级** | 必须 |

### FR-034-03: 自动清空验证码

| 字段 | 内容 |
|------|------|
| **ID** | FR-034-03 |
| **描述** | 验证码错误后可选择自动清空已输入内容 |
| **验收标准** | 1. **假设** 验证码验证失败，**当** 显示错误，**则** 清空验证码输入框<br>2. **假设** 输入框清空，**当** 用户重新输入，**则** 光标定位到输入框 |
| **优先级** | 可以 |

### FR-034-04: 引导重新获取验证码

| 字段 | 内容 |
|------|------|
| **ID** | FR-034-04 |
| **描述** | 验证码过期时应引导用户重新获取 |
| **验收标准** | 1. **假设** 验证码已过期，**当** 显示错误，**则** "重新发送"按钮可点击<br>2. **假设** 用户点击重新发送，**当** 发送成功，**则** 清除错误状态 |
| **优先级** | 应该 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户提交验证码
2. 系统返回验证失败
3. 显示红色错误状态
4. 用户重新输入或重新获取验证码
5. 错误状态清除

### 4.2 导航流程
- **来源状态**: 验证码提交
- **目标状态**:
  - 重新输入: 清除错误
  - 重新发送: 获取新验证码

### 4.3 手势与交互
| 手势 | 行为 |
|------|------|
| 开始输入 | 清除错误状态 |
| 点击重新发送 | 发送新验证码 |

---

## 5. 数据需求

### 5.1 显示数据
| 数据字段 | 类型 | 来源 | 格式 |
|----------|------|------|------|
| 错误提示 | String | 服务器响应 | 本地化文本 |
| 重发按钮状态 | String | 倒计时/可用 | 倒计时或"重新发送" |

### 5.2 输入数据
| 输入字段 | 类型 | 验证规则 | 必填 |
|----------|------|----------|------|
| 新验证码 | String | 4-6位数字 | 是 |

---

## 6. 验证规则

### 6.1 错误类型
| 错误类型 | 错误信息 |
|----------|----------|
| 验证码错误 | 验证码错误，请重试 |
| 验证码过期 | 验证码已过期，请重新获取 |
| 验证码无效 | 验证码无效 |

### 6.2 状态清除条件
- 用户开始输入新验证码
- 成功获取新验证码

---

## 7. 技术考虑

### 7.1 错误处理
- 区分不同类型的验证码错误
- 过期错误时启用重发按钮

### 7.2 用户体验
- 错误后自动聚焦到验证码输入框
- 可选：错误时输入框抖动动画

---

## 8. 验收标准汇总

- [ ] 验证码错误时输入框边框变红
- [ ] 显示对应错误提示信息
- [ ] 错误提示为红色文字
- [ ] 过期时引导重新获取
- [ ] 重新输入时清除错误状态
- [ ] 重新发送后清除错误状态
