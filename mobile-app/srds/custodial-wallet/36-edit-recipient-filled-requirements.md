# 编辑收款方(已填写) - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-036 |
| 页面名称 | 编辑收款方(已填写) |
| 版本 | 1.1 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
编辑收款方已填写状态页面显示用户已输入或选择收款地址后的状态。地址输入框显示完整地址，地址格式验证通过，确认按钮变为激活状态。

---

## 2. UI组件

### 2.1 布局概述
页面延续编辑收款方页面布局，地址输入框显示已输入的完整地址，可能显示地址有效的绿色勾选提示，确认按钮为绿色激活状态。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头 | 顶部左侧 |
| 页面标题 | 标签 | "编辑收款方" | 顶部居中 |
| 地址输入框 | 多行文本 | 显示完整区块链地址 | 内容区域 |
| 清除按钮 | 图标按钮 | X图标，清空输入 | 输入框内右侧 |
| 有效提示 | 图标/标签 | 绿色勾选，表示地址有效 | 输入框下方 |
| 确认按钮 | 主按钮 | 绿色激活按钮，"确认" | 底部 |

---

## 3. 功能需求

### FR-036-01: 显示已输入的地址

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-01 |
| **描述** | 地址输入后应完整显示在输入框中 |
| **验收标准** | 1. **假设** 用户输入或选择了地址，**当** 地址填入，**则** 输入框显示完整地址<br>2. **假设** 地址较长，**当** 显示地址，**则** 支持多行显示或滚动查看 |
| **优先级** | 必须 |

### FR-036-02: 显示地址有效状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-02 |
| **描述** | 地址格式验证通过时应显示有效状态指示 |
| **验收标准** | 1. **假设** 地址格式正确，**当** 验证通过，**则** 显示绿色勾选或"地址有效"提示<br>2. **假设** 显示有效状态，**当** 用户查看，**则** 清晰表明地址可用 |
| **优先级** | 应该 |

### FR-036-03: 激活确认按钮

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-03 |
| **描述** | 地址有效时确认按钮应变为可点击状态 |
| **验收标准** | 1. **假设** 地址无效或为空，**当** 查看按钮，**则** 确认按钮为灰色禁用<br>2. **假设** 地址有效，**当** 验证通过，**则** 确认按钮变为绿色激活 |
| **优先级** | 必须 |

### FR-036-04: 清除已输入地址

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-04 |
| **描述** | 用户可以清除已输入的地址 |
| **验收标准** | 1. **假设** 输入框有地址，**当** 用户点击清除按钮，**则** 清空输入框内容<br>2. **假设** 地址被清除，**当** 输入框为空，**则** 确认按钮变为禁用 |
| **优先级** | 应该 |

### FR-036-05: 允许修改地址

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-05 |
| **描述** | 用户可以修改已输入的地址 |
| **验收标准** | 1. **假设** 已有地址显示，**当** 用户点击输入框，**则** 可以编辑地址内容<br>2. **假设** 用户修改地址，**当** 内容变化，**则** 重新进行格式验证 |
| **优先级** | 必须 |

### FR-036-06: 显示完整地址与复制功能

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-06 |
| **描述** | 确保用户可以查看完整地址并复制 |
| **验收标准** | 1. **假设** 地址已填写，**当** 显示，**则** 显示完整地址（不截断，支持多行或滚动）<br>2. **假设** 用户需要复制，**当** 长按地址区域，**则** 弹出复制选项<br>3. **假设** 复制成功，**当** 触发，**则** 显示"已复制"提示 |
| **优先级** | 应该 |

### FR-036-07: 地址确认前预览

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-07 |
| **描述** | 确认前让用户再次核对地址 |
| **验收标准** | 1. **假设** 用户点击确认，**当** 首次对该地址确认，**则** 显示地址核对弹窗，高亮显示地址的前6位和后4位<br>2. **假设** 显示核对弹窗，**当** 用户查看，**则** 包含"请仔细核对收款地址，转账后无法撤销"警告<br>3. **假设** 地址来自地址簿，**当** 显示，**则** 同时显示备注名称帮助用户确认 |
| **优先级** | 应该 |

### FR-036-08: 网络与地址匹配状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-036-08 |
| **描述** | 显示地址与当前网络的匹配状态 |
| **验收标准** | 1. **假设** 地址验证通过且网络匹配，**当** 显示状态，**则** 显示绿色勾选和"地址与网络匹配"<br>2. **假设** 地址格式正确但网络可能不匹配，**当** 显示状态，**则** 显示黄色警告"请确认地址支持当前网络"<br>3. **假设** 明确的网络不匹配，**当** 显示状态，**则** 显示红色错误并禁用确认按钮 |
| **优先级** | **必须** |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户已输入或选择收款地址
2. 系统验证地址格式
3. 显示地址有效状态
4. 确认按钮变为激活
5. 用户点击确认使用该地址

### 4.2 导航流程
- **来源状态**: 地址输入/选择完成
- **目标页面**:
  - 点击确认: 返回来源页面
  - 清除/修改: 保持在当前页面

### 4.3 手势与交互
| 手势 | 行为 |
|------|------|
| 点击输入框 | 进入编辑模式 |
| 点击清除 | 清空地址 |
| 点击确认 | 确认使用地址 |

---

## 5. 数据需求

### 5.1 显示数据
| 数据字段 | 类型 | 来源 | 格式 |
|----------|------|------|------|
| 收款地址 | String | 用户输入 | 完整区块链地址 |
| 验证状态 | Boolean | 本地验证 | 有效/无效 |
| 地址标签 | String | 地址簿（可选） | 用户自定义名称 |

### 5.2 输入数据
| 输入字段 | 类型 | 验证规则 | 必填 |
|----------|------|----------|------|
| 收款地址 | String | 已验证有效 | 是 |

---

## 6. 验证规则

### 6.1 按钮激活条件
- 地址非空
- 地址格式验证通过

### 6.2 有效状态显示
- 绿色勾选图标
- 可选：显示"地址有效"文字

---

## 7. 技术考虑

### 7.1 状态管理
- 追踪地址输入状态
- 实时验证地址格式
- 控制按钮启用状态

### 7.2 地址显示
- 长地址支持换行或滚动
- 可选：中间省略显示

---

## 8. 验收标准汇总

- [ ] 输入框显示完整收款地址
- [ ] 地址有效时显示绿色状态指示
- [ ] 确认按钮变为绿色激活状态
- [ ] 清除按钮正常工作
- [ ] 可以修改已输入的地址
- [ ] 修改后重新验证地址
- [ ] 点击确认正确返回并传递地址
- [ ] **支持长按复制地址**
- [ ] **首次确认地址时显示核对弹窗**
- [ ] **显示地址与网络的匹配状态**
- [ ] **网络明确不匹配时禁用确认按钮**

---

## 9. 无障碍访问要求

- [ ] 所有文本颜色对比度符合WCAG 2.1 AA标准（最低4.5:1）
- [ ] 按钮和可交互元素最小触摸目标为44x44pt
- [ ] 支持屏幕阅读器，所有UI元素有适当的无障碍标签
- [ ] 地址验证状态通过VoiceOver朗读（如"地址有效"）
- [ ] 清除按钮有明确的aria-label（如"清除地址"）
- [ ] 确认弹窗获得焦点，支持Escape键关闭
- [ ] 禁用状态的确认按钮通过aria-disabled标识
- [ ] 支持键盘导航（适用于平板/桌面设备）
