# 通知列表 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-038 |
| 页面名称 | 通知列表 |
| 版本 | 1.1 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
通知列表页面显示用户收到的所有系统通知和消息。通知按时间倒序排列，包括交易通知、安全提醒、系统公告等类型。用户可以查看通知详情、标记已读或删除通知。

---

## 2. UI组件

### 2.1 布局概述
页面采用卡片列表布局，深色背景主题。顶部显示导航栏和标题，可能包含筛选或全部已读按钮。中间是通知卡片列表，每个通知显示图标、标题、摘要和时间。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 返回按钮 | 图标按钮 | 左箭头，返回上一页 | 顶部左侧 |
| 页面标题 | 标签 | "通知" | 顶部居中 |
| 全部已读按钮 | 文字按钮 | "全部已读" | 顶部右侧 |
| 通知列表 | 列表 | 通知卡片集合 | 内容区域 |
| 通知卡片 | 卡片 | 单个通知项 | 列表中 |
| 通知图标 | 图标 | 根据通知类型显示不同图标 | 卡片左侧 |
| 通知标题 | 标签 | 通知标题文字 | 卡片中部上方 |
| 通知摘要 | 标签 | 通知内容摘要 | 标题下方 |
| 通知时间 | 标签 | 通知接收时间 | 卡片右侧或底部 |
| 未读指示 | 圆点 | 红色圆点表示未读 | 卡片右上角 |
| 空状态提示 | 标签/图片 | 无通知时显示 | 内容区域 |

---

## 3. 功能需求

### FR-038-01: 显示通知列表

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-01 |
| **描述** | 系统应显示用户收到的所有通知 |
| **验收标准** | 1. **假设** 用户有通知，**当** 打开通知页面，**则** 按时间倒序显示通知列表<br>2. **假设** 通知项显示，**当** 查看详情，**则** 包含图标、标题、摘要和时间 |
| **优先级** | 必须 |

### FR-038-02: 区分通知类型

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-02 |
| **描述** | 不同类型的通知应使用不同图标和样式 |
| **验收标准** | 1. **假设** 是交易通知，**当** 显示图标，**则** 显示交易相关图标<br>2. **假设** 是安全通知，**当** 显示图标，**则** 显示安全警示图标<br>3. **假设** 是系统公告，**当** 显示图标，**则** 显示公告图标 |
| **优先级** | 应该 |

### FR-038-03: 显示未读状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-03 |
| **描述** | 未读通知应有明显的未读标识 |
| **验收标准** | 1. **假设** 通知未读，**当** 显示通知项，**则** 显示红色未读圆点<br>2. **假设** 通知已读，**当** 显示通知项，**则** 不显示未读圆点 |
| **优先级** | 必须 |

### FR-038-04: 查看通知详情

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-04 |
| **描述** | 用户可以点击通知查看完整内容 |
| **验收标准** | 1. **假设** 用户点击通知项，**当** 进入详情，**则** 显示完整通知内容<br>2. **假设** 查看后返回，**当** 通知被阅读，**则** 标记为已读 |
| **优先级** | 必须 |

### FR-038-05: 标记全部已读

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-05 |
| **描述** | 用户可以一键将所有通知标记为已读 |
| **验收标准** | 1. **假设** 有未读通知，**当** 点击"全部已读"，**则** 所有通知变为已读状态<br>2. **假设** 标记完成，**当** 查看列表，**则** 所有未读圆点消失 |
| **优先级** | 应该 |

### FR-038-06: 删除通知

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-06 |
| **描述** | 用户可以删除不需要的通知 |
| **验收标准** | 1. **假设** 用户左滑通知项，**当** 显示删除按钮，**则** 点击可删除该通知<br>2. **假设** 删除成功，**当** 列表刷新，**则** 被删除通知从列表消失 |
| **优先级** | 可以 |

### FR-038-07: 空状态处理

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-07 |
| **描述** | 无通知时应显示空状态提示 |
| **验收标准** | 1. **假设** 用户没有通知，**当** 打开通知页面，**则** 显示"暂无通知"提示<br>2. **假设** 显示空状态，**当** 用户查看，**则** 可能显示空状态插图 |
| **优先级** | 应该 |

### FR-038-08: 通知筛选功能

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-08 |
| **描述** | 用户可以按类型筛选通知 |
| **验收标准** | 1. **假设** 用户需要筛选，**当** 点击筛选按钮或切换Tab，**则** 显示筛选选项（全部/交易/安全/系统）<br>2. **假设** 用户选择筛选条件，**当** 选择"交易"，**则** 只显示交易相关通知<br>3. **假设** 筛选后无结果，**当** 显示列表，**则** 显示"该类别暂无通知"提示 |
| **优先级** | 应该 |

### FR-038-09: 通知设置入口

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-09 |
| **描述** | 提供通知设置的快捷入口 |
| **验收标准** | 1. **假设** 用户在通知页面，**当** 点击设置图标或"通知设置"链接，**则** 跳转到通知设置页面<br>2. **假设** 进入通知设置，**当** 显示，**则** 可以设置接收哪些类型的通知（交易通知、安全提醒、系统公告）<br>3. **假设** 用户关闭某类通知，**当** 保存设置，**则** 不再接收该类通知 |
| **优先级** | 应该 |

### FR-038-10: 重要通知置顶

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-10 |
| **描述** | 安全相关的重要通知应置顶显示 |
| **验收标准** | 1. **假设** 有安全风险通知（如异地登录、提现预警），**当** 显示列表，**则** 该通知置顶并高亮显示<br>2. **假设** 置顶通知，**当** 渲染，**则** 带有红色"重要"标签<br>3. **假设** 用户已读重要通知，**当** 查看后，**则** 解除置顶状态但保留高亮标记 |
| **优先级** | 应该 |

### FR-038-11: 通知快捷操作

| 字段 | 内容 |
|------|------|
| **ID** | FR-038-11 |
| **描述** | 部分通知支持快捷操作 |
| **验收标准** | 1. **假设** 是交易完成通知，**当** 显示，**则** 提供"查看详情"快捷按钮，点击跳转到交易详情<br>2. **假设** 是安全提醒通知，**当** 显示，**则** 提供"立即处理"快捷按钮，点击跳转到安全设置<br>3. **假设** 快捷按钮被点击，**当** 跳转，**则** 同时标记该通知为已读 |
| **优先级** | 应该 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户点击导航栏通知图标进入
2. 查看通知列表
3. 点击感兴趣的通知查看详情
4. 可选：标记全部已读
5. 可选：删除不需要的通知
6. 返回上一页面

### 4.2 导航流程
- **来源页面**: 钱包主页（通知入口）
- **目标页面**:
  - 点击通知: 通知详情页面或相关功能页面
  - 返回: 上一页面

### 4.3 手势与交互
| 手势 | 行为 |
|------|------|
| 点击通知项 | 查看通知详情 |
| 左滑通知项 | 显示删除按钮 |
| 点击全部已读 | 标记全部为已读 |
| 下拉 | 刷新通知列表 |
| 上滑 | 滚动列表/加载更多 |

---

## 5. 数据需求

### 5.1 显示数据
| 数据字段 | 类型 | 来源 | 格式 |
|----------|------|------|------|
| 通知列表 | Array | 服务器 | 通知对象数组 |
| 通知类型 | Enum | 通知数据 | transaction/security/system |
| 通知标题 | String | 通知数据 | 文本 |
| 通知摘要 | String | 通知数据 | 文本（可能截断） |
| 接收时间 | DateTime | 通知数据 | 相对时间或具体日期 |
| 已读状态 | Boolean | 通知数据 | true/false |
| 未读数量 | Number | 计算得出 | 整数 |

### 5.2 输入数据
| 输入字段 | 类型 | 验证规则 | 必填 |
|----------|------|----------|------|
| 无直接输入 | - | - | - |

---

## 6. 验证规则

### 6.1 时间显示规则
- 1小时内：显示"X分钟前"
- 今天内：显示"X小时前"
- 昨天：显示"昨天 HH:mm"
- 更早：显示"MM-DD HH:mm"

### 6.2 摘要截断规则
- 摘要最多显示2行
- 超出部分显示省略号

---

## 7. 技术考虑

### 7.1 数据加载
- 分页加载通知列表
- 支持下拉刷新
- 上拉加载更多

### 7.2 实时更新
- WebSocket推送新通知
- 更新未读计数
- 新通知插入列表顶部

### 7.3 本地缓存
- 缓存最近通知减少请求
- 已读状态本地同步
- 离线时显示缓存内容

### 7.4 推送集成
- 与系统推送通知关联
- 点击推送进入对应通知详情

---

## 8. 验收标准汇总

- [ ] 正确显示通知列表
- [ ] 通知按时间倒序排列
- [ ] 不同类型通知显示不同图标
- [ ] 未读通知显示红色圆点
- [ ] 点击通知可查看详情
- [ ] 查看后自动标记已读
- [ ] 全部已读按钮正常工作
- [ ] 可以删除单条通知
- [ ] 无通知时显示空状态
- [ ] 下拉可刷新列表
- [ ] 支持分页加载更多
- [ ] 返回按钮正常工作
- [ ] **支持按类型筛选通知（全部/交易/安全/系统）**
- [ ] **提供通知设置入口**
- [ ] **安全相关重要通知置顶并高亮**
- [ ] **交易通知提供"查看详情"快捷按钮**
- [ ] **安全通知提供"立即处理"快捷按钮**

---

## 9. 无障碍访问要求

- [ ] 所有文本颜色对比度符合WCAG 2.1 AA标准（最低4.5:1）
- [ ] 按钮和可交互元素最小触摸目标为44x44pt
- [ ] 支持屏幕阅读器，所有UI元素有适当的无障碍标签
- [ ] 通知列表项有role="listitem"标记
- [ ] 未读状态通过aria-label描述（如"未读通知"）
- [ ] 重要通知通过aria-live="assertive"朗读
- [ ] 筛选状态变化通过无障碍公告通知用户
- [ ] 删除操作有确认提示并支持撤销
- [ ] 支持键盘导航（适用于平板/桌面设备）
