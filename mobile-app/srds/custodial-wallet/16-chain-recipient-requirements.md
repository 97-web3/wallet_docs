# 链上转账-选择收款方页面 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-016 |
| 页面名称 | 链上转账-选择收款方页面 |
| 版本 | 1.1 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
用户选择或管理链上转账的收款方地址，支持从保存的地址列表中选择或新增收款方。

> 相关规格: [COMMON-003 区块链网络规格](../common/blockchain-networks.md)

### 地址验证说明
- **V1.0 支持网络**: TRX, BNB, ETH
- **ETH/BNB 注意**: 两者使用相同地址格式 (0x...)，需要二次确认网络选择

---

## 2. UI组件

### 2.1 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 链上转账Tab | Tab按钮 | 绿色背景高亮状态 | 顶部左侧 |
| 中部转账Tab | Tab按钮 | 深色背景未选中状态 | 顶部右侧 |
| 标题 | 文本标签 | "选择收款方" | Tab下方 |
| 关闭按钮 | 图标按钮 | X图标 | 右上角 |
| 搜索框 | 文本输入框 | 占位符"搜索"，带搜索图标 | 标题下方 |
| 列表标题 | 文本标签 | "关联钱包" | 搜索框下方 |
| 更多按钮 | 图标按钮 | 三点图标 | 列表标题右侧 |
| 地址列表 | 滚动列表 | 显示已保存的收款地址 | 主体区域 |
| 地址列表项 | 列表项 | 包含地址、名称、网络、复制图标 | 列表内 |
| 新增收款方按钮 | 主按钮 | "新增收款方"黄绿色按钮 | 底部 |

### 2.2 地址列表项组件

| 组件 | 类型 | 描述 |
|------|------|------|
| 钱包名称 | 文本标签 | 如"钱包名" |
| 地址 | 文本标签 | 省略格式的地址 |
| 复制图标 | 图标按钮 | 复制图标 |
| 网络标签 | 胶囊标签 | 如"Tron(TRC20)"黄绿色 |

---

## 3. 功能需求

### FR-CW-016-01: 收款方列表展示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-01 |
| **描述** | 显示用户保存的收款方地址列表 |
| **验收标准** | 1. **假设** 用户有保存的地址, **当** 进入页面, **则** 显示所有已保存的收款方<br>2. **假设** 每个地址项, **当** 显示, **则** 包含钱包名称、地址（省略格式）、网络标签<br>3. **假设** 用户没有保存的地址, **当** 加载, **则** 显示"暂无收款方"提示 |
| **优先级** | 必须 |

### FR-CW-016-02: 搜索收款方

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-02 |
| **描述** | 用户可以搜索已保存的收款方 |
| **验收标准** | 1. **假设** 用户输入搜索内容, **当** 输入, **则** 实时过滤匹配的收款方（按钱包名称或地址）<br>2. **假设** 搜索无结果, **当** 无匹配项, **则** 显示"未找到相关收款方" |
| **优先级** | 应该 |

### FR-CW-016-03: 复制地址

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-03 |
| **描述** | 用户可以复制收款方地址 |
| **验收标准** | 1. **假设** 用户点击复制图标, **当** 触发, **则** 复制完整地址到剪贴板<br>2. **假设** 复制成功, **当** 完成, **则** 显示"已复制"提示 |
| **优先级** | 必须 |

### FR-CW-016-04: 选择收款方

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-04 |
| **描述** | 用户选择某个收款方地址 |
| **验收标准** | 1. **假设** 用户点击某个收款方, **当** 触发, **则** 自动填充该地址到提币详情页并返回<br>2. **假设** 返回提币详情页, **当** 加载, **则** 收款地址字段已自动填入 |
| **优先级** | 必须 |

### FR-CW-016-05: 新增收款方

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-05 |
| **描述** | 用户可以添加新的收款方地址 |
| **验收标准** | 1. **假设** 用户点击"新增收款方", **当** 触发, **则** 打开添加收款方表单<br>2. **假设** 用户填写并保存, **当** 完成, **则** 新地址加入列表 |
| **优先级** | 必须 |

### FR-CW-016-06: 管理收款方

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-06 |
| **描述** | 用户可以管理收款方地址 |
| **验收标准** | 1. **假设** 用户点击更多按钮, **当** 触发, **则** 显示管理选项（编辑、删除等）<br>2. **假设** 用户删除地址, **当** 确认, **则** 从列表中移除该地址 |
| **优先级** | 应该 |

### FR-CW-016-07: ETH/BNB 地址网络确认

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-016-07 |
| **描述** | 选择 ETH 或 BNB 网络的地址时，需二次确认网络选择 |
| **验收标准** | 1. **假设** 用户选择 0x 开头的地址, **当** 当前网络为 ETH 或 BNB, **则** 弹出网络确认弹窗<br>2. **假设** 确认弹窗显示, **当** 渲染, **则** 显示警告"ETH 和 BNB Chain 使用相同的地址格式，请确认收款地址属于正确的网络"<br>3. **假设** 用户未勾选确认复选框, **当** 点击确认按钮, **则** 按钮保持禁用状态<br>4. **假设** 用户勾选确认复选框, **当** 点击确认, **则** 完成地址选择并返回 |
| **优先级** | 必须 |

> **安全提示**: 发送到错误网络可能导致资产永久丢失，二次确认可有效降低误操作风险。

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户在提币详情页点击选择收款方
2. 进入选择收款方页面
3. 可以：
   - 从列表中选择已保存的地址
   - 搜索收款方
   - 复制地址
   - 新增收款方
   - 管理现有收款方
4. 选择后返回提币详情页，地址自动填入

### 4.2 导航流程
- 提币详情页 → 选择收款方页面
- 选择收款方页面 → 提币详情页（选择地址后）
- 选择收款方页面 → 新增收款方表单

---

## 5. 数据需求

### 5.1 显示数据结构

```json
{
  "recipients": [
    {
      "id": "rec_001",
      "walletName": "钱包名",
      "address": "0x1e39c3f48asdkajshd kajs",
      "displayAddress": "0x1e39...kajs",
      "network": "Tron(TRC20)",
      "addedTime": "2025/12/5 14:44"
    }
  ]
}
```

---

## 6. 验证规则

- 地址显示：省略中间部分
- 搜索支持钱包名称和地址匹配
- 网络标签颜色：黄绿色

---

## 7. 验收标准汇总

1. ✅ 收款方列表完整显示
2. ✅ 搜索功能正常
3. ✅ 复制地址功能正常
4. ✅ 选择收款方后正确返回并填充
5. ✅ 新增收款方功能正常
6. ✅ 管理收款方功能正常
7. ✅ ETH/BNB 地址选择时弹出网络确认弹窗
8. ✅ 确认弹窗包含警告信息和确认复选框
9. ✅ 未勾选确认时无法继续
10. ✅ UI 符合设计稿

---

## 8. 相关文档

- [COMMON-003 区块链网络规格](../common/blockchain-networks.md)
