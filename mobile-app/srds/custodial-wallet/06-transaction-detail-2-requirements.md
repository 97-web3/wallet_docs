# 交易详情页面2（充值-多地址） - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-006 |
| 页面名称 | 交易详情页面2（充值-多地址） |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
展示涉及多个地址的充值交易详细信息，包括充值地址、接收地址、钱包信息、手续费、网络、交易哈希和区块确认数等完整信息。

---

## 2. UI组件

### 2.1 布局概述
深色主题界面，顶部显示交易状态和金额，中间展示充值地址和接收地址信息卡片，followed by钱包名字列表，底部为交易详细信息和客服入口。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 状态图标 | 图标 | 绿色徽章图标 | 页面上部 |
| 状态文字 | 文本标签 | "已完成"绿色 | 状态图标下方 |
| 交易金额 | 数字显示 | "+123,00 USDT"绿色 | 币种图标右侧 |
| 充值地址卡片 | 信息卡片 | 标题"充值地址"，完整地址，带复制图标 | 上部区域 |
| 接收地址卡片 | 信息卡片 | 标题"接收地址"，带"钱包名称"标签，完整地址，带复制图标 | 充值地址下方 |
| 钱包名称项1 | 列表项 | 地址省略显示，钱包名称"钱包名字"，币种"Tron(TRC20)" | 中部区域 |
| 金额1 | 文本标签 | "-123"红色 | 钱包项1右侧 |
| 钱包名称项2 | 列表项 | 地址省略显示，钱包名称"钱包名字"，币种"Tron(TRC20)" | 钱包项1下方 |
| 金额2 | 文本标签 | "+123"绿色 | 钱包项2右侧 |
| 时间行 | 信息行 | "时间: 2025/11/1 12:12:12" | 底部信息区 |
| 类型行 | 信息行 | "类型: 充值" | 时间行下方 |
| 手续费行 | 信息行 | "手续费: 0.3 TRX" | 类型行下方 |
| 网络行 | 信息行 | "网络: Tron" | 手续费行下方 |
| 交易哈希行 | 信息行 | "交易哈希: 0x1e39c3f480x...x1e3"，带复制图标 | 网络行下方 |
| 区块确认数行 | 信息行 | "区块确认数: 123,123" | 交易哈希行下方 |
| 浏览器链接 | 文本链接 | "在区块链浏览器中查看"绿色 | 底部 |
| 客服提示卡片 | 提示卡片 | 警告图标，客服说明文字 | 最底部 |

---

## 3. 功能需求

### FR-CW-006-01: 多地址显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-006-01 |
| **描述** | 清晰展示充值地址和接收地址信息 |
| **验收标准** | 1. **假设** 交易涉及多个地址, **当** 显示详情, **则** 分别显示充值地址卡片和接收地址卡片<br>2. **假设** 接收地址有关联钱包, **当** 显示卡片, **则** 显示"钱包名称"标签<br>3. **假设** 用户点击地址复制图标, **当** 触发点击, **则** 复制完整地址到剪贴板 |
| **优先级** | 必须 |

### FR-CW-006-02: 钱包流转信息

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-006-02 |
| **描述** | 显示资金在多个钱包间的流转情况 |
| **验收标准** | 1. **假设** 资金涉及多个钱包, **当** 显示流转, **则** 列出所有相关钱包地址和名称<br>2. **假设** 显示钱包项, **当** 渲染, **则** 显示地址省略格式、钱包名称、网络类型<br>3. **假设** 资金流出, **当** 显示金额, **则** 以红色显示负数（如"-123"）<br>4. **假设** 资金流入, **当** 显示金额, **则** 以绿色显示正数（如"+123"） |
| **优先级** | 必须 |

### FR-CW-006-03: 手续费显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-006-03 |
| **描述** | 显示交易产生的手续费 |
| **验收标准** | 1. **假设** 交易有手续费, **当** 显示手续费行, **则** 显示手续费金额和币种单位（如"0.3 TRX"）<br>2. **假设** 交易无手续费, **当** 显示, **则** 显示"0"或"免费" |
| **优先级** | 必须 |

### FR-CW-006-04: 网络信息

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-006-04 |
| **描述** | 显示交易所在的区块链网络 |
| **验收标准** | 1. **假设** 显示网络信息, **当** 渲染, **则** 显示网络名称（如"Tron"、"Ethereum"、"BSC"等）<br>2. **假设** 不同网络, **当** 显示, **则** 对应不同的区块链浏览器链接 |
| **优先级** | 必须 |

### FR-CW-006-05: 区块确认数

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-006-05 |
| **描述** | 显示交易的区块确认数 |
| **验收标准** | 1. **假设** 交易已上链, **当** 显示确认数, **则** 显示当前的区块确认数（如"123,123"）<br>2. **假设** 交易待确认, **当** 显示, **则** 显示"待确认"或"0"<br>3. **假设** 确认数不断增加, **当** 轮询更新, **则** 实时更新显示的确认数 |
| **优先级** | 应该 |

### FR-CW-006-06: 复制功能

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-006-06 |
| **描述** | 用户可以复制各类地址和哈希 |
| **验收标准** | 1. **假设** 用户点击充值地址复制图标, **当** 触发, **则** 复制充值地址到剪贴板<br>2. **假设** 用户点击接收地址复制图标, **当** 触发, **则** 复制接收地址到剪贴板<br>3. **假设** 用户点击交易哈希复制图标, **当** 触发, **则** 复制交易哈希到剪贴板<br>4. **假设** 复制成功, **当** 完成操作, **则** 显示"已复制"提示 |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户从交易记录列表点击涉及多地址的充值交易
2. 查看充值地址和接收地址信息
3. 查看资金在钱包间的流转情况
4. 查看手续费、网络、区块确认数等详细信息
5. 可选操作：复制地址、复制哈希、在区块链浏览器查看、联系客服

### 4.2 导航流程
- 交易记录列表 → 交易详情页2
- 交易详情页2 → 区块链浏览器（外部）
- 交易详情页2 → 客服页面

### 4.3 手势与交互
- **点击**：复制图标、链接支持点击
- **滚动**：页面支持垂直滚动

---

## 5. 数据需求

### 5.1 显示数据结构

```json
{
  "transactionId": "1231231",
  "status": "completed",
  "coinId": "USDT",
  "amount": "123.00",
  "depositAddress": "0x1e39c3f480x1e39c3f480x1e39c3f480x1e39c3f480x1e39c3f480x1e39c3f480x1e3",
  "receiveAddress": "0x1e39c3f480x1e39c3f480x1e39c3f480x1e39c3f480x1e39c3f480x1e39c3f480x1e3",
  "walletName": "钱包名称",
  "wallets": [
    {
      "address": "0x1e39...0x1e",
      "name": "钱包名字",
      "network": "Tron(TRC20)",
      "amount": "-123"
    },
    {
      "address": "0x1e39...0x1e",
      "name": "钱包名字",
      "network": "Tron(TRC20)",
      "amount": "+123"
    }
  ],
  "timestamp": "2025-11-01T12:12:12Z",
  "type": "充值",
  "fee": "0.3",
  "feeCurrency": "TRX",
  "network": "Tron",
  "txHash": "0x1e39c3f480x...x1e3",
  "confirmations": 123123,
  "explorerUrl": "https://tronscan.org/#/transaction/0x..."
}
```

---

## 6. 验证规则

### 6.1 地址显示
- 充值地址和接收地址：完整显示
- 钱包列表地址：省略中间部分
- 交易哈希：省略中间部分

### 6.2 金额显示
- 流出金额：红色，带"-"
- 流入金额：绿色，带"+"
- 使用千位分隔符

---

## 7. 技术考虑

### 7.1 数据更新
- 区块确认数定时轮询更新（如每30秒）
- 交易状态实时监控

### 7.2 性能优化
- 地址数据缓存
- 减少不必要的API调用

---

## 8. 验收标准汇总

1. ✅ 充值地址和接收地址正确显示
2. ✅ 钱包流转信息清晰展示
3. ✅ 流入流出金额颜色正确
4. ✅ 手续费正确显示
5. ✅ 网络信息正确
6. ✅ 区块确认数实时更新
7. ✅ 所有复制功能正常
8. ✅ 区块链浏览器链接可用
9. ✅ 客服入口可用
10. ✅ UI完全符合设计稿
