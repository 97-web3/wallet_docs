# FaceID扫描中 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-025 |
| 页面名称 | FaceID扫描中 |
| 版本 | 1.0 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
FaceID扫描中状态页面显示面部识别正在进行的动画反馈。FaceID图标显示扫描动画效果，提示用户保持面向设备，等待验证完成。

---

## 2. UI组件

### 2.1 布局概述
页面延续FaceID验证弹窗布局，FaceID图标区域显示扫描动画（如线条扫描效果），表示正在进行面部识别。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 背景遮罩 | 视图 | 半透明深色背景 | 全屏 |
| 验证卡片 | 容器 | 圆角卡片 | 屏幕中央 |
| 应用图标 | 图片 | 应用Logo | 卡片顶部 |
| 扫描动画 | 动画图标 | FaceID图标带扫描线动画 | 应用图标下方 |
| 扫描标题 | 标签 | "Face ID" | 图标下方 |
| 扫描提示 | 标签 | "正在验证..."或"请看向设备" | 标题下方 |
| 取消按钮 | 按钮 | "取消"文字按钮 | 卡片底部 |

---

## 3. 功能需求

### FR-025-01: 显示扫描进行中状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-025-01 |
| **描述** | 系统应在FaceID扫描过程中显示进行中的动画反馈 |
| **验收标准** | 1. **假设** 用户触发FaceID验证，**当** 开始面部扫描，**则** 显示扫描动画效果<br>2. **假设** 扫描进行中，**当** 用户查看界面，**则** 动画清晰表明正在验证 |
| **优先级** | 必须 |

### FR-025-02: 扫描动画效果

| 字段 | 内容 |
|------|------|
| **ID** | FR-025-02 |
| **描述** | FaceID图标应显示动态扫描动画 |
| **验收标准** | 1. **假设** 扫描开始，**当** 显示动画，**则** 线条在面部图标上下移动扫描<br>2. **假设** 动画播放，**当** 用户观察，**则** 动画流畅无卡顿 |
| **优先级** | 应该 |

### FR-025-03: 扫描状态提示

| 字段 | 内容 |
|------|------|
| **ID** | FR-025-03 |
| **描述** | 页面应显示当前扫描状态的文字提示 |
| **验收标准** | 1. **假设** 扫描进行中，**当** 用户查看提示，**则** 显示"正在验证"或类似提示<br>2. **假设** 需要调整位置，**当** 系统检测到，**则** 提示用户调整面部位置 |
| **优先级** | 应该 |

### FR-025-04: 允许取消扫描

| 字段 | 内容 |
|------|------|
| **ID** | FR-025-04 |
| **描述** | 用户可以在扫描过程中取消验证 |
| **验收标准** | 1. **假设** 扫描进行中，**当** 用户点击取消，**则** 停止扫描并关闭弹窗<br>2. **假设** 取消扫描，**当** 返回原页面，**则** 敏感操作不执行 |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户触发FaceID验证
2. 系统显示扫描动画
3. 用户保持面向设备
4. 等待扫描完成
5. 进入成功或失败状态

### 4.2 导航流程
- **来源状态**: FaceID验证触发
- **目标状态**:
  - 扫描成功: 验证成功状态
  - 扫描失败: 验证失败/重试状态
  - 用户取消: 返回原页面

### 4.3 手势与交互
| 手势 | 行为 |
|------|------|
| 面向设备 | 进行面部扫描 |
| 点击取消 | 取消扫描流程 |

---

## 5. 数据需求

### 5.1 显示数据
| 数据字段 | 类型 | 来源 | 格式 |
|----------|------|------|------|
| 扫描动画 | Animation | 系统资源 | Lottie/原生动画 |
| 状态提示 | String | 系统配置 | 本地化文本 |

### 5.2 输入数据
| 输入字段 | 类型 | 验证规则 | 必填 |
|----------|------|----------|------|
| 面部图像 | Biometric | 系统FaceID处理 | 是 |

---

## 6. 验证规则

### 6.1 扫描超时
- 扫描超时时间由系统控制（通常为30秒）
- 超时后显示失败状态

### 6.2 错误处理
| 错误场景 | 处理方式 |
|----------|----------|
| 面部检测失败 | 提示调整位置 |
| 光线不足 | 提示改善光线条件 |
| 扫描超时 | 显示超时提示，允许重试 |

---

## 7. 技术考虑

### 7.1 动画实现
- 使用系统原生FaceID扫描动画
- 备选方案：自定义Lottie动画

### 7.2 实时反馈
- 根据系统回调更新扫描状态
- 处理面部检测的中间状态

### 7.3 性能优化
- 动画帧率保持60fps
- 不阻塞主线程

---

## 8. 验收标准汇总

- [ ] 扫描开始时显示动画
- [ ] 扫描动画流畅无卡顿
- [ ] 显示当前状态提示文字
- [ ] 取消按钮在扫描中可用
- [ ] 扫描完成后正确切换状态
- [ ] 超时情况正确处理
