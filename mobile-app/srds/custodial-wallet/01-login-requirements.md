# 登录页面 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-001 |
| 页面名称 | 登录页面 |
| 版本 | 1.1 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
用户登录或注册中心化钱包账户的入口页面，支持Google账号登录和验证码登录两种方式。

---

## 2. UI组件

### 2.1 布局概述
深色主题界面，顶部显示品牌Logo和欢迎文字，中间为主要登录功能区，底部为用户协议同意条款。页面采用渐变背景，配以装饰性的加密货币图标元素。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| Logo区域 | 图片容器 | 显示应用Logo（白色圆角方块，标注"LOGO"） | 页面上部中央 |
| 欢迎标语 | 文本标签 | "欢迎使用您的 数字钱包"，数字钱包为亮色强调 | Logo下方 |
| 产品标识 | 文本标签 | "XXXXXXXXX"占位符文字 | 欢迎标语下方 |
| Google登录按钮 | 按钮 | 带Google图标的深色按钮，文字"使用Google 账号登录" | 主要操作区顶部 |
| 分隔线 | 分隔符 | "或使用验证码登陆"文字分隔线 | Google按钮下方 |
| 账号输入框 | 文本输入框 | 占位符"请输入＞邮箱或手机号"，深色背景 | 验证码登录区域 |
| 验证码输入框 | 文本输入框 | 占位符"请输入＞6位验证码" | 账号输入框下方 |
| 发送验证码按钮 | 按钮 | 绿色按钮，文字"发送验证码" | 验证码输入框右侧 |
| 立即登录按钮 | 主按钮 | 深色主按钮，文字"立即登录" | 验证码输入区域下方 |
| 提示文本 | 文本标签 | "首次登陆将自动创建账户" | 登录按钮下方 |
| 协议同意文本 | 超链接文本 | "登录即表示同意 用户协议 和 隐私政策" | 页面底部 |
| 装饰元素 | 图标 | 浮动的加密货币图标装饰 | 背景层 |

---

## 3. 功能需求

### FR-CW-001-01: Google账号快速登录

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-01 |
| **描述** | 用户可通过Google账号进行快速登录或注册 |
| **验收标准** | 1. **假设** 用户在登录页面, **当** 点击"使用Google账号登录"按钮, **则** 系统打开Google授权页面<br>2. **假设** 用户完成Google授权, **当** 授权成功, **则** 系统自动创建账户（首次）或直接登录（已有账户）<br>3. **假设** Google授权失败, **当** 用户取消或授权异常, **则** 系统显示错误提示并返回登录页 |
| **优先级** | 应该 |

### FR-CW-001-02: 验证码登录

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-02 |
| **描述** | 用户可通过邮箱或手机号配合验证码进行登录 |
| **验收标准** | 1. **假设** 用户在账号输入框输入有效的邮箱或手机号, **当** 点击"发送验证码", **则** 系统发送6位验证码到指定账号<br>2. **假设** 验证码已发送, **当** 用户在60秒内, **则** "发送验证码"按钮显示倒计时不可点击<br>3. **假设** 用户输入完整的账号和验证码, **当** 点击"立即登录", **则** 系统验证信息并登录成功<br>4. **假设** 验证码错误, **当** 用户提交, **则** 显示"验证码错误"提示 |
| **优先级** | 必须 |

### FR-CW-001-03: 账号输入验证

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-03 |
| **描述** | 系统验证用户输入的账号格式是否正确 |
| **验收标准** | 1. **假设** 用户输入邮箱, **当** 格式不正确, **则** 输入框显示红色错误提示<br>2. **假设** 用户输入手机号, **当** 格式不符合规范, **则** 显示格式错误提示<br>3. **假设** 账号输入框为空, **当** 点击"发送验证码", **则** 按钮不可用或提示"请输入账号" |
| **优先级** | 必须 |

### FR-CW-001-04: 自动创建账户

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-04 |
| **描述** | 首次登录的用户自动创建新账户 |
| **验收标准** | 1. **假设** 用户首次使用该账号登录, **当** 验证成功, **则** 系统自动创建新的钱包账户<br>2. **假设** 账户创建成功, **当** 完成初始化, **则** 直接进入钱包主页面<br>3. **假设** 用户已有账户, **当** 登录验证成功, **则** 直接进入现有账户主页 |
| **优先级** | 必须 |

### FR-CW-001-05: 用户协议同意

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-05 |
| **描述** | 用户登录即表示同意用户协议和隐私政策 |
| **验收标准** | 1. **假设** 用户点击"用户协议"链接, **当** 触发点击事件, **则** 打开用户协议详情页<br>2. **假设** 用户点击"隐私政策"链接, **当** 触发点击事件, **则** 打开隐私政策详情页<br>3. **假设** 用户完成登录, **当** 成功进入系统, **则** 视为已同意相关条款 |
| **优先级** | 必须 |

### FR-CW-001-06: 登录失败次数限制与锁定（安全关键）

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-06 |
| **描述** | 系统应限制登录失败次数，超过限制后锁定账户并显示明确的解锁时间 |
| **验收标准** | 1. **假设** 用户验证码错误，**当** 显示错误，**则** 同时显示剩余尝试次数（如"验证码错误，剩余4次尝试"）<br>2. **假设** 连续失败4次，**当** 再次失败，**则** 显示警告"这是最后一次尝试机会"<br>3. **假设** 连续失败5次，**当** 达到限制，**则** 锁定登录功能并显示倒计时（如"账户已锁定，请15:00后再试"）<br>4. **假设** 账户被锁定，**当** 显示锁定状态，**则** 显示实时倒计时器（mm:ss格式）直到解锁<br>5. **假设** 倒计时结束，**当** 解锁，**则** 自动恢复登录功能，失败次数重置 |
| **优先级** | **必须（安全关键）** |

> **安全说明**：账户锁定机制防止暴力破解攻击。显示剩余尝试次数帮助合法用户了解状态。

### FR-CW-001-07: 验证码发送限制与显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-07 |
| **描述** | 系统应限制验证码发送频率和每日发送次数 |
| **验收标准** | 1. **假设** 用户点击发送验证码，**当** 发送成功，**则** 按钮显示60秒实时倒计时（如"重新发送(59s)"）<br>2. **假设** 倒计时进行中，**当** 每秒更新，**则** 数字实时递减显示<br>3. **假设** 用户当日发送次数达到限制（如10次），**当** 再次点击，**则** 显示"今日发送次数已达上限，请明日再试"<br>4. **假设** 发送次数接近限制，**当** 发送成功，**则** 显示剩余次数（如"今日剩余3次"） |
| **优先级** | **必须** |

### FR-CW-001-08: Google OAuth确认显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-08 |
| **描述** | Google登录授权成功后显示确认信息 |
| **验收标准** | 1. **假设** 用户完成Google授权，**当** 返回应用，**则** 显示确认信息"您正在使用 [email@gmail.com] 登录"<br>2. **假设** 首次Google登录，**当** 自动创建账户，**则** 显示"已为您创建新账户"提示<br>3. **假设** Google授权返回，**当** 显示确认，**则** 提供"继续"和"使用其他账户"选项 |
| **优先级** | 应该 |

### FR-CW-001-09: 会话超时处理

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-001-09 |
| **描述** | 会话即将过期时提前警告用户 |
| **验收标准** | 1. **假设** 会话即将过期（如剩余1分钟），**当** 检测到，**则** 显示弹窗"会话即将过期，是否继续？"<br>2. **假设** 用户点击"继续"，**当** 触发，**则** 刷新会话延长有效期<br>3. **假设** 用户未响应，**当** 会话过期，**则** 自动登出并显示"会话已过期，请重新登录"<br>4. **假设** 自动登出发生，**当** 显示提示，**则** 跳转到登录页面 |
| **优先级** | 应该 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户打开应用，看到登录页面
2. 用户选择登录方式：
   - **方式A：Google登录** → 点击Google按钮 → Google授权 → 登录成功
   - **方式B：验证码登录** → 输入邮箱/手机号 → 发送验证码 → 输入验证码 → 点击立即登录 → 登录成功
3. 首次登录自动创建账户
4. 登录成功后进入钱包主页

### 4.2 导航流程
- 登录页面 → Google授权页面（如选择Google登录）
- 登录页面 → 钱包主页（登录成功）
- 协议链接 → 用户协议/隐私政策详情页

### 4.3 手势与交互
- **点击**：所有按钮和链接支持点击操作
- **输入**：账号和验证码输入框支持键盘输入
- **复制粘贴**：验证码输入框支持粘贴功能

---

## 5. 数据需求

### 5.1 显示数据
- Logo图片资源
- 欢迎文字和品牌标识
- 输入框占位符文本
- 用户协议和隐私政策链接

### 5.2 输入数据
| 字段名称 | 数据类型 | 必填 | 验证规则 | 说明 |
|---------|---------|------|---------|------|
| 账号 | String | 是 | 邮箱格式或手机号格式 | 支持邮箱或手机号 |
| 验证码 | String | 是 | 6位数字 | 系统发送的验证码 |

---

## 6. 验证规则

### 6.1 账号验证
- **邮箱格式**：符合标准邮箱格式（包含@和域名）
- **手机号格式**：符合国家/地区手机号规范（可能需要区号）
- **非空验证**：账号字段不能为空

### 6.2 验证码验证
- **长度**：必须为6位
- **类型**：仅数字
- **有效期**：验证码有效期5-10分钟
- **发送频率**：同一账号60秒内只能发送一次

### 6.3 按钮状态
- 账号为空时，"发送验证码"按钮置灰
- 验证码发送后，按钮进入60秒倒计时状态
- 账号和验证码都填写后，"立即登录"按钮可点击

---

## 7. 技术考虑

### 7.1 第三方集成
- **Google OAuth 2.0**：集成Google登录SDK
- **短信/邮件服务**：集成验证码发送服务商API

### 7.2 安全性
- 验证码采用随机生成，不可预测
- 登录token使用安全加密存储
- 支持HTTPS加密传输
- 实施防暴力破解机制（限制登录尝试次数）

### 7.3 性能
- 页面加载时间 < 2秒
- 验证码发送响应时间 < 3秒
- Google授权响应时间取决于Google服务

### 7.4 兼容性
- 支持iOS和Android平台
- 适配不同屏幕尺寸
- 支持深色/浅色主题切换

---

## 8. 验收标准汇总

1. ✅ Google登录功能正常，可成功授权并登录
2. ✅ 验证码登录流程完整，可正常接收和验证
3. ✅ 账号格式验证准确，错误格式有明确提示
4. ✅ 首次登录自动创建账户功能正常
5. ✅ 验证码发送频率限制生效（60秒倒计时）
6. ✅ 用户协议和隐私政策链接可正常打开
7. ✅ 所有输入框和按钮交互正常
8. ✅ 页面UI符合设计稿，深色主题渲染正确
9. ✅ 错误提示信息清晰友好
10. ✅ 登录成功后正确跳转到钱包主页
11. ✅ **登录失败时显示剩余尝试次数**
12. ✅ **5次失败后显示账户锁定倒计时（mm:ss格式）**
13. ✅ **验证码倒计时实时更新显示**
14. ✅ **显示每日验证码剩余发送次数**
15. ✅ **Google登录后显示使用的账户邮箱确认**
16. ✅ **会话即将过期时显示续期提示**

---

## 9. 无障碍访问要求

- [ ] 所有文本颜色对比度符合WCAG 2.1 AA标准（最低4.5:1）
- [ ] 按钮和可交互元素最小触摸目标为44x44pt
- [ ] 支持屏幕阅读器，所有UI元素有适当的无障碍标签
- [ ] 输入框有明确的aria-label描述（如"邮箱或手机号输入框"）
- [ ] 错误提示通过无障碍公告通知用户（aria-live="polite"）
- [ ] 倒计时状态变化通过VoiceOver朗读
- [ ] 验证码输入框支持从剪贴板粘贴
- [ ] 协议链接有明确的无障碍标签
- [ ] 支持键盘导航（适用于平板/桌面设备）
- [ ] 登录按钮在键盘弹出时仍可见
