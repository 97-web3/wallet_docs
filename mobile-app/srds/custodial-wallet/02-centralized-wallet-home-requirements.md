# 中心化钱包主页 - 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | CW-002 |
| 页面名称 | 中心化钱包主页 |
| 版本 | 1.1 |
| 更新日期 | 2025-12-08 |
| 状态 | 草稿 |

### 功能描述
中心化钱包的核心页面，展示用户资产总览、主要操作入口和资产列表，用户可以查看总资产价值和各种加密货币的持仓情况。

---

## 2. UI组件

### 2.1 布局概述
页面采用深色主题，顶部为用户信息和消息通知，中间为总资产显示和快捷操作按钮区，下方为资产列表，底部为Tab导航栏。

### 2.2 组件详情

| 组件 | 类型 | 描述 | 位置 |
|------|------|------|------|
| 用户头像 | 图片按钮 | 圆形用户头像 | 左上角 |
| 用户名 | 文本标签 | 显示"用户名" | 头像右侧 |
| UID | 文本标签 | 显示"UID: 123455" | 用户名下方 |
| 消息图标 | 图标按钮 | 带红色数字徽章"99"的消息图标 | 右上角 |
| 总资产标题 | 文本标签 | "总资产估值"文字，带眼睛图标（显示/隐藏） | 用户信息下方 |
| 总资产金额 | 数字显示 | "96,666.00"大号字体显示 | 总资产标题下方 |
| 货币单位选择器 | 下拉选择器 | "USD ▼" | 总资产金额右侧 |
| 涨跌百分比 | 文本标签 | "+0.02%"绿色显示 | 金额右侧 |
| 充值按钮 | 圆形图标按钮 | 充值图标，文字"充值" | 快捷操作区左侧 |
| 提现按钮 | 圆形图标按钮 | 提现图标，文字"提现" | 快捷操作区中间 |
| 交易记录按钮 | 圆形图标按钮 | 交易记录图标，文字"交易记录" | 快捷操作区右侧 |
| 资产标题 | 文本标签 | "资产"文字 | 资产列表上方左侧 |
| 查看更多链接 | 文本链接 | "查看更多"，带箭头 | 资产列表上方右侧 |
| 资产列表项 | 列表卡片 | 显示币种图标、名称、数量和价值 | 资产区域 |
| 底部导航栏 | Tab导航 | "资产"、"web3钱包"、"我的"三个Tab | 页面底部 |

### 2.3 资产列表项组件

| 组件 | 类型 | 描述 |
|------|------|------|
| 币种图标 | 图片 | 圆形币种Logo |
| 币种名称 | 文本标签 | 如"USDT"大号字体 |
| 币种全称 | 文本标签 | 如"Tether"小号灰色字体 |
| 数量 | 数字显示 | 如"1,428.00"右对齐 |
| 等值价格 | 数字显示 | 如"≈ ¥10000.00"灰色小字 |

---

## 3. 功能需求

### FR-CW-002-01: 总资产显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-01 |
| **描述** | 在主页顶部显示用户所有资产的总估值 |
| **验收标准** | 1. **假设** 用户登录成功, **当** 进入主页, **则** 系统计算并显示所有资产的总估值<br>2. **假设** 用户持有多种加密货币, **当** 资产价格波动, **则** 总资产实时更新<br>3. **假设** 用户点击眼睛图标, **当** 触发点击, **则** 切换总资产显示/隐藏状态 |
| **优先级** | 必须 |

### FR-CW-002-02: 货币单位切换

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-02 |
| **描述** | 用户可以切换总资产显示的法币单位 |
| **验收标准** | 1. **假设** 用户点击货币单位下拉框, **当** 选择不同货币（USD/CNY/EUR等）, **则** 总资产金额按选择的货币换算并显示<br>2. **假设** 切换货币单位, **当** 更新显示, **则** 资产列表中的等值价格也同步更新<br>3. **假设** 用户选择了货币单位, **当** 下次登录, **则** 保持用户上次选择的货币单位 |
| **优先级** | 必须 |

### FR-CW-002-03: 涨跌百分比显示（无障碍增强）

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-03 |
| **描述** | 显示总资产相对于上个时间周期的涨跌幅，同时使用颜色和符号表示 |
| **验收标准** | 1. **假设** 总资产上涨, **当** 计算涨跌幅, **则** 以绿色显示正百分比，并附带上箭头（如"↑ +0.02%"）<br>2. **假设** 总资产下跌, **当** 计算涨跌幅, **则** 以红色显示负百分比，并附带下箭头（如"↓ -1.5%"）<br>3. **假设** 总资产无变化, **当** 涨跌幅为0, **则** 显示"0.00%"灰色<br>4. **假设** 用户使用屏幕阅读器, **当** 朗读涨跌幅, **则** 完整朗读"上涨0.02%"或"下跌1.5%" |
| **优先级** | 应该 |

> **无障碍说明**：仅使用颜色无法让色盲用户或使用屏幕阅读器的用户区分涨跌。添加箭头符号和明确的文字描述确保所有用户都能理解资产变化情况。

### FR-CW-002-04: 快捷操作入口

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-04 |
| **描述** | 提供充值、提现、交易记录三个快捷操作入口 |
| **验收标准** | 1. **假设** 用户点击"充值"按钮, **当** 触发点击, **则** 跳转到充币选择币种页面<br>2. **假设** 用户点击"提现"按钮, **当** 触发点击, **则** 跳转到提币选择币种页面<br>3. **假设** 用户点击"交易记录"按钮, **当** 触发点击, **则** 跳转到交易记录列表页面 |
| **优先级** | 必须 |

### FR-CW-002-05: 资产列表显示

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-05 |
| **描述** | 展示用户持有的各种加密货币资产列表 |
| **验收标准** | 1. **假设** 用户持有多种币种, **当** 加载主页, **则** 显示前5种资产（可滚动查看更多）<br>2. **假设** 用户点击某个币种, **当** 触发点击, **则** 跳转到该币种详情页<br>3. **假设** 用户点击"查看更多", **当** 触发点击, **则** 显示完整资产列表<br>4. **假设** 用户资产为空, **当** 无持仓, **则** 显示"暂无资产"提示 |
| **优先级** | 必须 |

### FR-CW-002-06: 消息通知

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-06 |
| **描述** | 显示未读消息数量并提供消息中心入口 |
| **验收标准** | 1. **假设** 用户有未读消息, **当** 加载主页, **则** 消息图标显示红色徽章和数字<br>2. **假设** 未读消息超过99条, **当** 显示徽章, **则** 显示"99+"<br>3. **假设** 用户点击消息图标, **当** 触发点击, **则** 跳转到消息中心 |
| **优先级** | 应该 |

### FR-CW-002-07: 用户信息入口

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-07 |
| **描述** | 显示用户基本信息并提供个人中心入口 |
| **验收标准** | 1. **假设** 用户已登录, **当** 进入主页, **则** 显示用户头像、用户名和UID<br>2. **假设** 用户点击用户信息区域, **当** 触发点击, **则** 跳转到个人中心或设置页面<br>3. **假设** 用户未设置头像, **当** 显示头像, **则** 使用默认头像 |
| **优先级** | 必须 |

### FR-CW-002-08: 底部导航

| 字段 | 内容 |
|------|------|
| **ID** | FR-CW-002-08 |
| **描述** | 提供主要功能模块的导航切换 |
| **验收标准** | 1. **假设** 当前在"资产"页面, **当** 显示导航栏, **则** "资产"Tab高亮显示<br>2. **假设** 用户点击"web3钱包"Tab, **当** 触发点击, **则** 切换到web3钱包页面<br>3. **假设** 用户点击"我的"Tab, **当** 触发点击, **则** 切换到个人中心页面 |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户工作流
1. 用户登录后进入钱包主页
2. 查看总资产和涨跌情况
3. 可选操作：
   - 点击眼睛图标隐藏/显示资产金额
   - 切换货币单位查看不同法币价值
   - 点击快捷按钮进行充值/提现/查看交易记录
   - 点击资产列表项查看币种详情
   - 点击查看更多查看完整资产列表
   - 点击消息图标查看通知
   - 切换底部Tab导航到其他功能模块

### 4.2 导航流程
- 主页 → 充币选择币种页面（点击充值）
- 主页 → 提币选择币种页面（点击提现）
- 主页 → 交易记录列表页面（点击交易记录）
- 主页 → 币种详情页面（点击资产列表项）
- 主页 → 消息中心（点击消息图标）
- 主页 → Web3钱包页面（点击web3钱包Tab）
- 主页 → 个人中心（点击我的Tab或用户信息区域）

### 4.3 手势与交互
- **点击**：所有按钮、列表项、Tab支持点击
- **滚动**：资产列表支持垂直滚动
- **下拉刷新**：主页支持下拉刷新资产数据
- **长按**：资产列表项支持长按显示更多操作（可选）

---

## 5. 数据需求

### 5.1 显示数据

| 数据项 | 数据类型 | 来源 | 更新频率 |
|--------|---------|------|---------|
| 用户头像 | Image URL | 用户服务 | 静态/用户更新 |
| 用户名 | String | 用户服务 | 静态 |
| UID | String | 用户服务 | 静态 |
| 未读消息数 | Integer | 消息服务 | 实时 |
| 总资产估值 | Decimal | 资产服务 | 实时/定时刷新 |
| 涨跌百分比 | Decimal | 资产服务 | 实时/定时刷新 |
| 选择的货币单位 | String | 用户偏好设置 | 静态/用户更新 |
| 资产列表 | Array | 资产服务 | 实时/定时刷新 |

### 5.2 资产列表数据结构

```json
{
  "coinId": "USDT",
  "coinName": "USDT",
  "fullName": "Tether",
  "iconUrl": "https://...",
  "balance": "1428.00",
  "fiatValue": "10000.00",
  "fiatCurrency": "CNY"
}
```

---

## 6. 验证规则

### 6.1 数据有效性
- 总资产金额精度：小数点后2位
- 涨跌百分比精度：小数点后2位
- 资产数量显示：根据币种精度动态调整（如BTC 8位，USDT 2位）

### 6.2 显示规则
- 金额使用千位分隔符（如96,666.00）
- 涨跌百分比带符号（正数显示"+"，负数显示"-"）
- 未读消息超过99显示"99+"
- 资产为0的币种可选择性隐藏

### 6.3 刷新策略
- 进入页面时自动加载最新数据
- 资产价格每30秒自动刷新一次
- 支持用户手动下拉刷新

---

## 7. 技术考虑

### 7.1 性能优化
- 资产列表虚拟滚动（持有币种较多时）
- 图片懒加载和缓存
- 价格数据采用WebSocket实时推送

### 7.2 数据安全
- 总资产显示支持隐私模式（眼睛图标）
- 敏感数据加密传输
- 本地存储加密处理

### 7.3 兼容性
- 支持不同屏幕尺寸适配
- 支持深色/浅色主题
- 支持多语言国际化

### 7.4 容错处理
- 网络异常时显示缓存数据
- API请求失败时显示友好提示
- 价格数据异常时显示"--"占位符

---

## 8. 验收标准汇总

1. ✅ 总资产正确计算并显示，支持实时更新
2. ✅ 货币单位切换功能正常，换算准确
3. ✅ 涨跌百分比计算正确，颜色显示符合规范
4. ✅ 充值、提现、交易记录三个快捷入口跳转正常
5. ✅ 资产列表显示完整，点击可进入详情页
6. ✅ 消息通知徽章显示正确，点击可进入消息中心
7. ✅ 用户信息显示完整，头像、用户名、UID正确
8. ✅ 底部Tab导航功能正常，页面切换流畅
9. ✅ 眼睛图标切换资产显示/隐藏功能正常
10. ✅ 下拉刷新功能正常，数据更新及时
11. ✅ 页面加载性能良好，无明显卡顿
12. ✅ UI完全符合设计稿，深色主题渲染正确
13. ✅ **涨跌百分比同时使用颜色和箭头符号表示**
14. ✅ **空资产状态提供引导操作（如"立即充值"）**
15. ✅ **眼睛图标有明确的状态提示（显示/隐藏）**

---

## 9. 无障碍访问要求

- [ ] 所有文本颜色对比度符合WCAG 2.1 AA标准（最低4.5:1）
- [ ] 按钮和可交互元素最小触摸目标为44x44pt
- [ ] 支持屏幕阅读器，所有UI元素有适当的无障碍标签
- [ ] 涨跌百分比不仅用颜色，还需使用箭头符号（↑/↓）
- [ ] 眼睛图标有明确的aria-label（如"隐藏资产金额"或"显示资产金额"）
- [ ] 资产列表项有明确的role="listitem"和aria-label
- [ ] 下拉刷新操作有无障碍提示
- [ ] 底部导航Tab有明确的aria-selected状态
- [ ] 消息徽章数字可被屏幕阅读器朗读
- [ ] 支持键盘导航（适用于平板/桌面设备）
