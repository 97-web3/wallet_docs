# 验证助记词状态页（验证失败）- 软件需求规格说明书

## 1. 页面标识

| 属性 | 值 |
|------|-----|
| 页面ID | verify-mnemonic-status |
| 页面名称 | 验证助记词状态页（验证失败） |
| 版本 | 2.0 |
| 更新日期 | 2025-12-09 |
| 状态 | 更新 |

### 功能描述

当用户验证助记词失败时显示错误状态，高亮标记错误的输入框，引导用户重新输入或返回重新备份。

> 相关规格: [24-verify-mnemonic-1-requirements.md](./24-verify-mnemonic-1-requirements.md) | [COMMON-006 术语表](../common/glossary.md)

### 版本变更

| 版本 | 说明 |
|------|------|
| 1.0 | 12个助记词选择的错误状态 |
| **2.0** | **3个助记词输入的错误状态** |

---

## 2. UI组件

### 2.1 布局概述

页面布局与验证助记词页相同，但在输入区域上方显示错误提示，错误的输入框以红色边框标记。

### 2.2 组件详情

| 组件名称 | 组件类型 | 位置 | 描述 |
|---------|---------|------|------|
| 返回按钮 | 按钮（图标） | 顶部左侧 | 返回上一页面 |
| 页面标题 | 文本标签 | 顶部中央 | "验证助记词" |
| 说明文字 | 文本段落 | 标题下方 | 验证说明文字 |
| 错误提示横幅 | 提示组件 | 说明下方 | 红色背景，显示"验证失败，请检查输入" |
| 验证卡片1 | 卡片组件 | 中上部 | 第1个助记词输入区域 |
| 位置标签1 | 文本标签 | 卡片内左上 | "第 X 个单词" |
| 输入框1 | 文本输入框 | 卡片内 | 正确时正常，错误时红色边框 |
| 错误标记1 | 图标 | 输入框右侧 | 红色X图标（仅错误时显示） |
| 验证卡片2 | 卡片组件 | 中部 | 第2个助记词输入区域 |
| 验证卡片3 | 卡片组件 | 中下部 | 第3个助记词输入区域 |
| 验证按钮 | 主要操作按钮 | 底部 | "重新验证"，荧光绿色背景 |

---

## 3. 功能需求

### FR-VMS-01: 显示错误状态

| 字段 | 内容 |
|------|------|
| **ID** | FR-VMS-01 |
| **描述** | 验证失败时显示错误状态界面 |
| **验收标准** | 1. **假设** 验证失败, **当** 显示错误状态, **则** 在顶部显示红色错误提示横幅<br>2. **假设** 识别错误输入, **当** 渲染, **则** 错误的输入框显示红色边框和红色X图标<br>3. **假设** 正确的输入, **当** 渲染, **则** 保持正常样式 |
| **优先级** | 必须 |

### FR-VMS-02: 标记错误输入框

| 字段 | 内容 |
|------|------|
| **ID** | FR-VMS-02 |
| **描述** | 高亮显示输入错误的助记词位置 |
| **验收标准** | 1. **假设** 某个输入错误, **当** 标记, **则** 该输入框边框变为红色<br>2. **假设** 错误标记, **当** 显示, **则** 输入框右侧显示红色X图标<br>3. **假设** 用户重新输入, **当** 修改内容, **则** 清除该输入框的错误标记 |
| **优先级** | 必须 |

### FR-VMS-03: 重新验证

| 字段 | 内容 |
|------|------|
| **ID** | FR-VMS-03 |
| **描述** | 允许用户修改后重新验证 |
| **验收标准** | 1. **假设** 用户修改输入, **当** 点击重新验证, **则** 再次执行验证逻辑<br>2. **假设** 重新验证成功, **当** 通过, **则** 跳转至创建成功页面<br>3. **假设** 重新验证失败, **当** 失败, **则** 继续显示错误状态，允许再次重试 |
| **优先级** | 必须 |

### FR-VMS-04: 返回备份页面

| 字段 | 内容 |
|------|------|
| **ID** | FR-VMS-04 |
| **描述** | 用户可选择返回重新查看助记词 |
| **验收标准** | 1. **假设** 用户点击返回按钮, **当** 触发, **则** 返回备份助记词页面<br>2. **假设** 返回备份页, **当** 完成, **则** 可重新查看完整助记词 |
| **优先级** | 必须 |

---

## 4. 用户交互

### 4.1 用户操作

| 操作 | 触发条件 | 响应 |
|-----|---------|------|
| 点击返回按钮 | 用户点击左上角返回图标 | 返回到备份助记词页面 |
| 修改输入内容 | 用户编辑输入框 | 清除该输入框的错误标记 |
| 点击重新验证 | 用户修改后点击按钮 | 重新执行验证逻辑 |

### 4.2 导航流程

```
验证助记词页 (验证失败) → 显示错误状态
                            ↓
              ┌─────────────┴─────────────┐
              ↓                           ↓
         修改并重试                    点击返回
              ↓                           ↓
    ┌─────────┴─────────┐            备份助记词页
    ↓                   ↓
验证成功             验证失败
    ↓                   ↓
创建成功页          继续显示错误状态
```

---

## 5. 数据需求

### 5.1 数据展示

| 数据字段 | 数据类型 | 描述 |
|---------|---------|------|
| 页面标题 | String | "验证助记词" |
| 错误提示 | String | "验证失败，请检查输入" |
| 抽取的位置 | Array[3] | 需要验证的3个位置 |
| 用户输入 | Array[3] | 用户输入的3个单词 |
| 错误位置 | Array | 输入错误的位置索引 |

### 5.2 状态数据

| 状态 | 类型 | 说明 |
|------|------|------|
| 输入框1错误 | Boolean | 第1个输入是否错误 |
| 输入框2错误 | Boolean | 第2个输入是否错误 |
| 输入框3错误 | Boolean | 第3个输入是否错误 |

---

## 6. 验证规则

### 6.1 错误检测

| 规则 | 说明 |
|------|------|
| 逐个检测 | 分别检测3个输入是否正确 |
| 精确标记 | 只标记错误的输入框 |
| 忽略大小写 | 比较时转换为小写 |

---

## 7. 技术考量

### 7.1 状态管理

需要管理的状态：
- 验证失败标志
- 每个输入框的错误状态

### 7.2 安全考量

- 每次进入验证页面重新随机抽取位置，防止记忆作弊
- 记录异常验证行为用于安全分析

---

## 8. 验收标准汇总

1. ✅ 验证失败时正确显示错误状态页面
2. ✅ 错误提示横幅正确显示
3. ✅ **错误的输入框以红色边框标记**
4. ✅ **正确的输入框保持正常样式**
5. ✅ 修改输入后清除错误标记
6. ✅ 重新验证功能正常
7. ✅ 返回按钮功能正常

---

## 9. 无障碍访问要求

- [ ] 错误状态可被屏幕阅读器朗读
- [ ] 红色边框有足够对比度
- [ ] 失败次数提示可被屏幕阅读器感知
- [ ] 弹窗支持键盘操作

---

*文档更新日期: 2025-12-09*
*变更说明: 配合验证方式改为"抽查3个单词"进行更新*
