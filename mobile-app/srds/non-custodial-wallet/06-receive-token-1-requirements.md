# 接收代币_1 - 软件需求规格说明书

## 1. 页面标识
- **页面名称**: 接收代币选择链页
- **页面ID**: RECEIVE_SELECT_CHAIN_001
- **页面描述/用途**: 用户选择接收代币时,选择要接收代币的区块链网络和地址

## 2. UI组件
### 2.1 布局概述
页面分为上下两部分:上部显示首页内容(资产总览和购买提示),下部弹出模态框用于选择接收链。采用暗黑主题。

### 2.2 组件详情
| 组件名称 | 组件类型 | 位置 | 描述 |
|---------|---------|------|------|
| 背景页面 | 页面容器 | 全屏 | 显示模糊的首页内容 |
| 状态栏 | 系统组件 | 顶部 | 显示时间(9:41)、信号、WiFi和电池状态 |
| 账户信息 | 标签组 | 左上角 | 显示账户头像、用户名和账户名 |
| 搜索按钮 | 图标按钮 | 右上角 | 放大镜图标 |
| 模态框 | 弹出层 | 下半屏 | 深色背景的半屏弹窗 |
| 关闭按钮 | 图标按钮 | 模态框右上角 | X图标,关闭弹窗 |
| 模态框标题 | 标题文本 | 模态框顶部 | "接收"大标题 |
| Solana链卡片 | 选择卡片 | 模态框中 | 显示Solana链信息 |
| Solana图标 | 图标 | 卡片左侧 | Solana渐变色logo |
| Solana标题 | 文本标签 | 卡片中 | "Solana"文字 |
| Solana地址 | 文本标签 | 标题下方 | 缩略地址"4kPv... Moch" |
| 二维码按钮 | 图标按钮 | Solana卡片右侧 | 二维码图标 |
| 复制按钮 | 图标按钮 | 二维码按钮旁 | 复制图标 |
| Ethereum链卡片 | 选择卡片 | 模态框中 | 显示Ethereum链信息 |
| Ethereum图标 | 图标 | 卡片左侧 | Ethereum logo |
| Ethereum标题 | 文本标签 | 卡片中 | "Ethereum"文字 |
| Ethereum地址 | 文本标签 | 标题下方 | 缩略地址"0x8CED...362d" |
| Bitcoin链卡片 | 选择卡片 | 模态框中 | 显示Bitcoin链信息 |
| Bitcoin图标 | 图标 | 卡片左侧 | Bitcoin logo |
| Bitcoin标题 | 文本标签 | 卡片中 | "Bitcoin"文字 |
| Bitcoin地址 | 文本标签 | 标题下方 | 缩略地址"bc1q...frlh" |

## 3. 功能需求
### 3.1 主要功能
- 显示用户在不同区块链网络上的接收地址
- 支持多链地址选择(Solana、Ethereum、Bitcoin等)
- 为每条链提供快捷操作:查看二维码、复制地址
- 点击链卡片进入该链的详细接收页面
- 支持关闭模态框返回首页

### 3.2 业务逻辑
- 显示当前钱包支持的所有区块链网络
- 每条链显示对应的接收地址(缩略格式)
- 地址从当前钱包的密钥派生
- 支持HD钱包多地址管理
- 不同链使用不同的地址格式

## 4. 用户交互
### 4.1 用户操作
| 操作 | 触发条件 | 响应 |
|-----|---------|------|
| 点击关闭按钮 | 单击X | 关闭模态框,返回首页 |
| 点击链卡片 | 单击卡片主体 | 进入该链的详细接收页面(显示二维码和完整地址) |
| 点击二维码图标 | 单击二维码按钮 | 直接进入该链的二维码展示页 |
| 点击复制按钮 | 单击复制图标 | 复制该链地址到剪贴板,显示提示 |
| 点击背景区域 | 单击模态框外 | 关闭模态框(可选) |
| 上下滑动 | 滑动手势 | 浏览更多支持的链(如有) |

### 4.2 导航流程
- 首页 → 点击接收按钮 → 此页面(选择链)
- 选择链页 → 点击链卡片 → 详细接收页(二维码和地址)
- 选择链页 → 点击关闭 → 返回首页

### 4.3 手势操作
- 单击:选择和操作
- 下拉:可能关闭模态框
- 滑动:浏览链列表

## 5. 数据需求
### 5.1 数据展示
| 数据字段 | 数据类型 | 描述 |
|---------|---------|------|
| 链名称 | String | 区块链网络名称(Solana、Ethereum等) |
| 链图标 | Image URL | 区块链logo |
| 接收地址 | String | 该链上的钱包地址 |
| 地址缩略 | String | 显示用的缩略地址 |
| 链类型 | Enum | 链的类型标识 |

### 5.2 数据输入
用户选择的链

### 5.3 数据来源
- 本地钱包:从助记词/私钥派生各链地址
- 钱包配置:支持的区块链列表
- 链元数据:链名称、图标、地址格式等

## 6. 验证规则
### 6.1 输入验证
无直接用户输入

### 6.2 错误处理
- 地址生成失败:显示"地址暂时无法获取"
- 复制失败:提示"复制失败,请重试"
- 链数据加载失败:显示"加载失败,请重试"

## 7. 技术考量
### 7.1 状态管理
- 模态框显示状态
- 支持的链列表状态
- 各链地址状态
- 复制反馈状态
- 选中链状态

### 7.2 API集成
- 无需外部API
- 本地密钥管理系统:派生各链地址
- 区块链SDK:生成符合各链格式的地址

### 7.3 安全考量
- 地址验证:确保生成的地址格式正确
- 地址完整性:防止地址被篡改
- 剪贴板安全:复制后提示用户注意安全
- 不在日志中记录完整地址
- 模态框显示时,背景页面不应响应交互

## 8. 地址格式
### 8.1 各链地址规范
- Solana: Base58编码,44字符左右
- Ethereum: 0x开头,42字符(含0x)
- Bitcoin: 
  - Legacy: 1开头
  - SegWit: bc1开头
  - SegWit兼容: 3开头

### 8.2 缩略规则
- 显示前4-6位和后4-6位
- 中间用...省略
- 保持可识别性

## 9. 验收标准
- [ ] 模态框正确弹出显示
- [ ] 所有支持的链正确显示
- [ ] 每条链的图标正确渲染
- [ ] 地址缩略格式正确
- [ ] 点击链卡片能进入详细页面
- [ ] 二维码按钮功能正常
- [ ] 复制按钮能正确复制地址
- [ ] 复制成功有视觉反馈
- [ ] 关闭按钮功能正常
- [ ] 模态框动画流畅
- [ ] 地址格式符合各链规范
- [ ] 在不同屏幕尺寸下正常显示
- [ ] 暗黑主题样式正确
