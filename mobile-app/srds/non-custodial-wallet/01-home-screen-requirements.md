# 首页 - 软件需求规格说明书

## 1. 页面标识
- **页面名称**: 首页/钱包主页
- **页面ID**: HOME_001
- **页面描述/用途**: 展示用户钱包资产总览,提供快捷操作入口,显示资产列表及价格走势

## 2. UI组件
### 2.1 布局概述
页面采用垂直滚动布局,从上至下分为顶部账户区、资产总览区、快捷操作区和资产列表区。整体采用深色主题(暗黑模式),使用绿色作为主题强调色。

### 2.2 组件详情
| 组件名称 | 组件类型 | 位置 | 描述 |
|---------|---------|------|------|
| 状态栏 | 系统组件 | 顶部 | 显示时间(9:41)、信号强度、WiFi和电池状态 |
| 账户头像 | 图标按钮 | 左上角 | 显示狐狸头像图标,带有红色角标 |
| 账户名称 | 文本标签 | 左上角 | 显示@wallet1984和"账户 2" |
| 历史记录按钮 | 图标按钮 | 右上角 | 时钟图标,用于查看历史记录 |
| 搜索按钮 | 图标按钮 | 右上角 | 放大镜图标,用于搜索功能 |
| 总资产金额 | 大标题文本 | 上部中心 | 显示$2.76,白色大号字体 |
| 资产变动金额 | 数值文本 | 总资产下方 | 显示+$0.02311237,绿色字体 |
| 资产变动百分比 | 数值文本 | 变动金额旁 | 显示+0.02%,绿色字体 |
| 接收按钮 | 圆角按钮 | 快捷操作区左侧 | 深色背景,二维码图标+文字"接收" |
| 发送按钮 | 圆角按钮 | 快捷操作区中间 | 深色背景,纸飞机图标+文字"发送" |
| 兑换按钮 | 圆角按钮 | 快捷操作区右侧 | 深色背景,交换图标+文字"兑换" |
| 资产标题 | 文本标签 | 资产列表上方 | 显示"资产",带有右箭头 |
| BTC资产卡片 | 列表项 | 资产列表 | 显示BTC图标、BTC/USD、数量、图表、价格和涨跌幅 |
| AVAX资产卡片 | 列表项 | 资产列表 | 显示AVAX图标、AVAX/USD、数量、图表、价格和涨跌幅 |
| OP资产卡片 | 列表项 | 资产列表 | 显示OP图标、OP/USD、数量、图表、价格和涨跌幅 |
| BNB资产卡片 | 列表项 | 资产列表 | 显示BNB图标、BNB/USD、数量、图表、价格和涨跌幅(红色) |
| LINK资产卡片 | 列表项 | 资产列表 | 显示LINK图标、LINK/USD、数量、图表、价格和涨跌幅(红色) |
| 迷你图表 | 图表组件 | 每个资产卡片中 | 显示价格走势的折线图,绿色上涨/红色下跌 |

## 3. 功能需求
### 3.1 主要功能
- 实时显示用户钱包总资产价值(法币计价)
- 显示资产变动金额和百分比
- 提供接收、发送、兑换三大快捷操作入口
- 展示用户持有的各类代币资产列表
- 实时显示各代币的价格、持有数量、涨跌幅和价格走势图
- 支持账户切换和管理
- 提供历史记录查询
- 提供资产搜索功能

### 3.2 业务逻辑
- 总资产计算:汇总所有代币资产的法币价值
- 实时价格更新:定期从区块链或价格API获取最新价格
- 涨跌幅计算:基于24小时或自定义时间段的价格变化
- 颜色编码:上涨显示绿色,下跌显示红色
- 资产排序:默认按持有价值从高到低排序

## 4. 用户交互
### 4.1 用户操作
| 操作 | 触发条件 | 响应 |
|-----|---------|------|
| 点击账户头像/名称 | 单击 | 打开账户管理/切换页面 |
| 点击历史记录按钮 | 单击 | 跳转到交易历史记录页面 |
| 点击搜索按钮 | 单击 | 打开资产搜索界面 |
| 点击接收按钮 | 单击 | 进入接收代币流程 |
| 点击发送按钮 | 单击 | 进入发送代币流程 |
| 点击兑换按钮 | 单击 | 进入代币兑换流程 |
| 点击资产标题 | 单击 | 展开完整资产列表 |
| 点击资产卡片 | 单击 | 进入该代币的详情页面 |
| 下拉刷新 | 下拉手势 | 刷新资产数据和价格 |
| 上滑浏览 | 滑动手势 | 浏览更多资产 |

### 4.2 导航流程
- 首页 → 接收代币页面(点击接收按钮)
- 首页 → 发送代币页面(点击发送按钮)
- 首页 → 代币兑换页面(点击兑换按钮)
- 首页 → 代币详情页面(点击资产卡片)
- 首页 → 交易历史页面(点击历史按钮)
- 首页 → 搜索页面(点击搜索按钮)
- 首页 → 账户管理页面(点击账户区域)

### 4.3 手势操作
- 下拉刷新:更新资产价格和余额
- 上下滑动:浏览资产列表
- 单击:选择和导航
- 长按资产卡片:可能触发快捷操作菜单

## 5. 数据需求
### 5.1 数据展示
| 数据字段 | 数据类型 | 描述 |
|---------|---------|------|
| 账户名称 | String | 显示当前账户的用户名和序号 |
| 总资产价值 | Decimal | 所有资产的总价值(法币计价) |
| 资产变动金额 | Decimal | 24小时内资产价值变动 |
| 资产变动百分比 | Percentage | 24小时内资产价值变动百分比 |
| 代币名称 | String | 代币名称和交易对(如BTC/USD) |
| 代币余额 | Decimal | 用户持有的代币数量 |
| 代币价格 | Decimal | 当前市场价格(法币计价) |
| 价格涨跌幅 | Percentage | 价格变动百分比 |
| 价格走势 | Array | 用于绘制迷你图表的价格数据点 |

### 5.2 数据输入
无直接数据输入,页面主要用于展示

### 5.3 数据来源
- 钱包余额:从区块链节点或本地钱包查询
- 代币价格:从价格聚合API(如CoinGecko、CoinMarketCap)获取
- 历史价格:从价格API获取时间序列数据
- 账户信息:从本地存储读取用户配置

## 6. 验证规则
### 6.1 输入验证
无用户输入,不适用

### 6.2 错误处理
- 网络错误:显示最后一次成功加载的数据,并提示用户网络连接失败
- 价格API失败:显示"价格暂时无法获取"提示
- 余额查询失败:显示"余额加载失败,请重试"
- 数据加载超时:显示加载指示器,超时后提示用户刷新
- 空资产状态:显示"暂无资产"提示和充值引导

## 7. 技术考量
### 7.1 状态管理
- 用户账户状态(当前账户、多账户列表)
- 资产余额状态(各代币余额)
- 价格数据状态(实时价格、历史价格)
- 加载状态(loading、success、error)
- 刷新状态(上次更新时间)
- 显示货币偏好(USD、EUR等)

### 7.2 API集成
- 区块链RPC节点:查询各链上的代币余额
  - 以太坊RPC (eth_getBalance, eth_call)
  - 其他EVM兼容链RPC
  - Solana RPC
  - Bitcoin RPC
- 价格API集成
  - CoinGecko API或CoinMarketCap API
  - 实时价格WebSocket连接(可选)
- 历史价格数据API
  - 获取K线数据用于绘制迷你图表

### 7.3 安全考量
- 不在界面上显示完整的钱包地址
- 敏感数据(私钥、助记词)不得在此页面暴露
- API调用使用HTTPS加密
- 价格数据需验证来源可靠性
- 防止价格数据被篡改(使用多数据源验证)
- 实现应用锁定机制(生物识别或PIN码)
- 在后台时隐藏敏感信息

## 8. 性能要求
### 8.1 响应时间
- 页面初始加载:< 2秒
- 价格数据刷新:< 1秒
- 下拉刷新响应:< 500毫秒
- 页面切换动画:< 300毫秒

### 8.2 数据更新频率
- 价格数据:每30-60秒自动更新
- 余额数据:每次进入页面时更新
- 用户触发刷新:立即更新

## 9. 验收标准
- [ ] 页面能正确显示用户总资产价值
- [ ] 各代币余额显示准确无误
- [ ] 实时价格数据正常更新
- [ ] 涨跌幅颜色编码正确(涨绿跌红)
- [ ] 迷你图表正确渲染价格走势
- [ ] 三个快捷操作按钮可正常点击并跳转
- [ ] 资产卡片点击能进入详情页
- [ ] 下拉刷新功能正常工作
- [ ] 网络错误时有友好提示
- [ ] 空资产状态显示正确
- [ ] 多账户切换功能正常
- [ ] 历史记录按钮可正常跳转
- [ ] 搜索功能正常工作
- [ ] 页面加载性能符合要求
- [ ] 暗黑模式样式正确渲染
