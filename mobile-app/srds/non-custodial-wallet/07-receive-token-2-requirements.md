# 接收代币_2 - 软件需求规格说明书

## 1. 页面标识
- **页面名称**: 接收代币二维码页
- **页面ID**: RECEIVE_QR_CODE_001
- **页面描述/用途**: 显示选定区块链的接收地址二维码和完整地址,便于他人扫码或复制地址进行转账

## 2. UI组件
### 2.1 布局概述
页面采用垂直居中布局,深色背景。顶部导航栏,中部大尺寸二维码,下方显示完整地址和操作按钮。

### 2.2 组件详情
| 组件名称 | 组件类型 | 位置 | 描述 |
|---------|---------|------|------|
| 导航栏 | 容器 | 顶部 | 深灰色背景导航区域 |
| 返回按钮 | 图标按钮 | 左上角 | 左箭头,返回上一页 |
| 页面标题 | 标题文本 | 导航栏中心 | "您的 Solana 地址" |
| 二维码容器 | 容器 | 中部 | 深灰色圆角背景 |
| 二维码图片 | 图片组件 | 二维码容器中 | 大尺寸二维码,中心带Solana图标 |
| Solana图标 | 图标 | 二维码中心 | 圆形Solana logo叠加 |
| 说明文字 | 文本标签 | 二维码下方 | "您的 Solana 地址" |
| 详细说明 | 文本标签 | 说明文字下方 | "使用此地址在 Solana 上接收代币和收藏品。" |
| 地址容器 | 容器 | 下部 | 深色背景的地址展示区 |
| 完整地址 | 文本标签 | 地址容器中 | "4kPvsi...URMoch",可能可滚动 |
| 复制按钮图标 | 图标按钮 | 地址容器右侧 | 复制图标 |
| 保存按钮 | 主要按钮 | 底部 | 亮绿色大按钮,显示"保存" |

## 3. 功能需求
### 3.1 主要功能
- 显示指定区块链网络的接收地址二维码
- 在二维码中心叠加区块链logo(品牌识别)
- 显示完整的接收地址
- 提供地址复制功能
- 提供二维码保存到相册功能
- 显示地址使用说明

### 3.2 业务逻辑
- 二维码生成:将区块链地址编码为二维码
- 二维码大小:足够大以便扫描,通常200x200px以上
- 地址显示:可能缩略或完整显示,支持滚动查看
- 保存功能:生成包含二维码的图片保存到系统相册
- 根据不同链显示对应的logo和说明

## 4. 用户交互
### 4.1 用户操作
| 操作 | 触发条件 | 响应 |
|-----|---------|------|
| 点击返回按钮 | 单击 | 返回链选择页面 |
| 点击复制按钮 | 单击 | 复制完整地址到剪贴板,显示提示 |
| 点击地址文本 | 单击 | 可能触发复制或展开完整地址 |
| 点击保存按钮 | 单击 | 生成二维码图片并保存到相册,显示成功提示 |
| 长按二维码 | 长按 | 可能触发分享或保存选项 |
| 截图保护 | 系统截图 | 可能显示警告提示(安全考虑) |

### 4.2 导航流程
- 链选择页 → 此页面(二维码展示)
- 二维码页 → 返回链选择页
- 二维码页 → 系统相册(保存操作)
- 二维码页 → 分享菜单(可选)

### 4.3 手势操作
- 单击:触发操作
- 长按:可能触发额外选项
- 双指缩放:可能支持二维码放大(可选)

## 5. 数据需求
### 5.1 数据展示
| 数据字段 | 数据类型 | 描述 |
|---------|---------|------|
| 区块链名称 | String | 当前显示的链名称(如Solana) |
| 接收地址 | String | 完整的区块链地址 |
| 二维码数据 | String | 编码到二维码中的数据(通常就是地址) |
| 链图标 | Image URL | 区块链logo |
| 说明文字 | String | 根据链定制的说明文本 |

### 5.2 数据输入
- 从上一页面传入:选定的链类型

### 5.3 数据来源
- 本地钱包:读取对应链的地址
- 二维码生成库:动态生成二维码图片
- 链元数据:链名称、图标、说明文字

## 6. 验证规则
### 6.1 输入验证
- 地址有效性验证
- 确保地址属于正确的区块链网络

### 6.2 错误处理
- 二维码生成失败:显示"二维码生成失败,请重试"
- 保存失败:提示"保存失败,请检查相册权限"
- 复制失败:提示"复制失败,请重试"
- 相册权限被拒:引导用户到设置开启权限
- 地址为空:显示"地址加载失败"

## 7. 技术考量
### 7.1 状态管理
- 当前链类型状态
- 接收地址状态
- 二维码图片状态
- 保存操作状态(loading/success/error)
- 复制反馈状态
- 权限状态(相册访问权限)

### 7.2 API集成
- 无需外部API
- 二维码生成库(如qrcode.js、react-native-qrcode-svg)
- 系统相册API(保存图片)
- 剪贴板API(复制地址)
- 权限管理API(请求相册权限)

### 7.3 安全考量
- 防截图警告:提示用户二维码包含敏感信息
- 地址验证:确保显示的地址格式正确
- 二维码数据验证:防止错误数据编码
- 保存的图片应包含水印或标识(可选)
- 在公共场所展示二维码时提示用户注意安全

## 8. 二维码规范
### 8.1 生成参数
- 纠错级别:L或M(15%-30%容错)
- 编码格式:UTF-8
- 尺寸:至少200x200px,建议300x300px
- 边距:适当的quiet zone(白边)
- 颜色:黑色数据,白色背景(或深色主题适配)

### 8.2 内容格式
- 仅地址:直接编码地址字符串
- URI格式(可选):
  - Bitcoin: bitcoin:<address>
  - Ethereum: ethereum:<address>
  - Solana: solana:<address>

## 9. 保存功能
### 9.1 图片生成
- 包含二维码
- 包含完整地址文本
- 包含链名称和logo
- 包含应用品牌标识
- 高分辨率(适合打印)

### 9.2 权限处理
- 首次保存:请求相册访问权限
- 权限被拒:显示说明和设置引导
- iOS和Android权限处理差异

## 10. 验收标准
- [ ] 页面正确显示对应链的名称和logo
- [ ] 二维码正确生成并显示
- [ ] 二维码中心正确叠加链logo
- [ ] 二维码可被标准扫码应用识别
- [ ] 完整地址正确显示
- [ ] 复制按钮能正确复制地址
- [ ] 复制成功有明确提示
- [ ] 保存按钮功能正常
- [ ] 保存成功有明确提示
- [ ] 保存的图片质量良好
- [ ] 保存的图片包含所有必要信息
- [ ] 相册权限请求流程正常
- [ ] 返回按钮功能正常
- [ ] 说明文字清晰准确
- [ ] 在不同屏幕尺寸下正常显示
- [ ] 暗黑主题样式正确
- [ ] 二维码在各种光线条件下可扫描
