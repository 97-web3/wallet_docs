# 备份助记词页1（模糊状态）- 软件需求规格说明书

## 1. 页面标识
- **页面名称**: 备份助记词页1（模糊状态）
- **页面ID**: backup-mnemonic-1
- **页面描述/用途**: 显示生成的助记词但以模糊状态呈现，用户需要点击按钮才能显示明文，增加安全性并确保用户有意识地查看助记词

## 2. UI组件
### 2.1 布局概述
页面采用垂直布局，顶部有返回按钮和标题，中间为安全提示、助记词显示区域和显示控制按钮，底部为操作按钮。助记词区域显示为模糊状态，中间有一个禁止图标表示内容被隐藏。

### 2.2 组件详情
| 组件名称 | 组件类型 | 位置 | 描述 |
|---------|---------|------|------|
| 返回按钮 | 按钮（图标） | 顶部左侧 | 返回上一页面 |
| 页面标题 | 文本标签 | 顶部中央偏左 | "备份助记词" |
| 安全提示文字 | 文本段落 | 标题下方 | 多行警告文字，强调截图风险 |
| 助记词标签 | 文本标签 | 提示下方 | "助记词（12个单词）" |
| 显示助记词按钮 | 图标按钮 | 助记词标签右侧 | 眼睛图标配合文字"显示助记词" |
| 助记词显示区域 | 容器视图 | 中部 | 深色圆角矩形区域，包含模糊的助记词 |
| 模糊遮罩层 | 视觉效果层 | 助记词区域上方 | 高斯模糊效果，隐藏助记词内容 |
| 禁止图标 | 图标 | 助记词区域中央 | 红色圆形禁止图标，表示内容被隐藏 |
| 验证备份按钮 | 主要操作按钮 | 底部上方 | 荧光绿色背景，跳转到验证页面 |
| ~~稍后再备份链接~~ | ~~文本链接按钮~~ | ~~底部~~ | **已移除** - 为防止用户跳过备份导致资产丢失风险，此页面不再提供跳过选项。用户必须完成验证后才能使用钱包。 |
| 自动模糊倒计时 | 文本标签 | 助记词区域下方 | 显示"助记词将在 XX 秒后自动隐藏"（仅在明文显示时出现） |

## 3. 功能需求
### 3.1 主要功能
- 以模糊状态显示助记词，保护隐私
- 提供安全警告和备份建议
- 允许用户控制助记词的显示/隐藏
- 提供验证备份选项（必须完成）
- 防止截图泄露助记词

### 3.2 业务逻辑
1. **页面初始状态**：
   - 助记词区域显示为模糊状态
   - 中央显示禁止图标
   - "显示助记词"按钮可点击

2. **安全提示内容**：
   - "请务必准确抄写您的助记词，并妥善保存在安全地点。切勿截屏或通过网络存储和传输。以免造成泄露。"
   - 关键警告词"切勿截屏"使用醒目颜色（荧光黄色）

3. **显示/隐藏逻辑**：
   - 点击"显示助记词"按钮 → 移除模糊效果，显示明文助记词
   - 按钮文字变为"隐藏助记词"
   - 图标变为斜线眼睛（隐藏状态）
   - 再次点击可重新隐藏

4. **操作流程**：
   - 用户阅读安全提示
   - 点击"显示助记词"查看明文
   - 手动抄写助记词（建议在60秒内完成）
   - 点击"验证备份"进入验证页面
   - **注意**：此页面不提供跳过选项，用户必须完成验证才能使用钱包

5. **自动模糊机制**（必须实现）：
   - 助记词显示后，启动60秒倒计时
   - 页面显示倒计时提示："助记词将在 XX 秒后自动隐藏"
   - 倒计时结束后自动重新模糊助记词
   - 用户可再次点击"显示助记词"重新查看
   - 此机制防止用户离开后助记词长时间暴露

## 4. 用户交互
### 4.1 用户操作
| 操作 | 触发条件 | 响应 |
|-----|---------|------|
| 点击返回按钮 | 用户点击左上角返回图标 | 显示确认对话框："确定要离开吗？您需要完成助记词备份才能使用钱包。" |
| 点击显示助记词按钮 | 用户点击眼睛图标或文字 | 移除模糊效果，显示明文助记词，启动60秒倒计时 |
| 点击隐藏助记词按钮 | 用户在明文状态下点击按钮 | 重新模糊助记词，停止倒计时 |
| 点击验证备份按钮 | 用户点击底部"验证备份"按钮 | 导航到助记词验证页面 |
| 倒计时结束 | 60秒倒计时归零 | 自动重新模糊助记词 |

### 4.2 导航流程
```
备份助记词页1 → 点击返回 → 显示确认对话框 → 确认离开 → 上一页面
备份助记词页1 → 点击显示助记词 → 切换到备份助记词页2（明文状态，60秒倒计时）
备份助记词页1 → 点击验证备份 → 助记词验证页
备份助记词页1 → 60秒超时 → 自动切换回模糊状态
```
**注意**：已移除"稍后再备份"导航路径，用户必须完成验证流程。

### 4.3 手势操作
- 支持垂直滚动查看完整内容
- 不支持在助记词区域的手势操作（已模糊）
- 支持系统返回手势

## 5. 数据需求
### 5.1 数据展示
| 数据字段 | 数据类型 | 描述 |
|---------|---------|------|
| 页面标题 | 字符串 | "备份助记词" |
| 安全提示 | 字符串 | "请务必准确抄写您的助记词，并妥善保存在安全地点。切勿截屏或通过网络存储和传输。以免造成泄露。" |
| 助记词标签 | 字符串 | "助记词（12个单词）" |
| 显示按钮文字 | 字符串 | "显示助记词" / "隐藏助记词" |
| 验证按钮文字 | 字符串 | "验证备份" |
| 跳过链接文字 | 字符串 | "稍后再备份" |
| 助记词数据 | 字符串数组 | 12个BIP39单词（当前状态下模糊显示） |

### 5.2 数据输入
本页面无用户输入数据

### 5.3 数据来源
- 助记词：从BIP39库生成的12个单词
- 页面文案：从应用本地化资源文件获取
- 显示状态：页面内部状态管理

## 6. 验证规则
### 6.1 输入验证
本页面无输入验证需求

### 6.2 错误处理
| 错误场景 | 错误信息 | 处理方式 |
|---------|---------|---------|
| 助记词生成失败 | "助记词生成失败，请返回重试" | 显示错误提示，禁用验证备份按钮 |
| 显示切换失败 | 无 | 静默失败，允许用户重新点击 |
| 导航失败 | "操作失败，请重试" | 显示提示，允许重新操作 |
| 截图检测 | 触发截图警告弹窗 | 显示安全提示弹窗 |

## 7. 技术考量
### 7.1 状态管理
需要管理的状态：
- 助记词数据（12个单词）
- 助记词显示/隐藏状态
- 页面加载状态
- 用户是否已查看助记词
- 模糊效果启用/禁用状态

### 7.2 API集成
- **BIP39库**：生成12个助记词
- **本地存储**：临时保存助记词（加密）
- **截图检测**：监听系统截图事件
- **分析统计**：记录用户在此页面的操作行为

### 7.3 安全考量
1. **助记词保护**：
   - 默认以模糊状态显示，防止偷窥
   - 用户主动操作才能查看明文
   - 离开页面后自动隐藏
   - **60秒后自动重新模糊**（必须实现）- 防止用户离开后助记词长时间暴露

2. **截图保护**：
   - 设置FLAG_SECURE防止截图（Android）
   - 监听截图事件并处理（iOS/Android）
   - 检测到截图时显示警告弹窗
   - 自动隐藏助记词或模糊截图内容

3. **内存管理**：
   - 助记词数据在内存中加密存储
   - 页面销毁时清理敏感数据
   - 避免日志中记录助记词

4. **视觉保护**：
   - 模糊效果足够强，无法识别文字
   - 禁止图标清晰可见
   - 警告文字醒目（荧光色）

5. **用户教育**：
   - 明确的警告文字
   - 强调不要截图
   - 提供正确的备份方法

## 8. 验收标准
- [ ] 页面布局符合设计稿，所有UI组件正确显示
- [ ] 页面标题"备份助记词"正确显示
- [ ] 安全提示文字完整显示，"切勿截屏"以醒目颜色显示
- [ ] 助记词标签显示"助记词（12个单词）"
- [ ] "显示助记词"按钮和图标正确显示
- [ ] 助记词区域初始状态为模糊效果
- [ ] 模糊效果足够强，无法识别助记词内容
- [ ] 禁止图标在助记词区域中央清晰显示
- [ ] 返回按钮功能正常
- [ ] 点击"显示助记词"按钮后正确切换到明文状态
- [ ] **显示助记词后启动60秒倒计时**
- [ ] **倒计时显示在助记词区域下方**
- [ ] **60秒后自动重新模糊助记词**
- [ ] 点击"验证备份"按钮后正确导航到验证页面
- [ ] **页面不显示"稍后再备份"选项**
- [ ] **点击返回按钮时显示确认对话框**
- [ ] 截图保护功能正常工作（如已实现）
- [ ] 检测到截图时显示警告弹窗
- [ ] 离开页面后助记词自动隐藏（如返回）
- [ ] 所有文字内容清晰易读，无拼写错误
- [ ] 页面在不同屏幕尺寸下显示正常
- [ ] 模糊到明文的过渡动画流畅（如有）
- [ ] 所有交互操作响应迅速
- [ ] 助记词数据正确生成（12个有效的BIP39单词）

## 9. 无障碍访问要求
- [ ] 所有文本颜色对比度符合WCAG 2.1 AA标准（最低4.5:1）
- [ ] 按钮和可交互元素最小触摸目标为44x44pt
- [ ] 支持屏幕阅读器，所有UI元素有适当的无障碍标签
- [ ] 模糊状态变化需通过无障碍公告通知用户
- [ ] 倒计时状态变化需通过无障碍公告通知用户
- [ ] 确认对话框出现时焦点自动移至对话框内
- [ ] 支持键盘导航（适用于平板/桌面设备）
