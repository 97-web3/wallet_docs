# 代币详情 - 软件需求规格说明书

## 1. 页面标识
- **页面名称**: 代币详情页
- **页面ID**: TOKEN_DETAIL_001
- **页面描述/用途**: 显示单个代币的详细信息,包括价格走势、代币信息、交易数据和安全性信息

## 2. UI组件
### 2.1 布局概述
页面采用垂直滚动布局,从上至下分为导航栏、价格展示区、走势图表区、信息卡片区和底部操作区。整体采用暗黑主题。

### 2.2 组件详情
| 组件名称 | 组件类型 | 位置 | 描述 |
|---------|---------|------|------|
| 状态栏 | 系统组件 | 顶部 | 显示时间、信号、WiFi和电池状态 |
| 返回按钮 | 图标按钮 | 左上角 | 左箭头,返回上一页 |
| 代币标识 | 标签组 | 左上角 | 代币图标+名称(Pepe) |
| 关注按钮 | 文本按钮 | 右上角 | "关注"文字+图标 |
| 当前价格 | 大标题文本 | 上部中心 | 显示$0.00000477,白色大号字体 |
| 价格变动 | 数值文本组 | 价格下方 | 显示变动金额和百分比(红色) |
| 价格图表 | 图表组件 | 中上部 | 折线图显示价格走势,红色表示下跌 |
| 价格标注 | 文本标签 | 图表上 | 显示特定点的价格值 |
| 时间选择器 | 分段控制器 | 图表下方 | 1日/1周/1月/半年/1年时间段选择 |
| 信息标题 | 标题文本 | 中部 | "信息"标题 |
| 名称行 | 信息行 | 信息区 | "名称: Pepe" |
| 符号行 | 信息行 | 信息区 | "符号: PEPE" |
| 网络行 | 信息行 | 信息区 | "网络: Ethereum" |
| 合约行 | 信息行 | 信息区 | "合约: 0x69825...11933",带复制按钮 |
| 市值行 | 信息行 | 信息区 | "市值: $2.01B" |
| 总供应量行 | 信息行 | 信息区 | "总供应量: 420.69T" |
| 流通供应量行 | 信息行 | 信息区 | "流通供应量: 420.69T" |
| 持有者行 | 信息行 | 信息区 | "持有者: 495.54K" |
| 创建时间行 | 信息行 | 信息区 | "创建时间: Apr 14, 2023" |
| 关于标题 | 标题文本 | 下部 | "关于"标题 |
| 关于内容 | 文本区域 | 关于标题下 | 代币介绍文字,可展开 |
| 展开按钮 | 文本按钮 | 关于内容下 | "展开"按钮 |
| 官网按钮 | 圆角按钮 | 关于区下方 | "Website"按钮,带地球图标 |
| X平台按钮 | 圆角按钮 | 官网按钮旁 | "X"按钮,带X图标 |
| 交易音量标题 | 标题文本 | 下部 | "交易音量"标题 |
| 交易音量值 | 数值文本 | 标题右侧 | "$1.38M -23.29%"(红色) |
| 交易量标题 | 标题文本 | 下部 | "交易量"标题 |
| 交易量值 | 数值文本 | 标题右侧 | "476 -16.34%"(红色) |
| 安全性标题 | 标题文本 | 下部 | "安全性"标题 |
| 可铸造行 | 信息行 | 安全性区 | "可铸造"带问号图标,值为"Pepe" |
| 购买按钮 | 主要按钮 | 底部 | 亮绿色大按钮,显示"购买" |

## 3. 功能需求
### 3.1 主要功能
- 显示代币实时价格和价格变动
- 展示可交互的价格走势图表
- 提供多时间段的价格数据查看(1日、1周、1月、半年、1年)
- 显示代币基本信息(名称、符号、网络、合约地址等)
- 显示代币市场数据(市值、供应量、持有者等)
- 提供代币介绍和相关链接
- 显示交易数据(交易量、交易笔数)
- 显示代币安全性信息
- 支持关注/收藏代币
- 提供复制合约地址功能
- 提供购买入口

### 3.2 业务逻辑
- 实时更新代币价格和市场数据
- 价格变动使用颜色编码(红色下跌、绿色上涨)
- 根据选择的时间段加载对应的历史价格数据
- 合约地址缩略显示,支持完整复制
- 安全性检查:可铸造性、合约验证状态等
- 关注状态持久化保存

## 4. 用户交互
### 4.1 用户操作
| 操作 | 触发条件 | 响应 |
|-----|---------|------|
| 点击返回按钮 | 单击 | 返回上一页(资产列表或搜索页) |
| 点击关注按钮 | 单击 | 添加/取消关注,按钮状态切换 |
| 点击价格图表 | 单击/长按 | 显示该点的具体价格和时间 |
| 拖动图表 | 拖拽手势 | 查看不同时间点的价格 |
| 选择时间段 | 点击时间按钮 | 切换图表显示的时间范围 |
| 点击合约地址 | 单击 | 复制合约地址到剪贴板 |
| 点击复制按钮 | 单击 | 复制合约地址到剪贴板,显示提示 |
| 点击展开按钮 | 单击 | 展开完整的关于内容 |
| 点击Website按钮 | 单击 | 在浏览器中打开项目官网 |
| 点击X按钮 | 单击 | 在浏览器/应用中打开X(Twitter)页面 |
| 点击可铸造问号 | 单击 | 显示可铸造性说明弹窗 |
| 点击购买按钮 | 单击 | 进入代币购买/交易流程 |
| 下拉刷新 | 下拉手势 | 刷新代币数据和价格 |
| 上下滑动 | 滑动手势 | 浏览完整页面内容 |

### 4.2 导航流程
- 代币详情页 → 返回资产列表
- 代币详情页 → 购买/交易页面
- 代币详情页 → 外部链接(官网、社交媒体)
- 代币详情页 → 安全性详情页(可选)

### 4.3 手势操作
- 单击:选择和触发操作
- 长按图表:查看特定时间点数据
- 拖动图表:浏览历史数据
- 下拉:刷新数据
- 上下滑动:浏览页面

## 5. 数据需求
### 5.1 数据展示
| 数据字段 | 数据类型 | 描述 |
|---------|---------|------|
| 代币名称 | String | 完整代币名称 |
| 代币符号 | String | 代币符号/代码 |
| 代币图标 | Image URL | 代币logo图片 |
| 当前价格 | Decimal | 实时价格(法币计价) |
| 价格变动金额 | Decimal | 24h价格变动 |
| 价格变动百分比 | Percentage | 24h价格变动百分比 |
| 历史价格数据 | Array | 用于绘制图表的时间序列数据 |
| 网络/链 | String | 代币所在区块链网络 |
| 合约地址 | String | 智能合约地址 |
| 市值 | String | 总市值 |
| 总供应量 | String | 代币总供应量 |
| 流通供应量 | String | 当前流通中的供应量 |
| 持有者数量 | String | 持有该代币的地址数量 |
| 创建时间 | Date | 代币创建/发布日期 |
| 项目介绍 | String | 代币/项目描述文本 |
| 官网链接 | URL | 项目官方网站 |
| 社交媒体链接 | URL | X(Twitter)等社交媒体链接 |
| 交易音量 | String | 24h交易金额 |
| 交易量 | Integer | 24h交易笔数 |
| 安全性标志 | Object | 可铸造性等安全相关信息 |
| 关注状态 | Boolean | 用户是否已关注该代币 |

### 5.2 数据输入
- 时间段选择(1日/1周/1月/半年/1年)
- 关注状态切换
- 图表交互点击位置

### 5.3 数据来源
- 价格API:实时价格和历史数据(CoinGecko、CoinMarketCap)
- 区块链浏览器API:合约信息、持有者数据
- 代币信息数据库:项目介绍、链接等元数据
- DEX聚合器API:交易量数据
- 安全分析服务:代币安全性评估

## 6. 验证规则
### 6.1 输入验证
- 时间段选择必须是预定义的选项之一
- 图表交互数据点必须在有效范围内

### 6.2 错误处理
- 价格数据加载失败:显示"价格数据暂时无法获取"
- 图表加载失败:显示空白图表区域和重试按钮
- 代币信息缺失:显示"信息暂时无法获取"
- 网络链接失败:提示"无法打开链接"
- 复制失败:提示"复制失败,请重试"
- 购买功能不可用:按钮置灰或显示提示

## 7. 技术考量
### 7.1 状态管理
- 代币基本信息状态
- 价格数据状态(实时价格、历史数据)
- 图表显示状态(当前时间段、缩放级别)
- 关注状态
- 加载状态(各数据区块的loading状态)
- 错误状态
- 关于内容展开状态

### 7.2 API集成
- 价格数据API
  - 实时价格查询
  - 历史K线数据(OHLCV)
  - WebSocket实时价格订阅(可选)
- 代币信息API
  - 基本信息查询
  - 市场数据查询
- 区块链浏览器API
  - 合约详情查询
  - 持有者统计查询
- 安全分析API
  - 合约安全性检查
  - 代币风险评估

### 7.3 安全考量
- 验证合约地址有效性
- 防止恶意代币信息注入
- 外部链接打开前显示确认提示
- 安全提示:对高风险代币显示警告
- 价格数据防篡改验证
- 敏感操作(购买)需二次确认

## 8. 性能要求
### 8.1 响应时间
- 页面初始加载:< 2秒
- 图表切换时间段:< 500毫秒
- 价格数据更新:< 1秒
- 图表交互响应:< 100毫秒

### 8.2 数据更新频率
- 价格数据:每30-60秒自动更新
- 图表数据:根据时间段缓存,避免重复加载
- 市场数据:每5分钟更新

### 8.3 图表性能
- 支持流畅的缩放和拖动
- 数据点过多时进行采样优化
- 使用硬件加速渲染

## 9. 验收标准
- [ ] 页面正确显示代币所有基本信息
- [ ] 实时价格正常更新
- [ ] 价格图表正确渲染且可交互
- [ ] 时间段切换功能正常
- [ ] 价格变动颜色编码正确
- [ ] 合约地址可正确复制
- [ ] 关注按钮功能正常
- [ ] 外部链接可正常打开
- [ ] 关于内容展开/收起功能正常
- [ ] 购买按钮可正常跳转
- [ ] 下拉刷新功能正常
- [ ] 各类错误情况有友好提示
- [ ] 加载状态正确显示
- [ ] 页面滚动流畅
- [ ] 图表性能良好无卡顿
- [ ] 在不同网络条件下表现稳定
