# 安全设置

> 返回 [业务服务目录](./README.md)

---

## F-BUS-018: 获取安全设置

**描述**: 获取用户的安全设置状态。

**gRPC 方法**: `GetSecuritySettings`

**请求 Schema**:
```json
{}
```

**响应 Schema**:
```json
{
  "success": true,
  "settings": {
    "google_auth_enabled": false,
    "has_trade_password": true,
    "anti_phishing_code": "ABC",
    "email_bound": true,
    "phone_bound": true,
    "login_notification": true,
    "email_masked": "a***@gmail.com",
    "phone_masked": "138****0000"
  }
}
```

---

## F-BUS-019: 设置资金密码

**描述**: 设置交易/资金密码。

**gRPC 方法**: `SetTradePassword`

**请求 Schema**:
```json
{
  "password": "登录密码",
  "trade_password": "123456"    // 6位数字
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "资金密码设置成功"
}
```

---

## F-BUS-020: 重置资金密码

**描述**: 通过验证码重置资金密码。

**gRPC 方法**: `ResetTradePassword`

**请求 Schema**:
```json
{
  "method": 1,
  "phone": "13800138000",
  "country_code": "86",
  "email": "",
  "code": "123456",
  "code_id": "verify_123",
  "new_trade_password": "654321"
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "资金密码重置成功"
}
```

---

## F-BUS-021: 绑定 Google 身份验证器

**描述**: 绑定 Google Authenticator 进行 2FA 验证。

**gRPC 方法**: `BindGoogleAuth`

**请求 Schema**:
```json
{
  "secret": "JBSWY3DPEHPK3PXP",
  "code": "123456"
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "绑定成功",
  "backup_codes": [
    "ABC123",
    "DEF456",
    "GHI789"
  ]
}
```

---

## F-BUS-022: 绑定邮箱

**描述**: 绑定邮箱地址。

**gRPC 方法**: `BindEmail`

**请求 Schema**:
```json
{
  "email": "user@example.com",
  "code": "123456"
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "邮箱绑定成功"
}
```

---

## F-BUS-023: 换绑邮箱

**描述**: 更换已绑定的邮箱。

**gRPC 方法**: `ChangeEmail`

**请求 Schema**:
```json
{
  "new_email": "new@example.com",
  "code1": "123456",     // 原邮箱验证码
  "code2": "654321"      // 新邮箱验证码
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "邮箱换绑成功"
}
```

---

## F-BUS-024: 绑定手机

**描述**: 绑定手机号。

**gRPC 方法**: `BindPhone`

**请求 Schema**:
```json
{
  "phone": "13800138000",
  "country_code": "86",
  "code": "123456"
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "手机绑定成功"
}
```

---

## F-BUS-025: 换绑手机

**描述**: 更换已绑定的手机号。

**gRPC 方法**: `ChangePhone`

**请求 Schema**:
```json
{
  "new_phone": "13900139000",
  "new_country_code": "86",
  "code1": "123456",     // 原手机验证码
  "code2": "654321"      // 新手机验证码
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "手机换绑成功"
}
```
