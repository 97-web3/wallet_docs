# 余额监控

> 返回 [ChainSync 服务目录](./README.md)

---

## F-SYNC-011: 获取地址余额

**描述**: 获取地址的原生币和代币余额。

**gRPC 方法**: `GetAddressBalance`

**请求 Schema**:
```json
{
  "chain": 1,
  "address": "TKvjYxxxxxxxxxxx",
  "tokens": ["TR7N..."]                 // 代币合约地址，空则只获取原生币
}
```

**响应 Schema**:
```json
{
  "success": true,
  "native_balance": "1000000000",
  "formatted_native_balance": "1000 TRX",
  "token_balances": [
    {
      "token_address": "TR7N...",
      "token_symbol": "USDT",
      "token_decimals": 6,
      "balance": "1000000000",
      "formatted_balance": "1000",
      "usd_value": 1000.0
    }
  ],
  "total_usd_value": 1100.5,
  "last_updated": 1702300800
}
```

---

## F-SYNC-012: 获取多地址余额

**描述**: 批量获取多个地址的余额。

**gRPC 方法**: `GetMultiAddressBalance`

**请求 Schema**:
```json
{
  "chain": 1,
  "addresses": ["TKvjY...", "TAbcD..."],
  "tokens": ["TR7N..."]
}
```

**响应 Schema**:
```json
{
  "success": true,
  "addresses": [
    {
      "address": "TKvjY...",
      "native_balance": "1000000000",
      "token_balances": [...],
      "total_usd_value": 1100.5,
      "success": true,
      "error_message": ""
    },
    {
      "address": "TAbcD...",
      "native_balance": "500000000",
      "token_balances": [...],
      "total_usd_value": 550.25,
      "success": true,
      "error_message": ""
    }
  ],
  "total_usd_value": 1650.75,
  "failed_count": 0
}
```
