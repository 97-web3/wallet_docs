# 错误码定义 (errcode/)

## F-ERR-001: 签名服务错误码

- **文件**: `common/errcode/signer.go`
- **范围**: 2000-2999

### 通用错误 (2000-2099)

| 错误码 | 名称 | 说明 |
|--------|------|------|
| 0 | SignerSuccess | 成功 |
| 2001 | SignerInvalidParams | 参数错误 |
| 2002 | SignerInternalError | 内部错误 |
| 2003 | SignerDatabaseError | 数据库错误 |
| 2004 | SignerUnauthorized | 未授权 |
| 2005 | SignerRateLimitError | 请求限流 |
| 2006 | SignerServiceUnavail | 服务不可用 |

### Seed 错误 (2100-2199)

| 错误码 | 名称 | 说明 |
|--------|------|------|
| 2101 | SignerSeedNotFound | Seed不存在 |
| 2102 | SignerSeedAlreadyExist | Seed已存在 |
| 2103 | SignerSeedDecryptFail | Seed解密失败 |
| 2104 | SignerSeedInactive | Seed未激活 |
| 2105 | SignerSeedEncryptFail | Seed加密失败 |
| 2106 | SignerSeedHashMismatch | Seed哈希校验失败 |
| 2107 | SignerSeedInvalidPassword | Seed密码错误 |
| 2108 | SignerSeedDeprecated | Seed已废弃 |

### 公钥导出错误 (2200-2299)

| 错误码 | 名称 | 说明 |
|--------|------|------|
| 2201 | SignerInvalidPath | 派生路径无效 |
| 2202 | SignerPubkeyExportFail | 公钥导出失败 |
| 2203 | SignerChainNotSupport | 链不支持 |
| 2204 | SignerInvalidIndex | 索引无效 |
| 2205 | SignerBatchTooLarge | 批量数量过大 |
| 2206 | SignerDerivationFail | HD派生失败 |

### 签名错误 (2300-2399)

| 错误码 | 名称 | 说明 |
|--------|------|------|
| 2301 | SignerSignatureFailed | 签名失败 |
| 2302 | SignerDuplicateRequest | 重复请求 |
| 2303 | SignerInvalidTxData | 交易数据无效 |
| 2304 | SignerAmountExceedLimit | 金额超过限额 |
| 2305 | SignerApprovalRequired | 需要审批 |
| 2306 | SignerInvalidSignature | 签名验证失败 |
| 2307 | SignerPrivateKeyNotFound | 私钥不存在 |
| 2308 | SignerInvalidAddress | 地址无效 |

---

## F-ERR-002: 统一错误码规范

**描述**: 全系统统一的错误码分段规范，确保各服务错误码不冲突。

### 错误码分段

| 范围 | 服务/模块 | 说明 |
|------|-----------|------|
| 0 | 通用 | 成功 |
| 1000-1999 | Gateway | 网关层错误 |
| 2000-2999 | Signer | 签名服务错误 (见 F-ERR-001) |
| 3000-3999 | ChainRPC | 链交互错误 |
| 4000-4999 | ChainSync | 链同步错误 |
| 10000-19999 | Business-Auth | 认证相关 |
| 20000-29999 | Business-Asset | 资产相关 |
| 30000-39999 | Business-Tx | 交易相关 |
| 40000-49999 | Business-Security | 安全相关 |
| 50000-59999 | Business-User | 用户相关 |
| 60000-69999 | Business-Notification | 通知相关 |

### Gateway 错误码 (1000-1999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 1001 | GW_UNAUTHORIZED | 未认证，需要登录 |
| 1002 | GW_TOKEN_EXPIRED | Token 已过期 |
| 1003 | GW_TOKEN_INVALID | Token 无效或格式错误 |
| 1004 | GW_RATE_LIMITED | 请求过于频繁，已触发限流 |
| 1005 | GW_BLACKLISTED | 账户已被禁用/拉黑 |
| 1006 | GW_FORBIDDEN | 已认证但无权访问该资源 |
| 1007 | GW_BAD_REQUEST | 请求格式错误 |
| 1008 | GW_SERVICE_UNAVAILABLE | 上游服务不可用 |
| 1009 | GW_TIMEOUT | 请求超时 |

### ChainRPC 错误码 (3000-3999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 3001 | CRPC_CHAIN_NOT_SUPPORTED | 不支持的链类型 |
| 3002 | CRPC_INVALID_ADDRESS | 地址格式无效 |
| 3003 | CRPC_ADDRESS_MISMATCH | 地址与链不匹配 |
| 3004 | CRPC_BUILD_TX_FAILED | 构建交易失败 |
| 3005 | CRPC_BROADCAST_FAILED | 广播交易失败 |
| 3006 | CRPC_GAS_ESTIMATE_FAILED | Gas 估算失败 |
| 3007 | CRPC_INSUFFICIENT_GAS | 原生币不足以支付 Gas |
| 3008 | CRPC_NONCE_TOO_LOW | Nonce 过低 |
| 3009 | CRPC_TX_ALREADY_EXISTS | 交易已存在 |
| 3010 | CRPC_NODE_ERROR | 区块链节点错误 |

### ChainSync 错误码 (4000-4999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 4001 | CSYNC_SYNC_IN_PROGRESS | 同步进行中 |
| 4002 | CSYNC_BLOCK_NOT_FOUND | 区块未找到 |
| 4003 | CSYNC_TX_NOT_FOUND | 交易未找到 |
| 4004 | CSYNC_ADDRESS_NOT_MONITORED | 地址未被监控 |
| 4005 | CSYNC_PROVIDER_ERROR | RPC 提供商错误 |
| 4006 | CSYNC_REORG_DETECTED | 检测到链重组 |

### 认证错误码 (10000-19999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 10001 | AUTH_INVALID_PARAMS | 参数错误 |
| 10002 | AUTH_CODE_EXPIRED | 验证码已过期 |
| 10003 | AUTH_CODE_INVALID | 验证码错误 |
| 10004 | AUTH_CODE_LIMIT | 验证码发送过于频繁 |
| 10005 | AUTH_ACCOUNT_LOCKED | 账户已锁定 |
| 10006 | AUTH_BIOMETRIC_FAILED | 生物识别验证失败 |
| 10007 | AUTH_2FA_REQUIRED | 需要两步验证 |
| 10008 | AUTH_PASSWORD_WRONG | 密码错误 |
| 10009 | AUTH_USER_NOT_FOUND | 用户不存在 |
| 10010 | AUTH_USER_ALREADY_EXISTS | 用户已存在 |
| 10011 | AUTH_DEVICE_NOT_TRUSTED | 非信任设备 |
| 10012 | AUTH_LOGIN_REQUIRED | 需要重新登录 |

### 资产错误码 (20000-29999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 20001 | ASSET_NOT_FOUND | 资产不存在 |
| 20002 | ASSET_NOT_SUPPORTED | 不支持的资产类型 |
| 20003 | ASSET_FROZEN | 资产已冻结 |
| 20004 | ASSET_QUERY_FAILED | 资产查询失败 |

### 交易错误码 (30000-39999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 30001 | TX_INSUFFICIENT_BALANCE | 余额不足 |
| 30002 | TX_AMOUNT_TOO_SMALL | 金额低于最小限制 |
| 30003 | TX_AMOUNT_TOO_LARGE | 金额超过单笔限额 |
| 30004 | TX_DAILY_LIMIT | 超过每日限额 |
| 30005 | TX_INVALID_ADDRESS | 目标地址格式错误 |
| 30006 | TX_INTERNAL_ADDRESS | 目标为平台内部地址 |
| 30007 | TX_GAS_INSUFFICIENT | Gas 费用不足 |
| 30008 | TX_PENDING_EXISTS | 有待处理的交易 |
| 30009 | TX_NOT_FOUND | 交易不存在 |
| 30010 | TX_ALREADY_PROCESSED | 交易已处理 |
| 30011 | TX_AUDIT_REQUIRED | 需要审核 |
| 30012 | TX_AUDIT_REJECTED | 审核已驳回 |
| 30013 | TX_CANCELLED | 交易已取消 |
| 30014 | TX_FAILED | 交易失败 |
| 30015 | TX_RECEIVER_NOT_FOUND | 收款方不存在 |
| 30016 | TX_SELF_TRANSFER | 不能给自己转账 |

### 安全错误码 (40000-49999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 40001 | SEC_TRADE_PWD_NOT_SET | 未设置交易密码 |
| 40002 | SEC_TRADE_PWD_WRONG | 交易密码错误 |
| 40003 | SEC_2FA_NOT_ENABLED | 未启用两步验证 |
| 40004 | SEC_DEVICE_NOT_TRUSTED | 非信任设备 |
| 40005 | SEC_VERIFICATION_REQUIRED | 需要身份验证 |
| 40006 | SEC_PLATFORM_ALREADY_BOUND | 已绑定平台账户 |
| 40007 | SEC_PLATFORM_NOT_BOUND | 未绑定平台账户 |
| 40008 | SEC_BINDING_COOLDOWN | 绑定冷却期内，请稍后再试 |
| 40009 | SEC_BIOMETRIC_NOT_ENABLED | 未开启生物识别 |
| 40010 | SEC_VERIFICATION_TIMEOUT | 验证超时 |
| 40011 | SEC_VERIFICATION_LIMIT | 验证失败次数过多 |
| 40012 | SEC_GA_ALREADY_BOUND | Google Authenticator 已绑定 |
| 40013 | SEC_GA_NOT_BOUND | Google Authenticator 未绑定 |

### 用户错误码 (50000-59999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 50001 | USER_NOT_FOUND | 用户不存在 |
| 50002 | USER_FROZEN | 用户已冻结 |
| 50003 | USER_PROFILE_UPDATE_FAILED | 更新用户信息失败 |
| 50004 | USER_AVATAR_UPLOAD_FAILED | 头像上传失败 |
| 50005 | USER_NICKNAME_INVALID | 昵称格式无效 |

### 通知错误码 (60000-69999)

| 错误码 | 常量名 | 说明 |
|--------|--------|------|
| 60001 | NOTIF_NOT_FOUND | 通知不存在 |
| 60002 | NOTIF_ALREADY_READ | 通知已读 |
| 60003 | NOTIF_SEND_FAILED | 通知发送失败 |
| 60004 | NOTIF_PREFERENCE_INVALID | 通知偏好设置无效 |
