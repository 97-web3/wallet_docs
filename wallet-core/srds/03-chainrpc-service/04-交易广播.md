# 交易广播

> 返回 [ChainRPC 服务目录](./README.md)

---

## F-CRPC-010: 广播交易

**描述**: 将已签名交易广播到区块链网络。

**gRPC 方法**: `BroadcastTransaction`

**请求 Schema**:
```json
{
  "chain": 1,
  "signed_transaction": "0a02...",      // hex 编码签名交易
  "request_id": "req_123456",           // 幂等性 ID
  "wait_for_receipt": false,
  "timeout_seconds": 30
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "tx_hash": "abc123def456...",
  "nonce": 5,
  "status": 1,                          // TxStatus 枚举
  "broadcasted_at": 1702300800,
  "block_number": "",                   // wait_for_receipt=true 时返回
  "gas_used": 0
}
```

---

## F-CRPC-011: 批量广播交易

**描述**: 批量广播多笔签名交易。

**gRPC 方法**: `BroadcastBatch`

**请求 Schema**:
```json
{
  "chain": 1,
  "signed_transactions": ["0a02...", "0b03..."],
  "batch_id": "batch_123",
  "sequential": true                    // 是否顺序广播
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "batch_id": "batch_123",
  "total": 2,
  "success_count": 2,
  "failed_count": 0,
  "results": [
    {
      "index": 0,
      "success": true,
      "tx_hash": "abc123...",
      "error_message": ""
    }
  ]
}
```

---

## F-CRPC-012: 加速交易

**描述**: 通过 Replace-By-Fee (RBF) 机制加速待确认交易。

**gRPC 方法**: `SpeedUpTransaction`

**请求 Schema**:
```json
{
  "chain": 1,
  "original_tx_hash": "abc123...",
  "new_gas_price": "2000000000",        // 必须高于原交易
  "gas_speed": 3
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "new_tx_hash": "def456...",
  "old_tx_hash": "abc123...",
  "new_gas_price": "2000000000",
  "old_gas_price": "1000000000"
}
```

---

## F-CRPC-013: 取消交易

**描述**: 通过发送 0 值交易替换原交易来取消。

**gRPC 方法**: `CancelTransaction`

**请求 Schema**:
```json
{
  "chain": 1,
  "tx_hash": "abc123...",
  "from_address": "TKvjY...",
  "nonce": "5",
  "gas_price": "2000000000"             // 必须高于原交易
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "cancel_tx_hash": "ghi789...",
  "original_tx_hash": "abc123..."
}
```
