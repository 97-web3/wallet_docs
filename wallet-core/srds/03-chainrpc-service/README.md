# 链 RPC 服务 (ChainRPC Service) - 软件需求文档

## 模块概述

### 用途

ChainRPC 服务是 Internal-Wallet 系统的区块链交互模块，提供地址生成、交易构建、Gas 估算、交易广播、链上查询等核心区块链操作功能。支持多条区块链网络，为业务层提供统一的区块链操作接口。

### 系统架构中的角色

```
API Gateway / Business Service
              │
              ▼ gRPC
┌─────────────────────────────────────────┐
│           ChainRPC Service              │
│  ┌─────────────────────────────────┐    │
│  │         统一接口层               │    │
│  │  - 地址管理    - 交易构建        │    │
│  │  - Gas 管理    - 交易广播        │    │
│  │  - 链上查询    - 节点管理        │    │
│  └─────────────────────────────────┘    │
│                  │                       │
│                  ▼                       │
│  ┌─────────────────────────────────┐    │
│  │       多链适配层                 │    │
│  │  TRON │ BSC │ Ethereum │ Polygon │    │
│  └─────────────────────────────────┘    │
└─────────────────────────────────────────┘
              │
              ▼
      区块链 RPC 节点
  (QuickNode/Infura/Alchemy)
```

### 服务依赖

| 依赖 | 类型 | 用途 |
|------|------|------|
| Signer Service | gRPC | 交易签名 |
| RPC 节点 | HTTP/WebSocket | 区块链交互 |
| ETCD | 服务发现 | 服务注册 |
| Redis | 缓存 | 数据缓存 |

### 支持的区块链

| 链 | 枚举值 | 原生币 | 代币标准 |
|----|--------|--------|----------|
| TRON | CHAIN_TYPE_TRON (1) | TRX | TRC20 |
| BSC | CHAIN_TYPE_BSC (2) | BNB | BEP20 |
| Ethereum | CHAIN_TYPE_ETHEREUM (3) | ETH | ERC20 |
| Polygon | CHAIN_TYPE_POLYGON (4) | MATIC | ERC20 |

---

## 文档目录

| 文档 | 描述 | 功能数量 |
|------|------|----------|
| [01-地址管理.md](./01-地址管理.md) | 地址生成、验证、公钥转换 | 4 |
| [02-交易构建.md](./02-交易构建.md) | 主币/代币转账、批量转账 | 3 |
| [03-Gas管理.md](./03-Gas管理.md) | Gas 估算、价格获取 | 2 |
| [04-交易广播.md](./04-交易广播.md) | 广播、批量广播、加速、取消 | 4 |
| [05-链上查询.md](./05-链上查询.md) | 余额、多地址余额 | 3 |
| [06-交易查询.md](./06-交易查询.md) | 交易详情、状态、收据 | 3 |
| [07-区块查询.md](./07-区块查询.md) | 区块高度、区块信息、Nonce | 3 |
| [08-代币与节点.md](./08-代币与节点.md) | 代币信息、节点健康、状态、切换 | 6 |
| [99-数据模型与配置.md](./99-数据模型与配置.md) | 枚举、配置、依赖、安全 | - |

**总功能数**: 28 个 RPC 接口

---

## 快速导航

- 返回 [总目录](../00-目录.md)
- 上一模块: [业务服务](../02-business-service/)
- 下一模块: [ChainSync 服务](../04-chainsync-service/)
