# 数据模型与配置

> 返回 [ChainRPC 服务目录](./README.md)

---

## 1. 枚举定义汇总

### 1.1 区块链类型 (ChainRpcType)

| 值 | 名称 | 描述 |
|----|------|------|
| 0 | CHAIN_TYPE_UNSPECIFIED | 未指定 |
| 1 | CHAIN_TYPE_TRON | TRON |
| 2 | CHAIN_TYPE_BSC | BSC |
| 3 | CHAIN_TYPE_ETHEREUM | Ethereum |
| 4 | CHAIN_TYPE_POLYGON | Polygon |

### 1.2 地址类型 (AddressType)

| 值 | 名称 | 描述 |
|----|------|------|
| 0 | ADDRESS_TYPE_UNSPECIFIED | 未指定 |
| 1 | ADDRESS_TYPE_EOA | 外部账户 |
| 2 | ADDRESS_TYPE_CONTRACT | 合约地址 |

### 1.3 交易状态 (TxStatus)

| 值 | 名称 | 描述 |
|----|------|------|
| 1 | TX_STATUS_PENDING | 待确认 |
| 2 | TX_STATUS_CONFIRMED | 已确认 |
| 3 | TX_STATUS_FAILED | 失败 |
| 4 | TX_STATUS_DROPPED | 被丢弃 |
| 5 | TX_STATUS_REPLACED | 被替换 |

### 1.4 Gas 速度 (GasSpeed)

| 值 | 名称 | 描述 |
|----|------|------|
| 1 | GAS_SPEED_SLOW | 慢速 (省钱) |
| 2 | GAS_SPEED_STANDARD | 标准 |
| 3 | GAS_SPEED_FAST | 快速 |
| 4 | GAS_SPEED_INSTANT | 极速 |

### 1.5 节点类型 (NodeType)

| 值 | 名称 | 描述 |
|----|------|------|
| 1 | NODE_TYPE_QUICKNODE | QuickNode |
| 2 | NODE_TYPE_INFURA | Infura |
| 3 | NODE_TYPE_ALCHEMY | Alchemy |
| 4 | NODE_TYPE_ANKR | Ankr |
| 5 | NODE_TYPE_CUSTOM | 自建节点 |

---

## 2. 依赖

### 2.1 外部库

| 库 | 版本 | 用途 |
|----|------|------|
| github.com/ethereum/go-ethereum | 1.15.6 | 以太坊客户端 |
| github.com/fbsobreira/gotron-sdk | 0.24.1 | TRON SDK |
| github.com/zeromicro/go-zero | 1.6.0 | 微服务框架 |
| google.golang.org/grpc | 1.75.0 | gRPC |

### 2.2 RPC 节点提供商

| 提供商 | 支持链 |
|--------|--------|
| QuickNode | ETH, BSC, TRON, Polygon |
| Infura | ETH, Polygon |
| Alchemy | ETH, Polygon |
| Ankr | ETH, BSC, Polygon |
| Moralis | ETH, BSC, Polygon |

---

## 3. 配置

### 3.1 服务配置示例

```yaml
Name: chainrpc.rpc
ListenOn: 0.0.0.0:9002
NodeID: 2

Etcd:
  Hosts:
    - 127.0.0.1:2379
  Key: chainrpc.rpc

Providers:
  TRON:
    - name: quicknode
      endpoint: https://tron.quicknode.pro/xxx
      apiKey: "your-api-key"
      priority: 1
      rateLimit: 100

  BSC:
    - name: quicknode
      endpoint: https://bsc.quicknode.pro/xxx
      priority: 1

  ETH:
    - name: infura
      endpoint: https://mainnet.infura.io/v3/xxx
      priority: 1

Prometheus:
  Host: 0.0.0.0
  Port: 9092
```

---

## 4. 安全考量

### 4.1 安全建议

1. **节点访问**: 使用 HTTPS 和 API Key 访问 RPC 节点
2. **输入验证**: 严格验证地址、金额等输入参数
3. **速率限制**: 对 RPC 调用进行速率限制
4. **超时控制**: 设置合理的请求超时时间
5. **错误处理**: 避免泄露敏感节点信息
