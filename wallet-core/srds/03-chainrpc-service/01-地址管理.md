# 地址管理

> 返回 [ChainRPC 服务目录](./README.md)

---

## F-CRPC-001: 生成地址

**描述**: 基于 HD 钱包派生路径生成区块链地址。

**gRPC 方法**: `GenerateAddress`

**请求 Schema**:
```json
{
  "chain": 1,                          // ChainRpcType 枚举
  "derivation_path": "m/44'/195'/0'/0/10001",
  "public_key": "04a1b2c3...",         // hex 编码公钥
  "compressed_pubkey": "02a1b2c3..."   // 可选：压缩公钥
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "地址生成成功",
  "address": "TKvjYxxxxxxxxxxx",
  "chain": 1,
  "derivation_path": "m/44'/195'/0'/0/10001",
  "address_type": 1                     // 1=EOA, 2=合约
}
```

---

## F-CRPC-002: 批量生成地址

**描述**: 批量生成多个连续索引的地址。

**gRPC 方法**: `GenerateAddressBatch`

**请求 Schema**:
```json
{
  "chain": 1,
  "start_index": 0,
  "count": 100,
  "master_public_key": "xpub...",
  "account": 0,                         // BIP44 account
  "change": 0                           // 0=external, 1=internal
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "批量生成成功",
  "chain": 1,
  "addresses": [
    {
      "index": 0,
      "derivation_path": "m/44'/195'/0'/0/0",
      "address": "TKvjY...",
      "public_key": "04..."
    }
  ],
  "total": 100
}
```

---

## F-CRPC-003: 验证地址

**描述**: 验证地址格式和校验和是否正确。

**gRPC 方法**: `ValidateAddress`

**请求 Schema**:
```json
{
  "chain": 1,
  "address": "TKvjYxxxxxxxxxxx"
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "valid": true,
  "address_type": 1,                    // 1=EOA, 2=合约
  "checksum_valid": true
}
```

---

## F-CRPC-004: 从公钥生成地址

**描述**: 根据公钥直接生成对应链的地址。

**gRPC 方法**: `GetAddressFromPubkey`

**请求 Schema**:
```json
{
  "chain": 1,
  "public_key": "04a1b2c3d4e5...",      // hex 编码
  "compressed": false
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "address": "TKvjYxxxxxxxxxxx"
}
```
