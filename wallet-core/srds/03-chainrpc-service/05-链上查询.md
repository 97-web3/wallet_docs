# 链上查询

> 返回 [ChainRPC 服务目录](./README.md)

---

## F-CRPC-014: 查询余额

**描述**: 查询地址的原生币余额。

**gRPC 方法**: `GetBalance`

**请求 Schema**:
```json
{
  "chain": 1,
  "address": "TKvjY...",
  "block_number": ""                    // 可选：指定区块
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "balance": "1000000000",              // 最小单位
  "balance_formatted": "1000 TRX",
  "balance_usd": 100.5,
  "block_number": "12345678"
}
```

---

## F-CRPC-015: 查询代币余额

**描述**: 查询地址的代币余额。

**gRPC 方法**: `GetTokenBalance`

**请求 Schema**:
```json
{
  "chain": 1,
  "address": "TKvjY...",
  "token_contract": "TR7N...",
  "block_number": ""
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "balance": "1000000000",
  "balance_formatted": "1000 USDT",
  "balance_usd": 1000.0,
  "token_symbol": "USDT",
  "token_decimals": 6
}
```

---

## F-CRPC-016: 查询多地址余额

**描述**: 批量查询多个地址的余额。

**gRPC 方法**: `GetMultiBalance`

**请求 Schema**:
```json
{
  "chain": 1,
  "addresses": ["TKvjY...", "TAbcD..."],
  "token_contracts": ["TR7N..."]        // 空则只查主币
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "balances": [
    {
      "address": "TKvjY...",
      "native_balance": "1000000000",
      "tokens": [
        {
          "token_contract": "TR7N...",
          "token_symbol": "USDT",
          "decimals": 6,
          "balance": "1000000000",
          "balance_formatted": "1000",
          "balance_usd": 1000.0
        }
      ],
      "total_usd": 1100.5
    }
  ],
  "total_usd": 2200.0
}
```
