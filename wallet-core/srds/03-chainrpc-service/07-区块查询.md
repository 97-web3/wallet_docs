# 区块查询

> 返回 [ChainRPC 服务目录](./README.md)

---

## F-CRPC-020: 查询区块高度

**描述**: 获取当前最新区块高度。

**gRPC 方法**: `GetBlockHeight`

**请求 Schema**:
```json
{
  "chain": 1
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "block_height": 12345678,
  "block_hash": "abc123...",
  "timestamp": 1702300800
}
```

---

## F-CRPC-021: 查询区块信息

**描述**: 获取指定区块的详细信息。

**gRPC 方法**: `GetBlock`

**请求 Schema**:
```json
{
  "chain": 1,
  "block_number": "12345678",           // 二选一
  "block_hash": "",                     // 二选一
  "include_transactions": false
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "block": {
    "block_number": "12345678",
    "block_hash": "abc123...",
    "parent_hash": "def456...",
    "timestamp": 1702300800,
    "transaction_count": 150,
    "miner": "TXyz...",
    "difficulty": "1234567890",
    "gas_limit": 30000000,
    "gas_used": 15000000,
    "size": "12345",
    "transaction_hashes": ["..."],
    "transactions": []                  // include_transactions=true 时
  }
}
```

---

## F-CRPC-022: 查询 Nonce

**描述**: 获取地址的当前 nonce 值。

**gRPC 方法**: `GetNonce`

**请求 Schema**:
```json
{
  "chain": 1,
  "address": "TKvjY...",
  "pending": true                       // 是否查询 pending 状态
}
```

**响应 Schema**:
```json
{
  "success": true,
  "message": "",
  "nonce": "5",
  "pending_nonce": "6"
}
```
